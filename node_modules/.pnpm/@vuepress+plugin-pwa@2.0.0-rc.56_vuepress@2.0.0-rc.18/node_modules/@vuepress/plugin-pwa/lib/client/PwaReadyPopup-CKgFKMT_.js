import{useLocaleConfig as r}from"@vuepress/helper/client";import{defineComponent as i,shallowRef as c,computed as d,onMounted as m,h as a,Transition as v}from"vue";import{U as f}from"./icons-DQk7h1-3.js";import"./styles/popup.css";import{u as w}from"./usePwaEvent-CUDY9qle.js";const u=t=>{const o=t.waiting;if(!o)return;const s=new MessageChannel;o.postMessage({type:"SKIP_WAITING"},[s.port2])},P=i({name:"PwaReadyPopup",props:{locales:{type:Object,required:!0}},slots:Object,setup(t,{slots:o}){const s=r(t.locales),e=c(),p=d(()=>!!e.value),n=()=>{e.value&&(u(e.value),e.value=void 0)};return m(()=>{w().on("updated",l=>{e.value=l})}),()=>a(v,{name:"popup"},()=>o.default?.({isReady:p.value,reload:n})??(p.value?a("button",{type:"button",class:"sw-update-popup",tabindex:0,onClick:()=>{n()}},[s.value.update,a("span",{class:"icon-wrapper"},a(f))]):null))}});export{P,u as s};
//# sourceMappingURL=PwaReadyPopup-CKgFKMT_.js.map
