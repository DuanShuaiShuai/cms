{"content":"<h1 id=\"dd\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#dd\"><span>dd</span></a></h1>\n<p><code v-pre>dd</code> 命令用于复制磁盘或文件系统。</p>\n<h2 id=\"复制磁盘\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#复制磁盘\"><span>复制磁盘</span></a></h2>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/sda</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sdb</span></span></code></pre>\n</div><p>上面命令表示将<code v-pre>/dev/sda</code> 磁盘复制到<code v-pre>/dev/sdb</code> 设备。参数 <code v-pre>if</code> 表示来源地，<code v-pre>of</code> 表示目的地。</p>\n<p>除了复制，<code v-pre>dd</code> 还允许将磁盘做成一个镜像文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/sda</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/home/username/sdadisk.img</span></span></code></pre>\n</div><p><code v-pre>dd</code> 还可以复制单个分区。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/sda2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/home/username/partition2.img</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> bs=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">4096</span></span></code></pre>\n</div><p>上面命令中，参数 <code v-pre>bs</code> 表示单次拷贝的字节数(bytes)。</p>\n<p>要将镜像文件复原，也很简单。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=sdadisk.img</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sdb</span></span></code></pre>\n</div><h2 id=\"清除数据\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#清除数据\"><span>清除数据</span></a></h2>\n<p><code v-pre>dd</code> 也可以用于清除磁盘数据。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 磁盘数据写满 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/zero</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sda1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 磁盘数据写满随机字符</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/urandom</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sda1</span></span></code></pre>\n</div><h2 id=\"监控进展\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#监控进展\"><span>监控进展</span></a></h2>\n<p>磁盘的复制通常需要很久，为了监控进展，可以使用 Pipe Viewer 工具软件。如果没有安装这个软件，可以使用下面的命令安装。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">sudo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> apt</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> install</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pv</span></span></code></pre>\n</div><p>然后，来源地和目的地之间插入广告，就可以看到进展了。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/urandom</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">pv</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sda1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4,14MB</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 0:00:05</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">98kB/s]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [      &#x3C;=>                  </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">]</span></span></code></pre>\n</div><h2 id=\"参考链接\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参考链接\"><span>参考链接</span></a></h2>\n<ul>\n<li>David Clinton, <a href=\"https://opensource.com/article/18/7/how-use-dd-linux\" target=\"_blank\" rel=\"noopener noreferrer\">How to use dd in Linux without destroying your disk</a></li>\n</ul>\n","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/linux/bash/archives/commands/dd.md","filePathRelative":"linux/bash/archives/commands/dd.md","frontmatter":{"date":"2020-06-04T00:00:00.000Z"},"sfcBlocks":{"template":{"type":"template","content":"<template><h1 id=\"dd\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#dd\"><span>dd</span></a></h1>\n<p><code v-pre>dd</code> 命令用于复制磁盘或文件系统。</p>\n<h2 id=\"复制磁盘\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#复制磁盘\"><span>复制磁盘</span></a></h2>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/sda</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sdb</span></span></code></pre>\n</div><p>上面命令表示将<code v-pre>/dev/sda</code> 磁盘复制到<code v-pre>/dev/sdb</code> 设备。参数 <code v-pre>if</code> 表示来源地，<code v-pre>of</code> 表示目的地。</p>\n<p>除了复制，<code v-pre>dd</code> 还允许将磁盘做成一个镜像文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/sda</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/home/username/sdadisk.img</span></span></code></pre>\n</div><p><code v-pre>dd</code> 还可以复制单个分区。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/sda2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/home/username/partition2.img</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> bs=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">4096</span></span></code></pre>\n</div><p>上面命令中，参数 <code v-pre>bs</code> 表示单次拷贝的字节数(bytes)。</p>\n<p>要将镜像文件复原，也很简单。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=sdadisk.img</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sdb</span></span></code></pre>\n</div><h2 id=\"清除数据\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#清除数据\"><span>清除数据</span></a></h2>\n<p><code v-pre>dd</code> 也可以用于清除磁盘数据。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 磁盘数据写满 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/zero</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sda1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 磁盘数据写满随机字符</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/urandom</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sda1</span></span></code></pre>\n</div><h2 id=\"监控进展\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#监控进展\"><span>监控进展</span></a></h2>\n<p>磁盘的复制通常需要很久，为了监控进展，可以使用 Pipe Viewer 工具软件。如果没有安装这个软件，可以使用下面的命令安装。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">sudo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> apt</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> install</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pv</span></span></code></pre>\n</div><p>然后，来源地和目的地之间插入广告，就可以看到进展了。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/urandom</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">pv</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sda1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4,14MB</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 0:00:05</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">98kB/s]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [      &#x3C;=>                  </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">]</span></span></code></pre>\n</div><h2 id=\"参考链接\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参考链接\"><span>参考链接</span></a></h2>\n<ul>\n<li>David Clinton, <a href=\"https://opensource.com/article/18/7/how-use-dd-linux\" target=\"_blank\" rel=\"noopener noreferrer\">How to use dd in Linux without destroying your disk</a></li>\n</ul>\n</template>","contentStripped":"<h1 id=\"dd\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#dd\"><span>dd</span></a></h1>\n<p><code v-pre>dd</code> 命令用于复制磁盘或文件系统。</p>\n<h2 id=\"复制磁盘\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#复制磁盘\"><span>复制磁盘</span></a></h2>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/sda</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sdb</span></span></code></pre>\n</div><p>上面命令表示将<code v-pre>/dev/sda</code> 磁盘复制到<code v-pre>/dev/sdb</code> 设备。参数 <code v-pre>if</code> 表示来源地，<code v-pre>of</code> 表示目的地。</p>\n<p>除了复制，<code v-pre>dd</code> 还允许将磁盘做成一个镜像文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/sda</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/home/username/sdadisk.img</span></span></code></pre>\n</div><p><code v-pre>dd</code> 还可以复制单个分区。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/sda2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/home/username/partition2.img</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> bs=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">4096</span></span></code></pre>\n</div><p>上面命令中，参数 <code v-pre>bs</code> 表示单次拷贝的字节数(bytes)。</p>\n<p>要将镜像文件复原，也很简单。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=sdadisk.img</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sdb</span></span></code></pre>\n</div><h2 id=\"清除数据\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#清除数据\"><span>清除数据</span></a></h2>\n<p><code v-pre>dd</code> 也可以用于清除磁盘数据。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 磁盘数据写满 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/zero</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sda1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 磁盘数据写满随机字符</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/urandom</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sda1</span></span></code></pre>\n</div><h2 id=\"监控进展\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#监控进展\"><span>监控进展</span></a></h2>\n<p>磁盘的复制通常需要很久，为了监控进展，可以使用 Pipe Viewer 工具软件。如果没有安装这个软件，可以使用下面的命令安装。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">sudo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> apt</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> install</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pv</span></span></code></pre>\n</div><p>然后，来源地和目的地之间插入广告，就可以看到进展了。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if=/dev/urandom</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">pv</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> of=/dev/sda1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4,14MB</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 0:00:05</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">98kB/s]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [      &#x3C;=>                  </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">]</span></span></code></pre>\n</div><h2 id=\"参考链接\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参考链接\"><span>参考链接</span></a></h2>\n<ul>\n<li>David Clinton, <a href=\"https://opensource.com/article/18/7/how-use-dd-linux\" target=\"_blank\" rel=\"noopener noreferrer\">How to use dd in Linux without destroying your disk</a></li>\n</ul>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n# dd\n\n`dd` 命令用于复制磁盘或文件系统。\n\n## 复制磁盘\n\n```bash\ndd if=/dev/sda of=/dev/sdb\n```\n\n上面命令表示将`/dev/sda` 磁盘复制到`/dev/sdb` 设备。参数 `if` 表示来源地，`of` 表示目的地。\n\n除了复制，`dd` 还允许将磁盘做成一个镜像文件。\n\n```bash\ndd if=/dev/sda of=/home/username/sdadisk.img\n```\n\n`dd` 还可以复制单个分区。\n\n```bash\ndd if=/dev/sda2 of=/home/username/partition2.img bs=4096\n```\n\n上面命令中，参数 `bs` 表示单次拷贝的字节数(bytes)。\n\n要将镜像文件复原，也很简单。\n\n```bash\ndd if=sdadisk.img of=/dev/sdb\n```\n\n## 清除数据\n\n`dd` 也可以用于清除磁盘数据。\n\n```bash\n# 磁盘数据写满 0\n$ dd if=/dev/zero of=/dev/sda1\n\n# 磁盘数据写满随机字符\n$ dd if=/dev/urandom of=/dev/sda1\n```\n\n## 监控进展\n\n磁盘的复制通常需要很久，为了监控进展，可以使用 Pipe Viewer 工具软件。如果没有安装这个软件，可以使用下面的命令安装。\n\n```bash\nsudo apt install pv\n```\n\n然后，来源地和目的地之间插入广告，就可以看到进展了。\n\n```bash\n$ dd if=/dev/urandom | pv | dd of=/dev/sda1\n4,14MB 0:00:05 [ 98kB/s] [      <=>                  ]\n```\n\n## 参考链接\n\n- David Clinton, [How to use dd in Linux without destroying your disk](https://opensource.com/article/18/7/how-use-dd-linux)\n","excerpt":"","title":"dd","headers":[{"level":2,"title":"复制磁盘","slug":"复制磁盘","link":"#复制磁盘","children":[]},{"level":2,"title":"清除数据","slug":"清除数据","link":"#清除数据","children":[]},{"level":2,"title":"监控进展","slug":"监控进展","link":"#监控进展","children":[]},{"level":2,"title":"参考链接","slug":"参考链接","link":"#参考链接","children":[]}]}}
