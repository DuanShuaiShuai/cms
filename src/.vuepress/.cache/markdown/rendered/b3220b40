{"content":"<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">提示</p>\n<p>此部分在初步学习小程序的时候直接略过即可。</p>\n</div>\n<h2 id=\"界面动画的常见方式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#界面动画的常见方式\"><span>界面动画的常见方式</span></a></h2>\n<p>在小程序中，通常可以使用 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions\" target=\"_blank\" rel=\"noopener noreferrer\">CSS 渐变</a> 和 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Animations/Using_CSS_animations\" target=\"_blank\" rel=\"noopener noreferrer\">CSS 动画</a> 来创建简易的界面动画。(这也是 Mr.Hope 主要使用的动画方式)</p>\n<blockquote>\n<p><a href=\"https://developers.weixin.qq.com/s/oHKxDPm47h5k\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n</blockquote>\n<p>同时，还可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/ui/animation/wx.createAnimation.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.createAnimation</code></a> 接口来动态创建简易的动画效果。</p>\n<p>动画过程中，可以使用 <code v-pre>bindtransitionend</code> <code v-pre>bindanimationstart</code> <code v-pre>bindanimationiteration</code> <code v-pre>bindanimationend</code> 来监听动画事件。</p>\n<table>\n<thead>\n<tr>\n<th>事件名</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>transitionend</td>\n<td>CSS 渐变结束或 wx.createAnimation 结束一个阶段</td>\n</tr>\n<tr>\n<td>animationstart</td>\n<td>CSS 动画开始</td>\n</tr>\n<tr>\n<td>animationiteration</td>\n<td>CSS 动画结束一个阶段</td>\n</tr>\n<tr>\n<td>animationend</td>\n<td>CSS 动画结束</td>\n</tr>\n</tbody>\n</table>\n<div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<p>这几个事件都不是冒泡事件，需要绑定在真正发生了动画的节点上才会生效。</p>\n<p>Mr.Hope 强烈建议优先使用 <strong>CSS 动画</strong>。只有 <strong>CSS 动画</strong> 无法满足要求时，才应该考虑 <code v-pre>wx.createAnimation</code>。</p>\n</div>\n<h2 id=\"关键帧动画\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#关键帧动画\"><span>关键帧动画</span></a></h2>\n<blockquote>\n<p>基础库 2.9.0 开始支持</p>\n</blockquote>\n<p>关键帧动画用于代替旧的 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/ui/animation/wx.createAnimation.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.createAnimation</code></a> 。它具有更好的性能和更可控的接口。</p>\n<h3 id=\"animate\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#animate\"><span>animate</span></a></h3>\n<p>在页面或自定义组件中，当需要进行关键帧动画时，可以使用 <code v-pre>this.animate</code> 接口:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">selector</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">keyframes</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">duration</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">callback</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n</div><p>参数说明</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>selector</td>\n<td>String</td>\n<td></td>\n<td>是</td>\n<td>选择器(同 SelectorQuery.select 的选择器格式)</td>\n</tr>\n<tr>\n<td>keyframes</td>\n<td>Array</td>\n<td></td>\n<td>是</td>\n<td>关键帧信息</td>\n</tr>\n<tr>\n<td>duration</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>动画持续时长(毫秒为单位)</td>\n</tr>\n<tr>\n<td>callback</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>动画完成后的回调函数</td>\n</tr>\n</tbody>\n</table>\n<p>keyframes 中对象的结构</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>offset</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>关键帧的偏移，范围[0-1]</td>\n</tr>\n<tr>\n<td>ease</td>\n<td>String</td>\n<td>linear</td>\n<td>否</td>\n<td>动画缓动函数</td>\n</tr>\n<tr>\n<td>transformOrigin</td>\n<td>String</td>\n<td>否</td>\n<td>基点位置，即 CSS transform-origin</td>\n<td></td>\n</tr>\n<tr>\n<td>backgroundColor</td>\n<td>String</td>\n<td></td>\n<td>否</td>\n<td>背景颜色，即 CSS background-color</td>\n</tr>\n<tr>\n<td>bottom</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>底边位置，即 CSS bottom</td>\n</tr>\n<tr>\n<td>height</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>高度，即 CSS height</td>\n</tr>\n<tr>\n<td>left</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>左边位置，即 CSS left</td>\n</tr>\n<tr>\n<td>width</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>宽度，即 CSS width</td>\n</tr>\n<tr>\n<td>opacity</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>不透明度，即 CSS opacity</td>\n</tr>\n<tr>\n<td>right</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>右边位置，即 CSS right</td>\n</tr>\n<tr>\n<td>top</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>顶边位置，即 CSS top</td>\n</tr>\n<tr>\n<td>matrix</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>变换矩阵，即 CSS transform matrix</td>\n</tr>\n<tr>\n<td>matrix3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维变换矩阵，即 CSS transform matrix3d</td>\n</tr>\n<tr>\n<td>rotate</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>旋转，即 CSS transform rotate</td>\n</tr>\n<tr>\n<td>rotate3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维旋转，即 CSS transform rotate3d</td>\n</tr>\n<tr>\n<td>rotateX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向旋转，即 CSS transform rotateX</td>\n</tr>\n<tr>\n<td>rotateY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向旋转，即 CSS transform rotateY</td>\n</tr>\n<tr>\n<td>rotateZ</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Z 方向旋转，即 CSS transform rotateZ</td>\n</tr>\n<tr>\n<td>scale</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>缩放，即 CSS transform scale</td>\n</tr>\n<tr>\n<td>scale3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维缩放，即 CSS transform scale3d</td>\n</tr>\n<tr>\n<td>scaleX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向缩放，即 CSS transform scaleX</td>\n</tr>\n<tr>\n<td>scaleY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向缩放，即 CSS transform scaleY</td>\n</tr>\n<tr>\n<td>scaleZ</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Z 方向缩放，即 CSS transform scaleZ</td>\n</tr>\n<tr>\n<td>skew</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>倾斜，即 CSS transform skew</td>\n</tr>\n<tr>\n<td>skewX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向倾斜，即 CSS transform skewX</td>\n</tr>\n<tr>\n<td>skewY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向倾斜，即 CSS transform skewY</td>\n</tr>\n<tr>\n<td>translate</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>位移，即 CSS transform translate</td>\n</tr>\n<tr>\n<td>translate3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维位移，即 CSS transform translate3d</td>\n</tr>\n<tr>\n<td>translateX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向位移，即 CSS transform translateX</td>\n</tr>\n<tr>\n<td>translateY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向位移，即 CSS transform translateY</td>\n</tr>\n<tr>\n<td>translateZ</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Z 方向位移，即 CSS transform translateZ</td>\n</tr>\n</tbody>\n</table>\n<details class=\"hint-container details\"><summary>代码示例</summary>\n<p><a href=\"https://developers.weixin.qq.com/s/P73kJ7mi7UcA\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \"#container\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1.0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">backgroundColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#FF0000\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 45</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">backgroundColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#00FF00\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 90</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">backgroundColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#FF0000\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  5000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">    this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clearAnimation</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">      \"#container\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">      { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">      function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">        console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"清除了#container上的opacity和rotate属性\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bind</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \".block\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">scale</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">], </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ease</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"ease-out\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">scale</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">], </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 45</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ease</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"ease-in\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.9</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">scale</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">], </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 90</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  5000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">    this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clearAnimation</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\".block\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">      console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"清除了.block上的所有动画属性\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bind</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></details>\n<h3 id=\"clearanimation\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#clearanimation\"><span>clearAnimation</span></a></h3>\n<p>调用 animate API 后会在节点上新增一些样式属性覆盖掉原有的对应样式。如果需要清除这些样式，可在该节点上的动画全部执行完毕后使用 <code v-pre>this.clearAnimation</code> 清除这些属性。</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clearAnimation</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">selector</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">options</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">callback</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n</div><p>参数说明</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>selector</td>\n<td>String</td>\n<td></td>\n<td>是</td>\n<td>选择器(同 SelectorQuery.select 的选择器格式)</td>\n</tr>\n<tr>\n<td>options</td>\n<td>Object</td>\n<td></td>\n<td>否</td>\n<td>需要清除的属性，不填写则全部清除</td>\n</tr>\n<tr>\n<td>callback</td>\n<td>Function</td>\n<td></td>\n<td>否</td>\n<td>清除完成后的回调函数</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"滚动驱动的动画\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#滚动驱动的动画\"><span>滚动驱动的动画</span></a></h2>\n<blockquote>\n<p>基础库 2.9.0 开始支持</p>\n</blockquote>\n<p>根据滚动位置而不断改变动画的进度是一种比较常见的场景，这类动画可以让人感觉到界面交互很连贯自然，体验更好，目前支持一种由滚动驱动的动画机制。</p>\n<p>基于上述的关键帧动画接口，新增一个 <code v-pre>ScrollTimeline</code> 的参数，用来绑定滚动元素(目前只支持 scroll-view)。接口定义如下:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">selector</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">keyframes</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">duration</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">ScrollTimeline</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n</div><h3 id=\"scrolltimeline-中对象的结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#scrolltimeline-中对象的结构\"><span>ScrollTimeline 中对象的结构</span></a></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>scrollSource</td>\n<td>String</td>\n<td></td>\n<td>是</td>\n<td>指定滚动元素的选择器(只支持 scroll-view)，该元素滚动时会驱动动画的进度</td>\n</tr>\n<tr>\n<td>orientation</td>\n<td>String</td>\n<td>vertical</td>\n<td>否</td>\n<td>指定滚动的方向。有效值为 horizontal 或 vertical</td>\n</tr>\n<tr>\n<td>startScrollOffset</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>指定开始驱动动画进度的滚动偏移量，单位 px</td>\n</tr>\n<tr>\n<td>endScrollOffset</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>指定停止驱动动画进度的滚动偏移量，单位 px</td>\n</tr>\n<tr>\n<td>timeRange</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>起始和结束的滚动范围映射的时间长度，该时间可用于与关键帧动画里的时间 (duration) 相匹配，单位 ms</td>\n</tr>\n</tbody>\n</table>\n<details class=\"hint-container details\"><summary>代码示例</summary>\n<p><a href=\"https://developers.weixin.qq.com/s/994o8jmY7FcQ\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \".avatar\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderRadius</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"0\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"red\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      transform</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"scale(1) translateY(-20px)\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderRadius</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"25%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"blue\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      transform</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"scale(.65) translateY(-20px)\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderRadius</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"50%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"blue\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      transform</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> `scale(.3) translateY(-20px)`</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  2000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    scrollSource</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#scroller\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    timeRange</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    startScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    endScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 85</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \".search_input\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"0\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      width</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"0%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"1\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      width</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"100%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  1000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    scrollSource</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#scroller\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    timeRange</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    startScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 120</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    endScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 252</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></details>\n<h2 id=\"高级的动画方式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#高级的动画方式\"><span>高级的动画方式 <Badge text=\"初学者无需掌握\" type=\"warning\" /></span></a></h2>\n<p>在一些复杂场景下，上述的动画方法可能并不适用。所以这个时候就需要一些高级的动画方式。</p>\n<ol>\n<li>\n<p><RouteLink to=\"/code/mini-app/guide/view/wxs-event.html\">WXS 响应事件</RouteLink> 的方式可以通过使用 WXS 来响应事件的方法来动态调整节点的 style 属性。通过不断改变 style 属性的值可以做到动画效果。同时，这种方式也可以根据用户的触摸事件来动态地生成动画。</p>\n</li>\n<li>\n<p>连续使用 <code v-pre>setData</code> 来改变界面的方法也可以达到动画的效果。这样可以任意地改变界面，但通常会产生较大的延迟或卡顿，甚至导致小程序僵死。此时可以通过将页面的 <code v-pre>setData</code> 改为 自定义组件 中的 <code v-pre>setData</code> 来提升性能。下面的例子是使用 <code v-pre>setData</code> 来实现秒表动画的示例。</p>\n<blockquote>\n<p><a href=\"https://developers.weixin.qq.com/s/cRTvdPmO7d5T\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n</blockquote>\n</li>\n</ol>\n","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/code/mini-app/guide/view/animation.md","filePathRelative":"code/mini-app/guide/view/animation.md","frontmatter":{"date":"2020-10-09T00:00:00.000Z","title":"动画","icon":"animation","category":"小程序"},"sfcBlocks":{"template":{"type":"template","content":"<template><div class=\"hint-container tip\">\n<p class=\"hint-container-title\">提示</p>\n<p>此部分在初步学习小程序的时候直接略过即可。</p>\n</div>\n<h2 id=\"界面动画的常见方式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#界面动画的常见方式\"><span>界面动画的常见方式</span></a></h2>\n<p>在小程序中，通常可以使用 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions\" target=\"_blank\" rel=\"noopener noreferrer\">CSS 渐变</a> 和 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Animations/Using_CSS_animations\" target=\"_blank\" rel=\"noopener noreferrer\">CSS 动画</a> 来创建简易的界面动画。(这也是 Mr.Hope 主要使用的动画方式)</p>\n<blockquote>\n<p><a href=\"https://developers.weixin.qq.com/s/oHKxDPm47h5k\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n</blockquote>\n<p>同时，还可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/ui/animation/wx.createAnimation.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.createAnimation</code></a> 接口来动态创建简易的动画效果。</p>\n<p>动画过程中，可以使用 <code v-pre>bindtransitionend</code> <code v-pre>bindanimationstart</code> <code v-pre>bindanimationiteration</code> <code v-pre>bindanimationend</code> 来监听动画事件。</p>\n<table>\n<thead>\n<tr>\n<th>事件名</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>transitionend</td>\n<td>CSS 渐变结束或 wx.createAnimation 结束一个阶段</td>\n</tr>\n<tr>\n<td>animationstart</td>\n<td>CSS 动画开始</td>\n</tr>\n<tr>\n<td>animationiteration</td>\n<td>CSS 动画结束一个阶段</td>\n</tr>\n<tr>\n<td>animationend</td>\n<td>CSS 动画结束</td>\n</tr>\n</tbody>\n</table>\n<div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<p>这几个事件都不是冒泡事件，需要绑定在真正发生了动画的节点上才会生效。</p>\n<p>Mr.Hope 强烈建议优先使用 <strong>CSS 动画</strong>。只有 <strong>CSS 动画</strong> 无法满足要求时，才应该考虑 <code v-pre>wx.createAnimation</code>。</p>\n</div>\n<h2 id=\"关键帧动画\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#关键帧动画\"><span>关键帧动画</span></a></h2>\n<blockquote>\n<p>基础库 2.9.0 开始支持</p>\n</blockquote>\n<p>关键帧动画用于代替旧的 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/ui/animation/wx.createAnimation.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.createAnimation</code></a> 。它具有更好的性能和更可控的接口。</p>\n<h3 id=\"animate\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#animate\"><span>animate</span></a></h3>\n<p>在页面或自定义组件中，当需要进行关键帧动画时，可以使用 <code v-pre>this.animate</code> 接口:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">selector</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">keyframes</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">duration</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">callback</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n</div><p>参数说明</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>selector</td>\n<td>String</td>\n<td></td>\n<td>是</td>\n<td>选择器(同 SelectorQuery.select 的选择器格式)</td>\n</tr>\n<tr>\n<td>keyframes</td>\n<td>Array</td>\n<td></td>\n<td>是</td>\n<td>关键帧信息</td>\n</tr>\n<tr>\n<td>duration</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>动画持续时长(毫秒为单位)</td>\n</tr>\n<tr>\n<td>callback</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>动画完成后的回调函数</td>\n</tr>\n</tbody>\n</table>\n<p>keyframes 中对象的结构</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>offset</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>关键帧的偏移，范围[0-1]</td>\n</tr>\n<tr>\n<td>ease</td>\n<td>String</td>\n<td>linear</td>\n<td>否</td>\n<td>动画缓动函数</td>\n</tr>\n<tr>\n<td>transformOrigin</td>\n<td>String</td>\n<td>否</td>\n<td>基点位置，即 CSS transform-origin</td>\n<td></td>\n</tr>\n<tr>\n<td>backgroundColor</td>\n<td>String</td>\n<td></td>\n<td>否</td>\n<td>背景颜色，即 CSS background-color</td>\n</tr>\n<tr>\n<td>bottom</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>底边位置，即 CSS bottom</td>\n</tr>\n<tr>\n<td>height</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>高度，即 CSS height</td>\n</tr>\n<tr>\n<td>left</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>左边位置，即 CSS left</td>\n</tr>\n<tr>\n<td>width</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>宽度，即 CSS width</td>\n</tr>\n<tr>\n<td>opacity</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>不透明度，即 CSS opacity</td>\n</tr>\n<tr>\n<td>right</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>右边位置，即 CSS right</td>\n</tr>\n<tr>\n<td>top</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>顶边位置，即 CSS top</td>\n</tr>\n<tr>\n<td>matrix</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>变换矩阵，即 CSS transform matrix</td>\n</tr>\n<tr>\n<td>matrix3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维变换矩阵，即 CSS transform matrix3d</td>\n</tr>\n<tr>\n<td>rotate</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>旋转，即 CSS transform rotate</td>\n</tr>\n<tr>\n<td>rotate3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维旋转，即 CSS transform rotate3d</td>\n</tr>\n<tr>\n<td>rotateX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向旋转，即 CSS transform rotateX</td>\n</tr>\n<tr>\n<td>rotateY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向旋转，即 CSS transform rotateY</td>\n</tr>\n<tr>\n<td>rotateZ</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Z 方向旋转，即 CSS transform rotateZ</td>\n</tr>\n<tr>\n<td>scale</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>缩放，即 CSS transform scale</td>\n</tr>\n<tr>\n<td>scale3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维缩放，即 CSS transform scale3d</td>\n</tr>\n<tr>\n<td>scaleX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向缩放，即 CSS transform scaleX</td>\n</tr>\n<tr>\n<td>scaleY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向缩放，即 CSS transform scaleY</td>\n</tr>\n<tr>\n<td>scaleZ</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Z 方向缩放，即 CSS transform scaleZ</td>\n</tr>\n<tr>\n<td>skew</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>倾斜，即 CSS transform skew</td>\n</tr>\n<tr>\n<td>skewX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向倾斜，即 CSS transform skewX</td>\n</tr>\n<tr>\n<td>skewY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向倾斜，即 CSS transform skewY</td>\n</tr>\n<tr>\n<td>translate</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>位移，即 CSS transform translate</td>\n</tr>\n<tr>\n<td>translate3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维位移，即 CSS transform translate3d</td>\n</tr>\n<tr>\n<td>translateX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向位移，即 CSS transform translateX</td>\n</tr>\n<tr>\n<td>translateY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向位移，即 CSS transform translateY</td>\n</tr>\n<tr>\n<td>translateZ</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Z 方向位移，即 CSS transform translateZ</td>\n</tr>\n</tbody>\n</table>\n<details class=\"hint-container details\"><summary>代码示例</summary>\n<p><a href=\"https://developers.weixin.qq.com/s/P73kJ7mi7UcA\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \"#container\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1.0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">backgroundColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#FF0000\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 45</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">backgroundColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#00FF00\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 90</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">backgroundColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#FF0000\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  5000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">    this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clearAnimation</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">      \"#container\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">      { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">      function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">        console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"清除了#container上的opacity和rotate属性\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bind</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \".block\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">scale</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">], </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ease</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"ease-out\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">scale</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">], </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 45</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ease</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"ease-in\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.9</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">scale</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">], </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 90</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  5000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">    this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clearAnimation</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\".block\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">      console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"清除了.block上的所有动画属性\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bind</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></details>\n<h3 id=\"clearanimation\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#clearanimation\"><span>clearAnimation</span></a></h3>\n<p>调用 animate API 后会在节点上新增一些样式属性覆盖掉原有的对应样式。如果需要清除这些样式，可在该节点上的动画全部执行完毕后使用 <code v-pre>this.clearAnimation</code> 清除这些属性。</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clearAnimation</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">selector</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">options</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">callback</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n</div><p>参数说明</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>selector</td>\n<td>String</td>\n<td></td>\n<td>是</td>\n<td>选择器(同 SelectorQuery.select 的选择器格式)</td>\n</tr>\n<tr>\n<td>options</td>\n<td>Object</td>\n<td></td>\n<td>否</td>\n<td>需要清除的属性，不填写则全部清除</td>\n</tr>\n<tr>\n<td>callback</td>\n<td>Function</td>\n<td></td>\n<td>否</td>\n<td>清除完成后的回调函数</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"滚动驱动的动画\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#滚动驱动的动画\"><span>滚动驱动的动画</span></a></h2>\n<blockquote>\n<p>基础库 2.9.0 开始支持</p>\n</blockquote>\n<p>根据滚动位置而不断改变动画的进度是一种比较常见的场景，这类动画可以让人感觉到界面交互很连贯自然，体验更好，目前支持一种由滚动驱动的动画机制。</p>\n<p>基于上述的关键帧动画接口，新增一个 <code v-pre>ScrollTimeline</code> 的参数，用来绑定滚动元素(目前只支持 scroll-view)。接口定义如下:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">selector</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">keyframes</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">duration</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">ScrollTimeline</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n</div><h3 id=\"scrolltimeline-中对象的结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#scrolltimeline-中对象的结构\"><span>ScrollTimeline 中对象的结构</span></a></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>scrollSource</td>\n<td>String</td>\n<td></td>\n<td>是</td>\n<td>指定滚动元素的选择器(只支持 scroll-view)，该元素滚动时会驱动动画的进度</td>\n</tr>\n<tr>\n<td>orientation</td>\n<td>String</td>\n<td>vertical</td>\n<td>否</td>\n<td>指定滚动的方向。有效值为 horizontal 或 vertical</td>\n</tr>\n<tr>\n<td>startScrollOffset</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>指定开始驱动动画进度的滚动偏移量，单位 px</td>\n</tr>\n<tr>\n<td>endScrollOffset</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>指定停止驱动动画进度的滚动偏移量，单位 px</td>\n</tr>\n<tr>\n<td>timeRange</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>起始和结束的滚动范围映射的时间长度，该时间可用于与关键帧动画里的时间 (duration) 相匹配，单位 ms</td>\n</tr>\n</tbody>\n</table>\n<details class=\"hint-container details\"><summary>代码示例</summary>\n<p><a href=\"https://developers.weixin.qq.com/s/994o8jmY7FcQ\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \".avatar\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderRadius</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"0\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"red\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      transform</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"scale(1) translateY(-20px)\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderRadius</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"25%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"blue\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      transform</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"scale(.65) translateY(-20px)\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderRadius</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"50%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"blue\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      transform</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> `scale(.3) translateY(-20px)`</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  2000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    scrollSource</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#scroller\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    timeRange</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    startScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    endScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 85</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \".search_input\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"0\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      width</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"0%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"1\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      width</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"100%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  1000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    scrollSource</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#scroller\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    timeRange</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    startScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 120</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    endScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 252</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></details>\n<h2 id=\"高级的动画方式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#高级的动画方式\"><span>高级的动画方式 <Badge text=\"初学者无需掌握\" type=\"warning\" /></span></a></h2>\n<p>在一些复杂场景下，上述的动画方法可能并不适用。所以这个时候就需要一些高级的动画方式。</p>\n<ol>\n<li>\n<p><RouteLink to=\"/code/mini-app/guide/view/wxs-event.html\">WXS 响应事件</RouteLink> 的方式可以通过使用 WXS 来响应事件的方法来动态调整节点的 style 属性。通过不断改变 style 属性的值可以做到动画效果。同时，这种方式也可以根据用户的触摸事件来动态地生成动画。</p>\n</li>\n<li>\n<p>连续使用 <code v-pre>setData</code> 来改变界面的方法也可以达到动画的效果。这样可以任意地改变界面，但通常会产生较大的延迟或卡顿，甚至导致小程序僵死。此时可以通过将页面的 <code v-pre>setData</code> 改为 自定义组件 中的 <code v-pre>setData</code> 来提升性能。下面的例子是使用 <code v-pre>setData</code> 来实现秒表动画的示例。</p>\n<blockquote>\n<p><a href=\"https://developers.weixin.qq.com/s/cRTvdPmO7d5T\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n</blockquote>\n</li>\n</ol>\n</template>","contentStripped":"<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">提示</p>\n<p>此部分在初步学习小程序的时候直接略过即可。</p>\n</div>\n<h2 id=\"界面动画的常见方式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#界面动画的常见方式\"><span>界面动画的常见方式</span></a></h2>\n<p>在小程序中，通常可以使用 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions\" target=\"_blank\" rel=\"noopener noreferrer\">CSS 渐变</a> 和 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Animations/Using_CSS_animations\" target=\"_blank\" rel=\"noopener noreferrer\">CSS 动画</a> 来创建简易的界面动画。(这也是 Mr.Hope 主要使用的动画方式)</p>\n<blockquote>\n<p><a href=\"https://developers.weixin.qq.com/s/oHKxDPm47h5k\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n</blockquote>\n<p>同时，还可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/ui/animation/wx.createAnimation.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.createAnimation</code></a> 接口来动态创建简易的动画效果。</p>\n<p>动画过程中，可以使用 <code v-pre>bindtransitionend</code> <code v-pre>bindanimationstart</code> <code v-pre>bindanimationiteration</code> <code v-pre>bindanimationend</code> 来监听动画事件。</p>\n<table>\n<thead>\n<tr>\n<th>事件名</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>transitionend</td>\n<td>CSS 渐变结束或 wx.createAnimation 结束一个阶段</td>\n</tr>\n<tr>\n<td>animationstart</td>\n<td>CSS 动画开始</td>\n</tr>\n<tr>\n<td>animationiteration</td>\n<td>CSS 动画结束一个阶段</td>\n</tr>\n<tr>\n<td>animationend</td>\n<td>CSS 动画结束</td>\n</tr>\n</tbody>\n</table>\n<div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<p>这几个事件都不是冒泡事件，需要绑定在真正发生了动画的节点上才会生效。</p>\n<p>Mr.Hope 强烈建议优先使用 <strong>CSS 动画</strong>。只有 <strong>CSS 动画</strong> 无法满足要求时，才应该考虑 <code v-pre>wx.createAnimation</code>。</p>\n</div>\n<h2 id=\"关键帧动画\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#关键帧动画\"><span>关键帧动画</span></a></h2>\n<blockquote>\n<p>基础库 2.9.0 开始支持</p>\n</blockquote>\n<p>关键帧动画用于代替旧的 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/ui/animation/wx.createAnimation.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.createAnimation</code></a> 。它具有更好的性能和更可控的接口。</p>\n<h3 id=\"animate\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#animate\"><span>animate</span></a></h3>\n<p>在页面或自定义组件中，当需要进行关键帧动画时，可以使用 <code v-pre>this.animate</code> 接口:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">selector</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">keyframes</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">duration</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">callback</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n</div><p>参数说明</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>selector</td>\n<td>String</td>\n<td></td>\n<td>是</td>\n<td>选择器(同 SelectorQuery.select 的选择器格式)</td>\n</tr>\n<tr>\n<td>keyframes</td>\n<td>Array</td>\n<td></td>\n<td>是</td>\n<td>关键帧信息</td>\n</tr>\n<tr>\n<td>duration</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>动画持续时长(毫秒为单位)</td>\n</tr>\n<tr>\n<td>callback</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>动画完成后的回调函数</td>\n</tr>\n</tbody>\n</table>\n<p>keyframes 中对象的结构</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>offset</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>关键帧的偏移，范围[0-1]</td>\n</tr>\n<tr>\n<td>ease</td>\n<td>String</td>\n<td>linear</td>\n<td>否</td>\n<td>动画缓动函数</td>\n</tr>\n<tr>\n<td>transformOrigin</td>\n<td>String</td>\n<td>否</td>\n<td>基点位置，即 CSS transform-origin</td>\n<td></td>\n</tr>\n<tr>\n<td>backgroundColor</td>\n<td>String</td>\n<td></td>\n<td>否</td>\n<td>背景颜色，即 CSS background-color</td>\n</tr>\n<tr>\n<td>bottom</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>底边位置，即 CSS bottom</td>\n</tr>\n<tr>\n<td>height</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>高度，即 CSS height</td>\n</tr>\n<tr>\n<td>left</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>左边位置，即 CSS left</td>\n</tr>\n<tr>\n<td>width</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>宽度，即 CSS width</td>\n</tr>\n<tr>\n<td>opacity</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>不透明度，即 CSS opacity</td>\n</tr>\n<tr>\n<td>right</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>右边位置，即 CSS right</td>\n</tr>\n<tr>\n<td>top</td>\n<td>Number/String</td>\n<td></td>\n<td>否</td>\n<td>顶边位置，即 CSS top</td>\n</tr>\n<tr>\n<td>matrix</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>变换矩阵，即 CSS transform matrix</td>\n</tr>\n<tr>\n<td>matrix3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维变换矩阵，即 CSS transform matrix3d</td>\n</tr>\n<tr>\n<td>rotate</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>旋转，即 CSS transform rotate</td>\n</tr>\n<tr>\n<td>rotate3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维旋转，即 CSS transform rotate3d</td>\n</tr>\n<tr>\n<td>rotateX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向旋转，即 CSS transform rotateX</td>\n</tr>\n<tr>\n<td>rotateY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向旋转，即 CSS transform rotateY</td>\n</tr>\n<tr>\n<td>rotateZ</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Z 方向旋转，即 CSS transform rotateZ</td>\n</tr>\n<tr>\n<td>scale</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>缩放，即 CSS transform scale</td>\n</tr>\n<tr>\n<td>scale3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维缩放，即 CSS transform scale3d</td>\n</tr>\n<tr>\n<td>scaleX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向缩放，即 CSS transform scaleX</td>\n</tr>\n<tr>\n<td>scaleY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向缩放，即 CSS transform scaleY</td>\n</tr>\n<tr>\n<td>scaleZ</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Z 方向缩放，即 CSS transform scaleZ</td>\n</tr>\n<tr>\n<td>skew</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>倾斜，即 CSS transform skew</td>\n</tr>\n<tr>\n<td>skewX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向倾斜，即 CSS transform skewX</td>\n</tr>\n<tr>\n<td>skewY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向倾斜，即 CSS transform skewY</td>\n</tr>\n<tr>\n<td>translate</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>位移，即 CSS transform translate</td>\n</tr>\n<tr>\n<td>translate3d</td>\n<td>Array</td>\n<td></td>\n<td>否</td>\n<td>三维位移，即 CSS transform translate3d</td>\n</tr>\n<tr>\n<td>translateX</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>X 方向位移，即 CSS transform translateX</td>\n</tr>\n<tr>\n<td>translateY</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Y 方向位移，即 CSS transform translateY</td>\n</tr>\n<tr>\n<td>translateZ</td>\n<td>Number</td>\n<td></td>\n<td>否</td>\n<td>Z 方向位移，即 CSS transform translateZ</td>\n</tr>\n</tbody>\n</table>\n<details class=\"hint-container details\"><summary>代码示例</summary>\n<p><a href=\"https://developers.weixin.qq.com/s/P73kJ7mi7UcA\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \"#container\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1.0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">backgroundColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#FF0000\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 45</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">backgroundColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#00FF00\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 90</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">backgroundColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#FF0000\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  5000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">    this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clearAnimation</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">      \"#container\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">      { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">      function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">        console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"清除了#container上的opacity和rotate属性\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">      },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    );</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bind</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \".block\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">scale</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">], </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ease</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"ease-out\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">scale</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">1.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">], </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 45</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ease</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"ease-in\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.9</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">scale</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">], </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">rotate</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 90</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  5000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">    this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clearAnimation</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\".block\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">function</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">      console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"清除了.block上的所有动画属性\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bind</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">),</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></details>\n<h3 id=\"clearanimation\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#clearanimation\"><span>clearAnimation</span></a></h3>\n<p>调用 animate API 后会在节点上新增一些样式属性覆盖掉原有的对应样式。如果需要清除这些样式，可在该节点上的动画全部执行完毕后使用 <code v-pre>this.clearAnimation</code> 清除这些属性。</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clearAnimation</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">selector</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">options</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">callback</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n</div><p>参数说明</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>selector</td>\n<td>String</td>\n<td></td>\n<td>是</td>\n<td>选择器(同 SelectorQuery.select 的选择器格式)</td>\n</tr>\n<tr>\n<td>options</td>\n<td>Object</td>\n<td></td>\n<td>否</td>\n<td>需要清除的属性，不填写则全部清除</td>\n</tr>\n<tr>\n<td>callback</td>\n<td>Function</td>\n<td></td>\n<td>否</td>\n<td>清除完成后的回调函数</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"滚动驱动的动画\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#滚动驱动的动画\"><span>滚动驱动的动画</span></a></h2>\n<blockquote>\n<p>基础库 2.9.0 开始支持</p>\n</blockquote>\n<p>根据滚动位置而不断改变动画的进度是一种比较常见的场景，这类动画可以让人感觉到界面交互很连贯自然，体验更好，目前支持一种由滚动驱动的动画机制。</p>\n<p>基于上述的关键帧动画接口，新增一个 <code v-pre>ScrollTimeline</code> 的参数，用来绑定滚动元素(目前只支持 scroll-view)。接口定义如下:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">selector</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">keyframes</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">duration</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">ScrollTimeline</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n</div><h3 id=\"scrolltimeline-中对象的结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#scrolltimeline-中对象的结构\"><span>ScrollTimeline 中对象的结构</span></a></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>scrollSource</td>\n<td>String</td>\n<td></td>\n<td>是</td>\n<td>指定滚动元素的选择器(只支持 scroll-view)，该元素滚动时会驱动动画的进度</td>\n</tr>\n<tr>\n<td>orientation</td>\n<td>String</td>\n<td>vertical</td>\n<td>否</td>\n<td>指定滚动的方向。有效值为 horizontal 或 vertical</td>\n</tr>\n<tr>\n<td>startScrollOffset</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>指定开始驱动动画进度的滚动偏移量，单位 px</td>\n</tr>\n<tr>\n<td>endScrollOffset</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>指定停止驱动动画进度的滚动偏移量，单位 px</td>\n</tr>\n<tr>\n<td>timeRange</td>\n<td>Number</td>\n<td></td>\n<td>是</td>\n<td>起始和结束的滚动范围映射的时间长度，该时间可用于与关键帧动画里的时间 (duration) 相匹配，单位 ms</td>\n</tr>\n</tbody>\n</table>\n<details class=\"hint-container details\"><summary>代码示例</summary>\n<p><a href=\"https://developers.weixin.qq.com/s/994o8jmY7FcQ\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \".avatar\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderRadius</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"0\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"red\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      transform</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"scale(1) translateY(-20px)\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderRadius</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"25%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"blue\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      transform</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"scale(.65) translateY(-20px)\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0.5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderRadius</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"50%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      borderColor</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"blue\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      transform</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> `scale(.3) translateY(-20px)`</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      offset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  2000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    scrollSource</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#scroller\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    timeRange</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    startScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    endScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 85</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">animate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  \".search_input\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  [</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"0\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      width</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"0%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      opacity</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"1\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      width</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"100%\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  ],</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">  1000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    scrollSource</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"#scroller\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    timeRange</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1000</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    startScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 120</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    endScrollOffset</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 252</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></details>\n<h2 id=\"高级的动画方式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#高级的动画方式\"><span>高级的动画方式 <Badge text=\"初学者无需掌握\" type=\"warning\" /></span></a></h2>\n<p>在一些复杂场景下，上述的动画方法可能并不适用。所以这个时候就需要一些高级的动画方式。</p>\n<ol>\n<li>\n<p><RouteLink to=\"/code/mini-app/guide/view/wxs-event.html\">WXS 响应事件</RouteLink> 的方式可以通过使用 WXS 来响应事件的方法来动态调整节点的 style 属性。通过不断改变 style 属性的值可以做到动画效果。同时，这种方式也可以根据用户的触摸事件来动态地生成动画。</p>\n</li>\n<li>\n<p>连续使用 <code v-pre>setData</code> 来改变界面的方法也可以达到动画的效果。这样可以任意地改变界面，但通常会产生较大的延迟或卡顿，甚至导致小程序僵死。此时可以通过将页面的 <code v-pre>setData</code> 改为 自定义组件 中的 <code v-pre>setData</code> 来提升性能。下面的例子是使用 <code v-pre>setData</code> 来实现秒表动画的示例。</p>\n<blockquote>\n<p><a href=\"https://developers.weixin.qq.com/s/cRTvdPmO7d5T\" target=\"_blank\" rel=\"noopener noreferrer\">在开发者工具中预览效果</a></p>\n</blockquote>\n</li>\n</ol>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n::: tip\n\n此部分在初步学习小程序的时候直接略过即可。\n\n:::\n\n## 界面动画的常见方式\n\n在小程序中，通常可以使用 [CSS 渐变](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Transitions/Using_CSS_transitions) 和 [CSS 动画](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Animations/Using_CSS_animations) 来创建简易的界面动画。(这也是 Mr.Hope 主要使用的动画方式)\n\n> [在开发者工具中预览效果](https://developers.weixin.qq.com/s/oHKxDPm47h5k)\n\n同时，还可以使用 [`wx.createAnimation`](https://developers.weixin.qq.com/miniprogram/dev/api/ui/animation/wx.createAnimation.html) 接口来动态创建简易的动画效果。\n\n动画过程中，可以使用 `bindtransitionend` `bindanimationstart` `bindanimationiteration` `bindanimationend` 来监听动画事件。\n\n| 事件名             | 含义                                           |\n| ------------------ | ---------------------------------------------- |\n| transitionend      | CSS 渐变结束或 wx.createAnimation 结束一个阶段 |\n| animationstart     | CSS 动画开始                                   |\n| animationiteration | CSS 动画结束一个阶段                           |\n| animationend       | CSS 动画结束                                   |\n\n::: warning\n\n这几个事件都不是冒泡事件，需要绑定在真正发生了动画的节点上才会生效。\n\nMr.Hope 强烈建议优先使用 **CSS 动画**。只有 **CSS 动画** 无法满足要求时，才应该考虑 `wx.createAnimation`。\n\n:::\n\n## 关键帧动画\n\n> 基础库 2.9.0 开始支持\n\n关键帧动画用于代替旧的 [`wx.createAnimation`](https://developers.weixin.qq.com/miniprogram/dev/api/ui/animation/wx.createAnimation.html) 。它具有更好的性能和更可控的接口。\n\n### animate\n\n在页面或自定义组件中，当需要进行关键帧动画时，可以使用 `this.animate` 接口:\n\n```js\nthis.animate(selector, keyframes, duration, callback);\n```\n\n参数说明\n\n| 属性      | 类型     | 默认值 | 必填 | 说明                                         |\n| --------- | -------- | ------ | ---- | -------------------------------------------- |\n| selector  | String   |        | 是   | 选择器(同 SelectorQuery.select 的选择器格式) |\n| keyframes | Array    |        | 是   | 关键帧信息                                   |\n| duration  | Number   |        | 是   | 动画持续时长(毫秒为单位)                     |\n| callback  | function |        | 否   | 动画完成后的回调函数                         |\n\nkeyframes 中对象的结构\n\n| 属性            | 类型          | 默认值 | 必填                              | 说明                                    |\n| --------------- | ------------- | ------ | --------------------------------- | --------------------------------------- |\n| offset          | Number        |        | 否                                | 关键帧的偏移，范围[0-1]                 |\n| ease            | String        | linear | 否                                | 动画缓动函数                            |\n| transformOrigin | String        | 否     | 基点位置，即 CSS transform-origin |                                         |\n| backgroundColor | String        |        | 否                                | 背景颜色，即 CSS background-color       |\n| bottom          | Number/String |        | 否                                | 底边位置，即 CSS bottom                 |\n| height          | Number/String |        | 否                                | 高度，即 CSS height                     |\n| left            | Number/String |        | 否                                | 左边位置，即 CSS left                   |\n| width           | Number/String |        | 否                                | 宽度，即 CSS width                      |\n| opacity         | Number        |        | 否                                | 不透明度，即 CSS opacity                |\n| right           | Number        |        | 否                                | 右边位置，即 CSS right                  |\n| top             | Number/String |        | 否                                | 顶边位置，即 CSS top                    |\n| matrix          | Array         |        | 否                                | 变换矩阵，即 CSS transform matrix       |\n| matrix3d        | Array         |        | 否                                | 三维变换矩阵，即 CSS transform matrix3d |\n| rotate          | Number        |        | 否                                | 旋转，即 CSS transform rotate           |\n| rotate3d        | Array         |        | 否                                | 三维旋转，即 CSS transform rotate3d     |\n| rotateX         | Number        |        | 否                                | X 方向旋转，即 CSS transform rotateX    |\n| rotateY         | Number        |        | 否                                | Y 方向旋转，即 CSS transform rotateY    |\n| rotateZ         | Number        |        | 否                                | Z 方向旋转，即 CSS transform rotateZ    |\n| scale           | Array         |        | 否                                | 缩放，即 CSS transform scale            |\n| scale3d         | Array         |        | 否                                | 三维缩放，即 CSS transform scale3d      |\n| scaleX          | Number        |        | 否                                | X 方向缩放，即 CSS transform scaleX     |\n| scaleY          | Number        |        | 否                                | Y 方向缩放，即 CSS transform scaleY     |\n| scaleZ          | Number        |        | 否                                | Z 方向缩放，即 CSS transform scaleZ     |\n| skew            | Array         |        | 否                                | 倾斜，即 CSS transform skew             |\n| skewX           | Number        |        | 否                                | X 方向倾斜，即 CSS transform skewX      |\n| skewY           | Number        |        | 否                                | Y 方向倾斜，即 CSS transform skewY      |\n| translate       | Array         |        | 否                                | 位移，即 CSS transform translate        |\n| translate3d     | Array         |        | 否                                | 三维位移，即 CSS transform translate3d  |\n| translateX      | Number        |        | 否                                | X 方向位移，即 CSS transform translateX |\n| translateY      | Number        |        | 否                                | Y 方向位移，即 CSS transform translateY |\n| translateZ      | Number        |        | 否                                | Z 方向位移，即 CSS transform translateZ |\n\n::: details 代码示例\n\n[在开发者工具中预览效果](https://developers.weixin.qq.com/s/P73kJ7mi7UcA)\n\n```js\nthis.animate(\n  \"#container\",\n  [\n    { opacity: 1.0, rotate: 0, backgroundColor: \"#FF0000\" },\n    { opacity: 0.5, rotate: 45, backgroundColor: \"#00FF00\" },\n    { opacity: 0.0, rotate: 90, backgroundColor: \"#FF0000\" },\n  ],\n  5000,\n  function () {\n    this.clearAnimation(\n      \"#container\",\n      { opacity: true, rotate: true },\n      function () {\n        console.log(\"清除了#container上的opacity和rotate属性\");\n      },\n    );\n  }.bind(this),\n);\n\nthis.animate(\n  \".block\",\n  [\n    { scale: [1, 1], rotate: 0, ease: \"ease-out\" },\n    { scale: [1.5, 1.5], rotate: 45, ease: \"ease-in\", offset: 0.9 },\n    { scale: [2, 2], rotate: 90 },\n  ],\n  5000,\n  function () {\n    this.clearAnimation(\".block\", function () {\n      console.log(\"清除了.block上的所有动画属性\");\n    });\n  }.bind(this),\n);\n```\n\n:::\n\n### clearAnimation\n\n调用 animate API 后会在节点上新增一些样式属性覆盖掉原有的对应样式。如果需要清除这些样式，可在该节点上的动画全部执行完毕后使用 `this.clearAnimation` 清除这些属性。\n\n```js\nthis.clearAnimation(selector, options, callback);\n```\n\n参数说明\n\n| 属性     | 类型     | 默认值 | 必填 | 说明                                         |\n| -------- | -------- | ------ | ---- | -------------------------------------------- |\n| selector | String   |        | 是   | 选择器(同 SelectorQuery.select 的选择器格式) |\n| options  | Object   |        | 否   | 需要清除的属性，不填写则全部清除             |\n| callback | Function |        | 否   | 清除完成后的回调函数                         |\n\n## 滚动驱动的动画\n\n> 基础库 2.9.0 开始支持\n\n根据滚动位置而不断改变动画的进度是一种比较常见的场景，这类动画可以让人感觉到界面交互很连贯自然，体验更好，目前支持一种由滚动驱动的动画机制。\n\n基于上述的关键帧动画接口，新增一个 `ScrollTimeline` 的参数，用来绑定滚动元素(目前只支持 scroll-view)。接口定义如下:\n\n```js\nthis.animate(selector, keyframes, duration, ScrollTimeline);\n```\n\n### ScrollTimeline 中对象的结构\n\n| 属性              | 类型   | 默认值   | 必填 | 说明                                                                                            |\n| ----------------- | ------ | -------- | ---- | ----------------------------------------------------------------------------------------------- |\n| scrollSource      | String |          | 是   | 指定滚动元素的选择器(只支持 scroll-view)，该元素滚动时会驱动动画的进度                          |\n| orientation       | String | vertical | 否   | 指定滚动的方向。有效值为 horizontal 或 vertical                                                 |\n| startScrollOffset | Number |          | 是   | 指定开始驱动动画进度的滚动偏移量，单位 px                                                       |\n| endScrollOffset   | Number |          | 是   | 指定停止驱动动画进度的滚动偏移量，单位 px                                                       |\n| timeRange         | Number |          | 是   | 起始和结束的滚动范围映射的时间长度，该时间可用于与关键帧动画里的时间 (duration) 相匹配，单位 ms |\n\n::: details 代码示例\n\n[在开发者工具中预览效果](https://developers.weixin.qq.com/s/994o8jmY7FcQ)\n\n```js\nthis.animate(\n  \".avatar\",\n  [\n    {\n      borderRadius: \"0\",\n      borderColor: \"red\",\n      transform: \"scale(1) translateY(-20px)\",\n      offset: 0,\n    },\n    {\n      borderRadius: \"25%\",\n      borderColor: \"blue\",\n      transform: \"scale(.65) translateY(-20px)\",\n      offset: 0.5,\n    },\n    {\n      borderRadius: \"50%\",\n      borderColor: \"blue\",\n      transform: `scale(.3) translateY(-20px)`,\n      offset: 1,\n    },\n  ],\n  2000,\n  {\n    scrollSource: \"#scroller\",\n    timeRange: 2000,\n    startScrollOffset: 0,\n    endScrollOffset: 85,\n  },\n);\n\nthis.animate(\n  \".search_input\",\n  [\n    {\n      opacity: \"0\",\n      width: \"0%\",\n    },\n    {\n      opacity: \"1\",\n      width: \"100%\",\n    },\n  ],\n  1000,\n  {\n    scrollSource: \"#scroller\",\n    timeRange: 1000,\n    startScrollOffset: 120,\n    endScrollOffset: 252,\n  },\n);\n```\n\n:::\n\n## 高级的动画方式 <Badge text=\"初学者无需掌握\" type=\"warning\" />\n\n在一些复杂场景下，上述的动画方法可能并不适用。所以这个时候就需要一些高级的动画方式。\n\n1. [WXS 响应事件](wxs-event.md) 的方式可以通过使用 WXS 来响应事件的方法来动态调整节点的 style 属性。通过不断改变 style 属性的值可以做到动画效果。同时，这种方式也可以根据用户的触摸事件来动态地生成动画。\n\n1. 连续使用 `setData` 来改变界面的方法也可以达到动画的效果。这样可以任意地改变界面，但通常会产生较大的延迟或卡顿，甚至导致小程序僵死。此时可以通过将页面的 `setData` 改为 自定义组件 中的 `setData` 来提升性能。下面的例子是使用 `setData` 来实现秒表动画的示例。\n\n   > [在开发者工具中预览效果](https://developers.weixin.qq.com/s/cRTvdPmO7d5T)\n","excerpt":"","title":"","headers":[{"level":2,"title":"界面动画的常见方式","slug":"界面动画的常见方式","link":"#界面动画的常见方式","children":[]},{"level":2,"title":"关键帧动画","slug":"关键帧动画","link":"#关键帧动画","children":[{"level":3,"title":"animate","slug":"animate","link":"#animate","children":[]},{"level":3,"title":"clearAnimation","slug":"clearanimation","link":"#clearanimation","children":[]}]},{"level":2,"title":"滚动驱动的动画","slug":"滚动驱动的动画","link":"#滚动驱动的动画","children":[{"level":3,"title":"ScrollTimeline 中对象的结构","slug":"scrolltimeline-中对象的结构","link":"#scrolltimeline-中对象的结构","children":[]}]},{"level":2,"title":"高级的动画方式","slug":"高级的动画方式","link":"#高级的动画方式","children":[]}],"links":[{"raw":"wxs-event.md","relative":"code/mini-app/guide/view/wxs-event.md","absolute":"/code/mini-app/guide/view/wxs-event.md"}]}}
