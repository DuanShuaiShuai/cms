{"content":"<h2 id=\"算术表达式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#算术表达式\"><span>算术表达式</span></a></h2>\n<p><code v-pre>((...))</code> 语法可以进行整数的算术运算。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((foo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $foo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">10</span></span></code></pre>\n</div><p><code v-pre>((...))</code> 会自动忽略内部的空格，所以下面的写法都正确，得到同样的结果。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">((</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">+</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">+</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span></code></pre>\n</div><p>这个语法不返回值，命令执行的结果根据算术运算的结果而定。只要算术结果不是 <code v-pre>0</code>，命令就算执行成功。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>3 + 2</code> 的结果是 5，命令就算执行成功，环境变量 <code v-pre>$?</code> 为 <code v-pre>0</code>。</p>\n<p>如果算术结果为 <code v-pre>0</code>，命令就算执行失败。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> -</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>3 - 3</code> 的结果是 <code v-pre>0</code>，环境变量 <code v-pre>$?</code> 为 <code v-pre>1</code>，表示命令执行失败。</p>\n<p>如果要读取算术运算的结果，需要在 <code v-pre>((...))</code> 前面加上美元符号 <code v-pre>$((...))</code>，使其变成算术表达式，返回算术运算的值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span></span></code></pre>\n</div><p><code v-pre>((...))</code> 语法支持的算术运算符如下。</p>\n<ul>\n<li><code v-pre>+</code>: 加法</li>\n<li><code v-pre>-</code>: 减法</li>\n<li><code v-pre>*</code>: 乘法</li>\n<li><code v-pre>/</code>: 除法(整除)</li>\n<li><code v-pre>%</code>: 余数</li>\n<li><code v-pre>**</code>: 指数</li>\n<li><code v-pre>++</code>: 自增运算(前缀或后缀)</li>\n<li><code v-pre>--</code>: 自减运算(前缀或后缀)</li>\n</ul>\n<p>注意，除法运算符的返回结果总是整数，比如 <code v-pre>5</code> 除以 <code v-pre>2</code>，得到的结果是 <code v-pre>2</code>，而不是 <code v-pre>2.5</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span></code></pre>\n</div><p><code v-pre>++</code> 和 <code v-pre>--</code> 这两个运算符有前缀和后缀的区别。作为前缀是先运算后返回值，作为后缀是先返回值后运算。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> i=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">i++</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">++i</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，<code v-pre>++</code> 作为后缀是先返回值，执行 <code v-pre>echo</code> 命令，再进行自增运算；作为前缀则是先进行自增运算，再返回值执行 <code v-pre>echo</code> 命令。</p>\n<p><code v-pre>$((...))</code> 内部可以用圆括号改变运算顺序。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">*</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 4</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">20</span></span></code></pre>\n</div><p>上面例子中，内部的圆括号让加法先于乘法执行。</p>\n<p><code v-pre>$((...))</code> 结构可以嵌套。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5**2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">*</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">75</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 等同于</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(($((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5**2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)) * 3))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">75</span></span></code></pre>\n</div><p>这个语法只能计算整数，否则会报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 报错</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1.5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bash:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 语法错误</span></span></code></pre>\n</div><p><code v-pre>$((...))</code> 的圆括号之中，不需要在变量名之前加上 <code v-pre>$</code>，不过加上也不报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> number=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$number</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> + 1))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span></span></code></pre>\n</div><p>上面例子中，变量 <code v-pre>number</code> 前面有没有美元符号，结果都是一样的。</p>\n<p>如果在 <code v-pre>$((...))</code> 里面使用字符串，Bash 会认为那是一个变量名。如果不存在同名变量，Bash 就会将其作为空值，因此不会报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">\"hello\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">\"hello\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>&quot;hello&quot;</code> 会被当作变量名，返回空值，而 <code v-pre>$((...))</code> 会将空值当作 <code v-pre>0</code>，所以乘法的运算结果就是 <code v-pre>0</code>。同理，如果 <code v-pre>$((...))</code> 里面使用不存在的变量，也会当作 <code v-pre>0</code> 处理。</p>\n<p>如果一个变量的值为字符串，跟上面的处理逻辑是一样的。即该字符串如果不对应已存在的变量，在 <code v-pre>$((...))</code> 里面会被当作空值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=hello</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span></code></pre>\n</div><p>上面例子中，变量 <code v-pre>foo</code> 的值是 <code v-pre>hello</code>，而 <code v-pre>hello</code> 也会被看作变量名。这使得有可能写出动态替换的代码。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=hello</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> hello=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span></span></code></pre>\n</div><p>上面代码中，<code v-pre>foo + 2</code> 取决于变量 <code v-pre>hello</code> 的值。</p>\n<p>最后，<code v-pre>$[...]</code> 是以前的语法，也可以做整数运算，不建议使用。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">[2+2]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span></span></code></pre>\n</div><h2 id=\"数值的进制\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数值的进制\"><span>数值的进制</span></a></h2>\n<p>Bash 的数值默认都是十进制，但是在算术表达式中，也可以使用其他进制。</p>\n<ul>\n<li><code v-pre>number</code>: 没有任何特殊表示法的数字是十进制数(以 10 为底)。</li>\n<li><code v-pre>0number</code>: 八进制数。</li>\n<li><code v-pre>0xnumber</code>: 十六进制数。</li>\n<li><code v-pre>base#number</code>: <code v-pre>base</code> 进制的数。</li>\n</ul>\n<p>下面是一些例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0xff</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">255</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2#11111111</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">255</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>0xff</code> 是十六进制数，<code v-pre>2#11111111</code> 是二进制数。</p>\n<h2 id=\"位运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#位运算\"><span>位运算</span></a></h2>\n<p><code v-pre>$((...))</code> 支持以下的二进制位运算符。</p>\n<ul>\n<li><code v-pre>&lt;&lt;</code>: 位左移运算，把一个数字的所有位向左移动指定的位。</li>\n<li><code v-pre>&gt;&gt;</code>: 位右移运算，把一个数字的所有位向右移动指定的位。</li>\n<li><code v-pre>&amp;</code>: 位的“与”运算，对两个数字的所有位执行一个 <code v-pre>AND</code> 操作。</li>\n<li><code v-pre>|</code>: 位的“或”运算，对两个数字的所有位执行一个 <code v-pre>OR</code> 操作。</li>\n<li><code v-pre>~</code>: 位的“否”运算，对一个数字的所有位取反。</li>\n<li><code v-pre>^</code>: 位的异或运算(exclusive or)，对两个数字的所有位执行一个异或操作。</li>\n</ul>\n<p>下面是右移运算符 <code v-pre>&gt;&gt;</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((16>>2))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span></span></code></pre>\n</div><p>下面是左移运算符 <code v-pre>&lt;&lt;</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">16</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">2))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">64</span></span></code></pre>\n</div><p>下面是 <code v-pre>17</code> (二进制 <code v-pre>10001</code>)和 <code v-pre>3</code> (二进制 <code v-pre>11</code>)的各种二进制运算的结果。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">17</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x26;</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">17</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">|</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">19</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">17^3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">18</span></span></code></pre>\n</div><h2 id=\"逻辑运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#逻辑运算\"><span>逻辑运算</span></a></h2>\n<p><code v-pre>$((...))</code> 支持以下的逻辑运算符。</p>\n<ul>\n<li><code v-pre>&lt;</code>: 小于</li>\n<li><code v-pre>&gt;</code>: 大于</li>\n<li><code v-pre>&lt;=</code>: 小于或相等</li>\n<li><code v-pre>&gt;=</code>: 大于或相等</li>\n<li><code v-pre>==</code>: 相等</li>\n<li><code v-pre>!=</code>: 不相等</li>\n<li><code v-pre>&amp;&amp;</code>: 逻辑与</li>\n<li><code v-pre>||</code>: 逻辑或</li>\n<li><code v-pre>!</code>: 逻辑否</li>\n<li><code v-pre>expr1?expr2:expr3</code>: 三元条件运算符。若表达式 <code v-pre>expr1</code> 的计算结果为非零值(算术真)，则执行表达式 <code v-pre>expr2</code>，否则执行表达式 <code v-pre>expr3</code>。</li>\n</ul>\n<p>如果逻辑表达式为真，返回 <code v-pre>1</code>，否则返回 <code v-pre>0</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) || (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span></code></pre>\n</div><p>三元运算符执行一个单独的逻辑测试。它用起来类似于 <code v-pre>if/then/else</code> 语句。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x3C;1 </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">?</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> :</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">></span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ?</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> :</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面例子中，第一个表达式为真时，返回第二个表达式的值，否则返回第三个表达式的值。</p>\n<h2 id=\"赋值运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#赋值运算\"><span>赋值运算</span></a></h2>\n<p>算术表达式 <code v-pre>$((...))</code> 可以执行赋值运算。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>a=1</code> 对变量 <code v-pre>a</code> 进行赋值。这个式子本身也是一个表达式，返回值就是等号右边的值。</p>\n<p><code v-pre>$((...))</code> 支持的赋值运算符，有以下这些。</p>\n<ul>\n<li><code v-pre>parameter = value</code>: 简单赋值。</li>\n<li><code v-pre>parameter += value</code>: 等价于 <code v-pre>parameter = parameter + value</code>。</li>\n<li><code v-pre>parameter -= value</code>: 等价于 <code v-pre>parameter = parameter – value</code>。</li>\n<li><code v-pre>parameter *= value</code>: 等价于 <code v-pre>parameter = parameter * value</code>。</li>\n<li><code v-pre>parameter /= value</code>: 等价于 <code v-pre>parameter = parameter / value</code>。</li>\n<li><code v-pre>parameter %= value</code>: 等价于 <code v-pre>parameter = parameter % value</code>。</li>\n<li><code v-pre>parameter &lt;&lt;= value</code>: 等价于 <code v-pre>parameter = parameter &lt;&lt; value</code>。</li>\n<li><code v-pre>parameter &gt;&gt;= value</code>: 等价于 <code v-pre>parameter = parameter &gt;&gt; value</code>。</li>\n<li><code v-pre>parameter &amp;= value</code>: 等价于 <code v-pre>parameter = parameter &amp; value</code>。</li>\n<li><code v-pre>parameter |= value</code>: 等价于 <code v-pre>parameter = parameter | value</code>。</li>\n<li><code v-pre>parameter ^= value</code>: 等价于 <code v-pre>parameter = parameter ^ value</code>。</li>\n</ul>\n<p>下面是一个例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">5</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo*</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">=2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">10</span></span></code></pre>\n</div><p>如果在表达式内部赋值，可以放在圆括号中，否则会报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x3C;1 </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">?</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (a+=1) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">a-</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) ))</span></span></code></pre>\n</div><h2 id=\"求值运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#求值运算\"><span>求值运算</span></a></h2>\n<p>逗号 <code v-pre>,</code> 在 <code v-pre>$((...))</code> 内部是求值运算符，执行前后两个表达式，并返回后一个表达式的值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 2,</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 4</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">12</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $foo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span></span></code></pre>\n</div><p>上面例子中，逗号前后两个表达式都会执行，然后返回后一个表达式的值 <code v-pre>12</code>。</p>\n<h2 id=\"expr-命令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#expr-命令\"><span>expr 命令</span></a></h2>\n<p><code v-pre>expr</code> 命令支持算术运算，可以不使用 <code v-pre>((...))</code> 语法。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expr</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span></span></code></pre>\n</div><p><code v-pre>expr</code> 命令支持变量替换。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expr</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span></span></code></pre>\n</div><p><code v-pre>expr</code> 命令也不支持非整数参数。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expr</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3.5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">expr:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 非整数参数</span></span></code></pre>\n</div><p>上面例子中，如果有非整数的运算，<code v-pre>expr</code> 命令就报错了。</p>\n","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/linux/bash/arithmetic.md","filePathRelative":"linux/bash/arithmetic.md","frontmatter":{"date":"2020-05-04T00:00:00.000Z","title":"Bash 的算术运算","icon":"calculate","author":"阮一峰","category":"Linux","tag":["Bash"],"copyright":"本教程采用<a href=\"https://creativecommons.org/licenses/by-sa/3.0/deed.zh\" rel=\"noopener noreferrer\" target=\"_blank\">知识共享 署名-相同方式共享 3.0协议</a>"},"sfcBlocks":{"template":{"type":"template","content":"<template><h2 id=\"算术表达式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#算术表达式\"><span>算术表达式</span></a></h2>\n<p><code v-pre>((...))</code> 语法可以进行整数的算术运算。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((foo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $foo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">10</span></span></code></pre>\n</div><p><code v-pre>((...))</code> 会自动忽略内部的空格，所以下面的写法都正确，得到同样的结果。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">((</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">+</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">+</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span></code></pre>\n</div><p>这个语法不返回值，命令执行的结果根据算术运算的结果而定。只要算术结果不是 <code v-pre>0</code>，命令就算执行成功。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>3 + 2</code> 的结果是 5，命令就算执行成功，环境变量 <code v-pre>$?</code> 为 <code v-pre>0</code>。</p>\n<p>如果算术结果为 <code v-pre>0</code>，命令就算执行失败。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> -</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>3 - 3</code> 的结果是 <code v-pre>0</code>，环境变量 <code v-pre>$?</code> 为 <code v-pre>1</code>，表示命令执行失败。</p>\n<p>如果要读取算术运算的结果，需要在 <code v-pre>((...))</code> 前面加上美元符号 <code v-pre>$((...))</code>，使其变成算术表达式，返回算术运算的值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span></span></code></pre>\n</div><p><code v-pre>((...))</code> 语法支持的算术运算符如下。</p>\n<ul>\n<li><code v-pre>+</code>: 加法</li>\n<li><code v-pre>-</code>: 减法</li>\n<li><code v-pre>*</code>: 乘法</li>\n<li><code v-pre>/</code>: 除法(整除)</li>\n<li><code v-pre>%</code>: 余数</li>\n<li><code v-pre>**</code>: 指数</li>\n<li><code v-pre>++</code>: 自增运算(前缀或后缀)</li>\n<li><code v-pre>--</code>: 自减运算(前缀或后缀)</li>\n</ul>\n<p>注意，除法运算符的返回结果总是整数，比如 <code v-pre>5</code> 除以 <code v-pre>2</code>，得到的结果是 <code v-pre>2</code>，而不是 <code v-pre>2.5</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span></code></pre>\n</div><p><code v-pre>++</code> 和 <code v-pre>--</code> 这两个运算符有前缀和后缀的区别。作为前缀是先运算后返回值，作为后缀是先返回值后运算。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> i=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">i++</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">++i</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，<code v-pre>++</code> 作为后缀是先返回值，执行 <code v-pre>echo</code> 命令，再进行自增运算；作为前缀则是先进行自增运算，再返回值执行 <code v-pre>echo</code> 命令。</p>\n<p><code v-pre>$((...))</code> 内部可以用圆括号改变运算顺序。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">*</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 4</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">20</span></span></code></pre>\n</div><p>上面例子中，内部的圆括号让加法先于乘法执行。</p>\n<p><code v-pre>$((...))</code> 结构可以嵌套。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5**2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">*</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">75</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 等同于</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(($((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5**2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)) * 3))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">75</span></span></code></pre>\n</div><p>这个语法只能计算整数，否则会报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 报错</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1.5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bash:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 语法错误</span></span></code></pre>\n</div><p><code v-pre>$((...))</code> 的圆括号之中，不需要在变量名之前加上 <code v-pre>$</code>，不过加上也不报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> number=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$number</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> + 1))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span></span></code></pre>\n</div><p>上面例子中，变量 <code v-pre>number</code> 前面有没有美元符号，结果都是一样的。</p>\n<p>如果在 <code v-pre>$((...))</code> 里面使用字符串，Bash 会认为那是一个变量名。如果不存在同名变量，Bash 就会将其作为空值，因此不会报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">\"hello\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">\"hello\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>&quot;hello&quot;</code> 会被当作变量名，返回空值，而 <code v-pre>$((...))</code> 会将空值当作 <code v-pre>0</code>，所以乘法的运算结果就是 <code v-pre>0</code>。同理，如果 <code v-pre>$((...))</code> 里面使用不存在的变量，也会当作 <code v-pre>0</code> 处理。</p>\n<p>如果一个变量的值为字符串，跟上面的处理逻辑是一样的。即该字符串如果不对应已存在的变量，在 <code v-pre>$((...))</code> 里面会被当作空值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=hello</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span></code></pre>\n</div><p>上面例子中，变量 <code v-pre>foo</code> 的值是 <code v-pre>hello</code>，而 <code v-pre>hello</code> 也会被看作变量名。这使得有可能写出动态替换的代码。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=hello</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> hello=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span></span></code></pre>\n</div><p>上面代码中，<code v-pre>foo + 2</code> 取决于变量 <code v-pre>hello</code> 的值。</p>\n<p>最后，<code v-pre>$[...]</code> 是以前的语法，也可以做整数运算，不建议使用。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">[2+2]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span></span></code></pre>\n</div><h2 id=\"数值的进制\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数值的进制\"><span>数值的进制</span></a></h2>\n<p>Bash 的数值默认都是十进制，但是在算术表达式中，也可以使用其他进制。</p>\n<ul>\n<li><code v-pre>number</code>: 没有任何特殊表示法的数字是十进制数(以 10 为底)。</li>\n<li><code v-pre>0number</code>: 八进制数。</li>\n<li><code v-pre>0xnumber</code>: 十六进制数。</li>\n<li><code v-pre>base#number</code>: <code v-pre>base</code> 进制的数。</li>\n</ul>\n<p>下面是一些例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0xff</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">255</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2#11111111</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">255</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>0xff</code> 是十六进制数，<code v-pre>2#11111111</code> 是二进制数。</p>\n<h2 id=\"位运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#位运算\"><span>位运算</span></a></h2>\n<p><code v-pre>$((...))</code> 支持以下的二进制位运算符。</p>\n<ul>\n<li><code v-pre>&lt;&lt;</code>: 位左移运算，把一个数字的所有位向左移动指定的位。</li>\n<li><code v-pre>&gt;&gt;</code>: 位右移运算，把一个数字的所有位向右移动指定的位。</li>\n<li><code v-pre>&amp;</code>: 位的“与”运算，对两个数字的所有位执行一个 <code v-pre>AND</code> 操作。</li>\n<li><code v-pre>|</code>: 位的“或”运算，对两个数字的所有位执行一个 <code v-pre>OR</code> 操作。</li>\n<li><code v-pre>~</code>: 位的“否”运算，对一个数字的所有位取反。</li>\n<li><code v-pre>^</code>: 位的异或运算(exclusive or)，对两个数字的所有位执行一个异或操作。</li>\n</ul>\n<p>下面是右移运算符 <code v-pre>&gt;&gt;</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((16>>2))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span></span></code></pre>\n</div><p>下面是左移运算符 <code v-pre>&lt;&lt;</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">16</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">2))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">64</span></span></code></pre>\n</div><p>下面是 <code v-pre>17</code> (二进制 <code v-pre>10001</code>)和 <code v-pre>3</code> (二进制 <code v-pre>11</code>)的各种二进制运算的结果。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">17</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x26;</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">17</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">|</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">19</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">17^3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">18</span></span></code></pre>\n</div><h2 id=\"逻辑运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#逻辑运算\"><span>逻辑运算</span></a></h2>\n<p><code v-pre>$((...))</code> 支持以下的逻辑运算符。</p>\n<ul>\n<li><code v-pre>&lt;</code>: 小于</li>\n<li><code v-pre>&gt;</code>: 大于</li>\n<li><code v-pre>&lt;=</code>: 小于或相等</li>\n<li><code v-pre>&gt;=</code>: 大于或相等</li>\n<li><code v-pre>==</code>: 相等</li>\n<li><code v-pre>!=</code>: 不相等</li>\n<li><code v-pre>&amp;&amp;</code>: 逻辑与</li>\n<li><code v-pre>||</code>: 逻辑或</li>\n<li><code v-pre>!</code>: 逻辑否</li>\n<li><code v-pre>expr1?expr2:expr3</code>: 三元条件运算符。若表达式 <code v-pre>expr1</code> 的计算结果为非零值(算术真)，则执行表达式 <code v-pre>expr2</code>，否则执行表达式 <code v-pre>expr3</code>。</li>\n</ul>\n<p>如果逻辑表达式为真，返回 <code v-pre>1</code>，否则返回 <code v-pre>0</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) || (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span></code></pre>\n</div><p>三元运算符执行一个单独的逻辑测试。它用起来类似于 <code v-pre>if/then/else</code> 语句。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x3C;1 </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">?</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> :</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">></span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ?</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> :</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面例子中，第一个表达式为真时，返回第二个表达式的值，否则返回第三个表达式的值。</p>\n<h2 id=\"赋值运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#赋值运算\"><span>赋值运算</span></a></h2>\n<p>算术表达式 <code v-pre>$((...))</code> 可以执行赋值运算。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>a=1</code> 对变量 <code v-pre>a</code> 进行赋值。这个式子本身也是一个表达式，返回值就是等号右边的值。</p>\n<p><code v-pre>$((...))</code> 支持的赋值运算符，有以下这些。</p>\n<ul>\n<li><code v-pre>parameter = value</code>: 简单赋值。</li>\n<li><code v-pre>parameter += value</code>: 等价于 <code v-pre>parameter = parameter + value</code>。</li>\n<li><code v-pre>parameter -= value</code>: 等价于 <code v-pre>parameter = parameter – value</code>。</li>\n<li><code v-pre>parameter *= value</code>: 等价于 <code v-pre>parameter = parameter * value</code>。</li>\n<li><code v-pre>parameter /= value</code>: 等价于 <code v-pre>parameter = parameter / value</code>。</li>\n<li><code v-pre>parameter %= value</code>: 等价于 <code v-pre>parameter = parameter % value</code>。</li>\n<li><code v-pre>parameter &lt;&lt;= value</code>: 等价于 <code v-pre>parameter = parameter &lt;&lt; value</code>。</li>\n<li><code v-pre>parameter &gt;&gt;= value</code>: 等价于 <code v-pre>parameter = parameter &gt;&gt; value</code>。</li>\n<li><code v-pre>parameter &amp;= value</code>: 等价于 <code v-pre>parameter = parameter &amp; value</code>。</li>\n<li><code v-pre>parameter |= value</code>: 等价于 <code v-pre>parameter = parameter | value</code>。</li>\n<li><code v-pre>parameter ^= value</code>: 等价于 <code v-pre>parameter = parameter ^ value</code>。</li>\n</ul>\n<p>下面是一个例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">5</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo*</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">=2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">10</span></span></code></pre>\n</div><p>如果在表达式内部赋值，可以放在圆括号中，否则会报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x3C;1 </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">?</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (a+=1) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">a-</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) ))</span></span></code></pre>\n</div><h2 id=\"求值运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#求值运算\"><span>求值运算</span></a></h2>\n<p>逗号 <code v-pre>,</code> 在 <code v-pre>$((...))</code> 内部是求值运算符，执行前后两个表达式，并返回后一个表达式的值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 2,</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 4</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">12</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $foo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span></span></code></pre>\n</div><p>上面例子中，逗号前后两个表达式都会执行，然后返回后一个表达式的值 <code v-pre>12</code>。</p>\n<h2 id=\"expr-命令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#expr-命令\"><span>expr 命令</span></a></h2>\n<p><code v-pre>expr</code> 命令支持算术运算，可以不使用 <code v-pre>((...))</code> 语法。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expr</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span></span></code></pre>\n</div><p><code v-pre>expr</code> 命令支持变量替换。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expr</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span></span></code></pre>\n</div><p><code v-pre>expr</code> 命令也不支持非整数参数。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expr</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3.5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">expr:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 非整数参数</span></span></code></pre>\n</div><p>上面例子中，如果有非整数的运算，<code v-pre>expr</code> 命令就报错了。</p>\n</template>","contentStripped":"<h2 id=\"算术表达式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#算术表达式\"><span>算术表达式</span></a></h2>\n<p><code v-pre>((...))</code> 语法可以进行整数的算术运算。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((foo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $foo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">10</span></span></code></pre>\n</div><p><code v-pre>((...))</code> 会自动忽略内部的空格，所以下面的写法都正确，得到同样的结果。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">((</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">+</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">+</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span></code></pre>\n</div><p>这个语法不返回值，命令执行的结果根据算术运算的结果而定。只要算术结果不是 <code v-pre>0</code>，命令就算执行成功。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>3 + 2</code> 的结果是 5，命令就算执行成功，环境变量 <code v-pre>$?</code> 为 <code v-pre>0</code>。</p>\n<p>如果算术结果为 <code v-pre>0</code>，命令就算执行失败。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> -</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>3 - 3</code> 的结果是 <code v-pre>0</code>，环境变量 <code v-pre>$?</code> 为 <code v-pre>1</code>，表示命令执行失败。</p>\n<p>如果要读取算术运算的结果，需要在 <code v-pre>((...))</code> 前面加上美元符号 <code v-pre>$((...))</code>，使其变成算术表达式，返回算术运算的值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span></span></code></pre>\n</div><p><code v-pre>((...))</code> 语法支持的算术运算符如下。</p>\n<ul>\n<li><code v-pre>+</code>: 加法</li>\n<li><code v-pre>-</code>: 减法</li>\n<li><code v-pre>*</code>: 乘法</li>\n<li><code v-pre>/</code>: 除法(整除)</li>\n<li><code v-pre>%</code>: 余数</li>\n<li><code v-pre>**</code>: 指数</li>\n<li><code v-pre>++</code>: 自增运算(前缀或后缀)</li>\n<li><code v-pre>--</code>: 自减运算(前缀或后缀)</li>\n</ul>\n<p>注意，除法运算符的返回结果总是整数，比如 <code v-pre>5</code> 除以 <code v-pre>2</code>，得到的结果是 <code v-pre>2</code>，而不是 <code v-pre>2.5</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span></code></pre>\n</div><p><code v-pre>++</code> 和 <code v-pre>--</code> 这两个运算符有前缀和后缀的区别。作为前缀是先运算后返回值，作为后缀是先返回值后运算。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> i=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">i++</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">++i</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $i</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，<code v-pre>++</code> 作为后缀是先返回值，执行 <code v-pre>echo</code> 命令，再进行自增运算；作为前缀则是先进行自增运算，再返回值执行 <code v-pre>echo</code> 命令。</p>\n<p><code v-pre>$((...))</code> 内部可以用圆括号改变运算顺序。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">*</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 4</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">20</span></span></code></pre>\n</div><p>上面例子中，内部的圆括号让加法先于乘法执行。</p>\n<p><code v-pre>$((...))</code> 结构可以嵌套。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5**2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">*</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">75</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 等同于</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(($((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5**2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)) * 3))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">75</span></span></code></pre>\n</div><p>这个语法只能计算整数，否则会报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 报错</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1.5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bash:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 语法错误</span></span></code></pre>\n</div><p><code v-pre>$((...))</code> 的圆括号之中，不需要在变量名之前加上 <code v-pre>$</code>，不过加上也不报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> number=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$number</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> + 1))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span></span></code></pre>\n</div><p>上面例子中，变量 <code v-pre>number</code> 前面有没有美元符号，结果都是一样的。</p>\n<p>如果在 <code v-pre>$((...))</code> 里面使用字符串，Bash 会认为那是一个变量名。如果不存在同名变量，Bash 就会将其作为空值，因此不会报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">\"hello\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">\"hello\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>&quot;hello&quot;</code> 会被当作变量名，返回空值，而 <code v-pre>$((...))</code> 会将空值当作 <code v-pre>0</code>，所以乘法的运算结果就是 <code v-pre>0</code>。同理，如果 <code v-pre>$((...))</code> 里面使用不存在的变量，也会当作 <code v-pre>0</code> 处理。</p>\n<p>如果一个变量的值为字符串，跟上面的处理逻辑是一样的。即该字符串如果不对应已存在的变量，在 <code v-pre>$((...))</code> 里面会被当作空值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=hello</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2</span></span></code></pre>\n</div><p>上面例子中，变量 <code v-pre>foo</code> 的值是 <code v-pre>hello</code>，而 <code v-pre>hello</code> 也会被看作变量名。这使得有可能写出动态替换的代码。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=hello</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> hello=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span></span></code></pre>\n</div><p>上面代码中，<code v-pre>foo + 2</code> 取决于变量 <code v-pre>hello</code> 的值。</p>\n<p>最后，<code v-pre>$[...]</code> 是以前的语法，也可以做整数运算，不建议使用。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">[2+2]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span></span></code></pre>\n</div><h2 id=\"数值的进制\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#数值的进制\"><span>数值的进制</span></a></h2>\n<p>Bash 的数值默认都是十进制，但是在算术表达式中，也可以使用其他进制。</p>\n<ul>\n<li><code v-pre>number</code>: 没有任何特殊表示法的数字是十进制数(以 10 为底)。</li>\n<li><code v-pre>0number</code>: 八进制数。</li>\n<li><code v-pre>0xnumber</code>: 十六进制数。</li>\n<li><code v-pre>base#number</code>: <code v-pre>base</code> 进制的数。</li>\n</ul>\n<p>下面是一些例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0xff</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">255</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">2#11111111</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">255</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>0xff</code> 是十六进制数，<code v-pre>2#11111111</code> 是二进制数。</p>\n<h2 id=\"位运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#位运算\"><span>位运算</span></a></h2>\n<p><code v-pre>$((...))</code> 支持以下的二进制位运算符。</p>\n<ul>\n<li><code v-pre>&lt;&lt;</code>: 位左移运算，把一个数字的所有位向左移动指定的位。</li>\n<li><code v-pre>&gt;&gt;</code>: 位右移运算，把一个数字的所有位向右移动指定的位。</li>\n<li><code v-pre>&amp;</code>: 位的“与”运算，对两个数字的所有位执行一个 <code v-pre>AND</code> 操作。</li>\n<li><code v-pre>|</code>: 位的“或”运算，对两个数字的所有位执行一个 <code v-pre>OR</code> 操作。</li>\n<li><code v-pre>~</code>: 位的“否”运算，对一个数字的所有位取反。</li>\n<li><code v-pre>^</code>: 位的异或运算(exclusive or)，对两个数字的所有位执行一个异或操作。</li>\n</ul>\n<p>下面是右移运算符 <code v-pre>&gt;&gt;</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((16>>2))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span></span></code></pre>\n</div><p>下面是左移运算符 <code v-pre>&lt;&lt;</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">16</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x3C;&#x3C;</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">2))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">64</span></span></code></pre>\n</div><p>下面是 <code v-pre>17</code> (二进制 <code v-pre>10001</code>)和 <code v-pre>3</code> (二进制 <code v-pre>11</code>)的各种二进制运算的结果。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">17</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x26;</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">17</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">|</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">19</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">17^3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">18</span></span></code></pre>\n</div><h2 id=\"逻辑运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#逻辑运算\"><span>逻辑运算</span></a></h2>\n<p><code v-pre>$((...))</code> 支持以下的逻辑运算符。</p>\n<ul>\n<li><code v-pre>&lt;</code>: 小于</li>\n<li><code v-pre>&gt;</code>: 大于</li>\n<li><code v-pre>&lt;=</code>: 小于或相等</li>\n<li><code v-pre>&gt;=</code>: 大于或相等</li>\n<li><code v-pre>==</code>: 相等</li>\n<li><code v-pre>!=</code>: 不相等</li>\n<li><code v-pre>&amp;&amp;</code>: 逻辑与</li>\n<li><code v-pre>||</code>: 逻辑或</li>\n<li><code v-pre>!</code>: 逻辑否</li>\n<li><code v-pre>expr1?expr2:expr3</code>: 三元条件运算符。若表达式 <code v-pre>expr1</code> 的计算结果为非零值(算术真)，则执行表达式 <code v-pre>expr2</code>，否则执行表达式 <code v-pre>expr3</code>。</li>\n</ul>\n<p>如果逻辑表达式为真，返回 <code v-pre>1</code>，否则返回 <code v-pre>0</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) || (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">4</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) ))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span></code></pre>\n</div><p>三元运算符执行一个单独的逻辑测试。它用起来类似于 <code v-pre>if/then/else</code> 语句。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x3C;1 </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">?</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> :</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">></span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ?</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> :</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面例子中，第一个表达式为真时，返回第二个表达式的值，否则返回第三个表达式的值。</p>\n<h2 id=\"赋值运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#赋值运算\"><span>赋值运算</span></a></h2>\n<p>算术表达式 <code v-pre>$((...))</code> 可以执行赋值运算。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">1</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>a=1</code> 对变量 <code v-pre>a</code> 进行赋值。这个式子本身也是一个表达式，返回值就是等号右边的值。</p>\n<p><code v-pre>$((...))</code> 支持的赋值运算符，有以下这些。</p>\n<ul>\n<li><code v-pre>parameter = value</code>: 简单赋值。</li>\n<li><code v-pre>parameter += value</code>: 等价于 <code v-pre>parameter = parameter + value</code>。</li>\n<li><code v-pre>parameter -= value</code>: 等价于 <code v-pre>parameter = parameter – value</code>。</li>\n<li><code v-pre>parameter *= value</code>: 等价于 <code v-pre>parameter = parameter * value</code>。</li>\n<li><code v-pre>parameter /= value</code>: 等价于 <code v-pre>parameter = parameter / value</code>。</li>\n<li><code v-pre>parameter %= value</code>: 等价于 <code v-pre>parameter = parameter % value</code>。</li>\n<li><code v-pre>parameter &lt;&lt;= value</code>: 等价于 <code v-pre>parameter = parameter &lt;&lt; value</code>。</li>\n<li><code v-pre>parameter &gt;&gt;= value</code>: 等价于 <code v-pre>parameter = parameter &gt;&gt; value</code>。</li>\n<li><code v-pre>parameter &amp;= value</code>: 等价于 <code v-pre>parameter = parameter &amp; value</code>。</li>\n<li><code v-pre>parameter |= value</code>: 等价于 <code v-pre>parameter = parameter | value</code>。</li>\n<li><code v-pre>parameter ^= value</code>: 等价于 <code v-pre>parameter = parameter ^ value</code>。</li>\n</ul>\n<p>下面是一个例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">5</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo*</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">=2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">10</span></span></code></pre>\n</div><p>如果在表达式内部赋值，可以放在圆括号中，否则会报错。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(( </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">&#x3C;1 </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">?</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (a+=1) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">:</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">a-</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) ))</span></span></code></pre>\n</div><h2 id=\"求值运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#求值运算\"><span>求值运算</span></a></h2>\n<p>逗号 <code v-pre>,</code> 在 <code v-pre>$((...))</code> 内部是求值运算符，执行前后两个表达式，并返回后一个表达式的值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 2,</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 4</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">))</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">12</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $foo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">3</span></span></code></pre>\n</div><p>上面例子中，逗号前后两个表达式都会执行，然后返回后一个表达式的值 <code v-pre>12</code>。</p>\n<h2 id=\"expr-命令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#expr-命令\"><span>expr 命令</span></a></h2>\n<p><code v-pre>expr</code> 命令支持算术运算，可以不使用 <code v-pre>((...))</code> 语法。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expr</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span></span></code></pre>\n</div><p><code v-pre>expr</code> 命令支持变量替换。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo=</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expr</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">5</span></span></code></pre>\n</div><p><code v-pre>expr</code> 命令也不支持非整数参数。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expr</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3.5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> +</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">expr:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 非整数参数</span></span></code></pre>\n</div><p>上面例子中，如果有非整数的运算，<code v-pre>expr</code> 命令就报错了。</p>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n## 算术表达式\n\n`((...))` 语法可以进行整数的算术运算。\n\n```bash\n$ ((foo = 5 + 5))\n$ echo $foo\n10\n```\n\n`((...))` 会自动忽略内部的空格，所以下面的写法都正确，得到同样的结果。\n\n```bash\n((2+2))\n(( 2+2 ))\n(( 2 + 2 ))\n```\n\n这个语法不返回值，命令执行的结果根据算术运算的结果而定。只要算术结果不是 `0`，命令就算执行成功。\n\n```bash\n$ (( 3 + 2 ))\n$ echo $?\n0\n```\n\n上面例子中，`3 + 2` 的结果是 5，命令就算执行成功，环境变量 `$?` 为 `0`。\n\n如果算术结果为 `0`，命令就算执行失败。\n\n```bash\n$ (( 3 - 3 ))\n$ echo $?\n1\n```\n\n上面例子中，`3 - 3` 的结果是 `0`，环境变量 `$?` 为 `1`，表示命令执行失败。\n\n如果要读取算术运算的结果，需要在 `((...))` 前面加上美元符号 `$((...))`，使其变成算术表达式，返回算术运算的值。\n\n```bash\n$ echo $((2 + 2))\n4\n```\n\n`((...))` 语法支持的算术运算符如下。\n\n- `+`: 加法\n- `-`: 减法\n- `*`: 乘法\n- `/`: 除法(整除)\n- `%`: 余数\n- `**`: 指数\n- `++`: 自增运算(前缀或后缀)\n- `--`: 自减运算(前缀或后缀)\n\n注意，除法运算符的返回结果总是整数，比如 `5` 除以 `2`，得到的结果是 `2`，而不是 `2.5`。\n\n```bash\n$ echo $((5 / 2))\n2\n```\n\n`++` 和 `--` 这两个运算符有前缀和后缀的区别。作为前缀是先运算后返回值，作为后缀是先返回值后运算。\n\n```bash\n$ i=0\n$ echo $i\n0\n$ echo $((i++))\n0\n$ echo $i\n1\n$ echo $((++i))\n2\n$ echo $i\n2\n```\n\n上面例子中，`++` 作为后缀是先返回值，执行 `echo` 命令，再进行自增运算；作为前缀则是先进行自增运算，再返回值执行 `echo` 命令。\n\n`$((...))` 内部可以用圆括号改变运算顺序。\n\n```bash\n$ echo $(( (2 + 3) * 4 ))\n20\n```\n\n上面例子中，内部的圆括号让加法先于乘法执行。\n\n`$((...))` 结构可以嵌套。\n\n```bash\n$ echo $(((5**2) * 3))\n75\n# 等同于\n$ echo $(($((5**2)) * 3))\n75\n```\n\n这个语法只能计算整数，否则会报错。\n\n```bash\n# 报错\n$ echo $((1.5 + 1))\nbash: 语法错误\n```\n\n`$((...))` 的圆括号之中，不需要在变量名之前加上 `$`，不过加上也不报错。\n\n```bash\n$ number=2\n$ echo $(($number + 1))\n3\n```\n\n上面例子中，变量 `number` 前面有没有美元符号，结果都是一样的。\n\n如果在 `$((...))` 里面使用字符串，Bash 会认为那是一个变量名。如果不存在同名变量，Bash 就会将其作为空值，因此不会报错。\n\n```bash\n$ echo $(( \"hello\" + 2))\n2\n$ echo $(( \"hello\" * 2))\n0\n```\n\n上面例子中，`\"hello\"` 会被当作变量名，返回空值，而 `$((...))` 会将空值当作 `0`，所以乘法的运算结果就是 `0`。同理，如果 `$((...))` 里面使用不存在的变量，也会当作 `0` 处理。\n\n如果一个变量的值为字符串，跟上面的处理逻辑是一样的。即该字符串如果不对应已存在的变量，在 `$((...))` 里面会被当作空值。\n\n```bash\n$ foo=hello\n$ echo $(( foo + 2))\n2\n```\n\n上面例子中，变量 `foo` 的值是 `hello`，而 `hello` 也会被看作变量名。这使得有可能写出动态替换的代码。\n\n```bash\n$ foo=hello\n$ hello=3\n$ echo $(( foo + 2 ))\n5\n```\n\n上面代码中，`foo + 2` 取决于变量 `hello` 的值。\n\n最后，`$[...]` 是以前的语法，也可以做整数运算，不建议使用。\n\n```bash\n$ echo $[2+2]\n4\n```\n\n## 数值的进制\n\nBash 的数值默认都是十进制，但是在算术表达式中，也可以使用其他进制。\n\n- `number`: 没有任何特殊表示法的数字是十进制数(以 10 为底)。\n- `0number`: 八进制数。\n- `0xnumber`: 十六进制数。\n- `base#number`: `base` 进制的数。\n\n下面是一些例子。\n\n```bash\n$ echo $((0xff))\n255\n$ echo $((2#11111111))\n255\n```\n\n上面例子中，`0xff` 是十六进制数，`2#11111111` 是二进制数。\n\n## 位运算\n\n`$((...))` 支持以下的二进制位运算符。\n\n- `<<`: 位左移运算，把一个数字的所有位向左移动指定的位。\n- `>>`: 位右移运算，把一个数字的所有位向右移动指定的位。\n- `&`: 位的“与”运算，对两个数字的所有位执行一个 `AND` 操作。\n- `|`: 位的“或”运算，对两个数字的所有位执行一个 `OR` 操作。\n- `~`: 位的“否”运算，对一个数字的所有位取反。\n- `^`: 位的异或运算(exclusive or)，对两个数字的所有位执行一个异或操作。\n\n下面是右移运算符 `>>` 的例子。\n\n```bash\n$ echo $((16>>2))\n4\n```\n\n下面是左移运算符 `<<` 的例子。\n\n```bash\n$ echo $((16<<2))\n64\n```\n\n下面是 `17` (二进制 `10001`)和 `3` (二进制 `11`)的各种二进制运算的结果。\n\n```bash\n$ echo $((17&3))\n1\n$ echo $((17|3))\n19\n$ echo $((17^3))\n18\n```\n\n## 逻辑运算\n\n`$((...))` 支持以下的逻辑运算符。\n\n- `<`: 小于\n- `>`: 大于\n- `<=`: 小于或相等\n- `>=`: 大于或相等\n- `==`: 相等\n- `!=`: 不相等\n- `&&`: 逻辑与\n- `||`: 逻辑或\n- `!`: 逻辑否\n- `expr1?expr2:expr3`: 三元条件运算符。若表达式 `expr1` 的计算结果为非零值(算术真)，则执行表达式 `expr2`，否则执行表达式 `expr3`。\n\n如果逻辑表达式为真，返回 `1`，否则返回 `0`。\n\n```bash\n$ echo $((3 > 2))\n1\n$ echo $(( (3 > 2) || (4 <= 1) ))\n1\n```\n\n三元运算符执行一个单独的逻辑测试。它用起来类似于 `if/then/else` 语句。\n\n```bash\n$ a=0\n$ echo $((a<1 ? 1 : 0))\n1\n$ echo $((a>1 ? 1 : 0))\n0\n```\n\n上面例子中，第一个表达式为真时，返回第二个表达式的值，否则返回第三个表达式的值。\n\n## 赋值运算\n\n算术表达式 `$((...))` 可以执行赋值运算。\n\n```bash\n$ echo $((a=1))\n1\n$ echo $a\n1\n```\n\n上面例子中，`a=1` 对变量 `a` 进行赋值。这个式子本身也是一个表达式，返回值就是等号右边的值。\n\n`$((...))` 支持的赋值运算符，有以下这些。\n\n- `parameter = value`: 简单赋值。\n- `parameter += value`: 等价于 `parameter = parameter + value`。\n- `parameter -= value`: 等价于 `parameter = parameter – value`。\n- `parameter *= value`: 等价于 `parameter = parameter * value`。\n- `parameter /= value`: 等价于 `parameter = parameter / value`。\n- `parameter %= value`: 等价于 `parameter = parameter % value`。\n- `parameter <<= value`: 等价于 `parameter = parameter << value`。\n- `parameter >>= value`: 等价于 `parameter = parameter >> value`。\n- `parameter &= value`: 等价于 `parameter = parameter & value`。\n- `parameter |= value`: 等价于 `parameter = parameter | value`。\n- `parameter ^= value`: 等价于 `parameter = parameter ^ value`。\n\n下面是一个例子。\n\n```bash\n$ foo=5\n$ echo $((foo*=2))\n10\n```\n\n如果在表达式内部赋值，可以放在圆括号中，否则会报错。\n\n```bash\necho $(( a<1 ? (a+=1) : (a-=1) ))\n```\n\n## 求值运算\n\n逗号 `,` 在 `$((...))` 内部是求值运算符，执行前后两个表达式，并返回后一个表达式的值。\n\n```bash\n$ echo $((foo = 1 + 2, 3 * 4))\n12\n$ echo $foo\n3\n```\n\n上面例子中，逗号前后两个表达式都会执行，然后返回后一个表达式的值 `12`。\n\n## expr 命令\n\n`expr` 命令支持算术运算，可以不使用 `((...))` 语法。\n\n```bash\n$ expr 3 + 2\n5\n```\n\n`expr` 命令支持变量替换。\n\n```bash\n$ foo=3\n$ expr $foo + 2\n5\n```\n\n`expr` 命令也不支持非整数参数。\n\n```bash\n$ expr 3.5 + 2\nexpr: 非整数参数\n```\n\n上面例子中，如果有非整数的运算，`expr` 命令就报错了。\n","excerpt":"","title":"","headers":[{"level":2,"title":"算术表达式","slug":"算术表达式","link":"#算术表达式","children":[]},{"level":2,"title":"数值的进制","slug":"数值的进制","link":"#数值的进制","children":[]},{"level":2,"title":"位运算","slug":"位运算","link":"#位运算","children":[]},{"level":2,"title":"逻辑运算","slug":"逻辑运算","link":"#逻辑运算","children":[]},{"level":2,"title":"赋值运算","slug":"赋值运算","link":"#赋值运算","children":[]},{"level":2,"title":"求值运算","slug":"求值运算","link":"#求值运算","children":[]},{"level":2,"title":"expr 命令","slug":"expr-命令","link":"#expr-命令","children":[]}]}}
