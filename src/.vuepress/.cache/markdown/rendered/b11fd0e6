{"content":"<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">提示</p>\n<p><code v-pre>page.ts</code> 用于小程序页面渲染。</p>\n</div>\n<!-- more -->\n<h2 id=\"插件的引入\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#插件的引入\"><span>插件的引入</span></a></h2>\n<p>首先在 <code v-pre>ts</code> 文件头部引入 <code v-pre>page</code> 与 <code v-pre>@mptool/enhance</code>。</p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">import</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$Page</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> } </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">from</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"`@mptool/enhance\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">import</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">xxx</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> } </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">from</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"path/to/page/ts\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">;</span></span></code></pre>\n</div><h2 id=\"函数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#函数\"><span>函数</span></a></h2>\n<h3 id=\"resolvepage\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#resolvepage\"><span>resolvePage()</span></a></h3>\n<p><code v-pre>(option: PageQuery, page?: PageData, setGlobal = true) =&gt; PageData | null</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>性质: 同步函数</p>\n</li>\n<li>\n<p>描述: 预处理 <code v-pre>page</code> 数据写入全局数据</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onNavigate</code> 时调用，</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>option</td>\n<td>页面跳转参数</td>\n</tr>\n<tr>\n<td>page</td>\n<td>页面数据</td>\n</tr>\n<tr>\n<td>setGlobal</td>\n<td>是否将处理后的数据写入到全局数据中</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>返回: 处理后的 page 配置</p>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onNavigate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    resolvePage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"setpage\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#setpage\"><span>setPage()</span></a></h3>\n<p><code v-pre>({ option, ctx, handle }: SetPageOption, page?: ComponentData[] | undefined, preload?: boolean) =&gt; void</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 设置本地界面数据，如果传入 <code v-pre>page</code> 参数，则根据 <code v-pre>handle</code> 的值决定是否在 <code v-pre>setData</code> 前处理 <code v-pre>page</code>。</p>\n<p>如果没有传入 <code v-pre>page</code>，则使用 <code v-pre>PageOption.data.page</code>。之后根据 <code v-pre>preload</code> 的值决定是否对页面链接进行预加载。</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onLoad</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>object</td>\n<td>配置对象</td>\n</tr>\n<tr>\n<td>page</td>\n<td>页面数据</td>\n</tr>\n<tr>\n<td>preload [default:true]</td>\n<td>是否预加载子页面</td>\n</tr>\n</tbody>\n</table>\n<p><code v-pre>object</code> 参数:</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>option</td>\n<td>页面传参</td>\n</tr>\n<tr>\n<td>ctx</td>\n<td>页面指针</td>\n</tr>\n<tr>\n<td>handle [default:false]</td>\n<td>页面是否已经被处理</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLoad</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">: </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">any</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    setPage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ctx</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> });</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"setonlinepage\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#setonlinepage\"><span>setOnlinePage()</span></a></h3>\n<p><code v-pre>(option: PageOption, ctx: PageInstanceWithPage, preload = true) =&gt; void</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 设置在线界面数据</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onLoad</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>option</td>\n<td>页面跳转参数</td>\n</tr>\n<tr>\n<td>ctx</td>\n<td>页面指针</td>\n</tr>\n<tr>\n<td>preload [default:true]</td>\n<td>是否预加载子页面</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLoad</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">res</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">: </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">any</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    setOnlinePage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">res</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"popnotice\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#popnotice\"><span>popNotice()</span></a></h3>\n<p><code v-pre>(id: string) =&gt; void</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 弹出通知</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onLoad</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>当前界面的标识符</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLoad</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">id</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> }) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    popNotice</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">id</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"getcolor\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#getcolor\"><span>getColor()</span></a></h3>\n<p><code v-pre>(grey?: boolean) =&gt; Colors</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 获得页面背景相关颜色</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onShow</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>grey [default:false]</td>\n<td>页面是否为灰色背景</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onShow</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">() {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">    this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">setData</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      color</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> getColor</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">data</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">page</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">].</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">grey</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div>","env":{"base":"/","filePath":"/Users/carson/Desktop/work/cms/src/code/mini-app/framework/page.md","filePathRelative":"code/mini-app/framework/page.md","frontmatter":{"date":"2020-10-09T00:00:00.000Z","title":"Page 插件","icon":"page","category":"小程序"},"sfcBlocks":{"template":{"type":"template","content":"<template><div class=\"hint-container tip\">\n<p class=\"hint-container-title\">提示</p>\n<p><code v-pre>page.ts</code> 用于小程序页面渲染。</p>\n</div>\n<!-- more -->\n<h2 id=\"插件的引入\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#插件的引入\"><span>插件的引入</span></a></h2>\n<p>首先在 <code v-pre>ts</code> 文件头部引入 <code v-pre>page</code> 与 <code v-pre>@mptool/enhance</code>。</p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">import</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$Page</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> } </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">from</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"`@mptool/enhance\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">import</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">xxx</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> } </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">from</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"path/to/page/ts\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">;</span></span></code></pre>\n</div><h2 id=\"函数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#函数\"><span>函数</span></a></h2>\n<h3 id=\"resolvepage\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#resolvepage\"><span>resolvePage()</span></a></h3>\n<p><code v-pre>(option: PageQuery, page?: PageData, setGlobal = true) =&gt; PageData | null</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>性质: 同步函数</p>\n</li>\n<li>\n<p>描述: 预处理 <code v-pre>page</code> 数据写入全局数据</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onNavigate</code> 时调用，</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>option</td>\n<td>页面跳转参数</td>\n</tr>\n<tr>\n<td>page</td>\n<td>页面数据</td>\n</tr>\n<tr>\n<td>setGlobal</td>\n<td>是否将处理后的数据写入到全局数据中</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>返回: 处理后的 page 配置</p>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onNavigate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    resolvePage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"setpage\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#setpage\"><span>setPage()</span></a></h3>\n<p><code v-pre>({ option, ctx, handle }: SetPageOption, page?: ComponentData[] | undefined, preload?: boolean) =&gt; void</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 设置本地界面数据，如果传入 <code v-pre>page</code> 参数，则根据 <code v-pre>handle</code> 的值决定是否在 <code v-pre>setData</code> 前处理 <code v-pre>page</code>。</p>\n<p>如果没有传入 <code v-pre>page</code>，则使用 <code v-pre>PageOption.data.page</code>。之后根据 <code v-pre>preload</code> 的值决定是否对页面链接进行预加载。</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onLoad</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>object</td>\n<td>配置对象</td>\n</tr>\n<tr>\n<td>page</td>\n<td>页面数据</td>\n</tr>\n<tr>\n<td>preload [default:true]</td>\n<td>是否预加载子页面</td>\n</tr>\n</tbody>\n</table>\n<p><code v-pre>object</code> 参数:</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>option</td>\n<td>页面传参</td>\n</tr>\n<tr>\n<td>ctx</td>\n<td>页面指针</td>\n</tr>\n<tr>\n<td>handle [default:false]</td>\n<td>页面是否已经被处理</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLoad</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">: </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">any</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    setPage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ctx</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> });</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"setonlinepage\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#setonlinepage\"><span>setOnlinePage()</span></a></h3>\n<p><code v-pre>(option: PageOption, ctx: PageInstanceWithPage, preload = true) =&gt; void</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 设置在线界面数据</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onLoad</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>option</td>\n<td>页面跳转参数</td>\n</tr>\n<tr>\n<td>ctx</td>\n<td>页面指针</td>\n</tr>\n<tr>\n<td>preload [default:true]</td>\n<td>是否预加载子页面</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLoad</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">res</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">: </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">any</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    setOnlinePage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">res</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"popnotice\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#popnotice\"><span>popNotice()</span></a></h3>\n<p><code v-pre>(id: string) =&gt; void</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 弹出通知</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onLoad</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>当前界面的标识符</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLoad</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">id</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> }) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    popNotice</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">id</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"getcolor\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#getcolor\"><span>getColor()</span></a></h3>\n<p><code v-pre>(grey?: boolean) =&gt; Colors</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 获得页面背景相关颜色</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onShow</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>grey [default:false]</td>\n<td>页面是否为灰色背景</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onShow</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">() {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">    this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">setData</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      color</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> getColor</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">data</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">page</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">].</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">grey</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div></template>","contentStripped":"<div class=\"hint-container tip\">\n<p class=\"hint-container-title\">提示</p>\n<p><code v-pre>page.ts</code> 用于小程序页面渲染。</p>\n</div>\n<!-- more -->\n<h2 id=\"插件的引入\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#插件的引入\"><span>插件的引入</span></a></h2>\n<p>首先在 <code v-pre>ts</code> 文件头部引入 <code v-pre>page</code> 与 <code v-pre>@mptool/enhance</code>。</p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">import</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$Page</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> } </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">from</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"`@mptool/enhance\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">import</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> { </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">xxx</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> } </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">from</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"path/to/page/ts\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">;</span></span></code></pre>\n</div><h2 id=\"函数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#函数\"><span>函数</span></a></h2>\n<h3 id=\"resolvepage\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#resolvepage\"><span>resolvePage()</span></a></h3>\n<p><code v-pre>(option: PageQuery, page?: PageData, setGlobal = true) =&gt; PageData | null</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>性质: 同步函数</p>\n</li>\n<li>\n<p>描述: 预处理 <code v-pre>page</code> 数据写入全局数据</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onNavigate</code> 时调用，</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>option</td>\n<td>页面跳转参数</td>\n</tr>\n<tr>\n<td>page</td>\n<td>页面数据</td>\n</tr>\n<tr>\n<td>setGlobal</td>\n<td>是否将处理后的数据写入到全局数据中</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>返回: 处理后的 page 配置</p>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onNavigate</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    resolvePage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"setpage\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#setpage\"><span>setPage()</span></a></h3>\n<p><code v-pre>({ option, ctx, handle }: SetPageOption, page?: ComponentData[] | undefined, preload?: boolean) =&gt; void</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 设置本地界面数据，如果传入 <code v-pre>page</code> 参数，则根据 <code v-pre>handle</code> 的值决定是否在 <code v-pre>setData</code> 前处理 <code v-pre>page</code>。</p>\n<p>如果没有传入 <code v-pre>page</code>，则使用 <code v-pre>PageOption.data.page</code>。之后根据 <code v-pre>preload</code> 的值决定是否对页面链接进行预加载。</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onLoad</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>object</td>\n<td>配置对象</td>\n</tr>\n<tr>\n<td>page</td>\n<td>页面数据</td>\n</tr>\n<tr>\n<td>preload [default:true]</td>\n<td>是否预加载子页面</td>\n</tr>\n</tbody>\n</table>\n<p><code v-pre>object</code> 参数:</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>option</td>\n<td>页面传参</td>\n</tr>\n<tr>\n<td>ctx</td>\n<td>页面指针</td>\n</tr>\n<tr>\n<td>handle [default:false]</td>\n<td>页面是否已经被处理</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLoad</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">: </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">any</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    setPage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">option</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ctx</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> });</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"setonlinepage\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#setonlinepage\"><span>setOnlinePage()</span></a></h3>\n<p><code v-pre>(option: PageOption, ctx: PageInstanceWithPage, preload = true) =&gt; void</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 设置在线界面数据</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onLoad</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>option</td>\n<td>页面跳转参数</td>\n</tr>\n<tr>\n<td>ctx</td>\n<td>页面指针</td>\n</tr>\n<tr>\n<td>preload [default:true]</td>\n<td>是否预加载子页面</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLoad</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">res</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">: </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">any</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    setOnlinePage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">res</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"popnotice\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#popnotice\"><span>popNotice()</span></a></h3>\n<p><code v-pre>(id: string) =&gt; void</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 弹出通知</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onLoad</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>当前界面的标识符</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLoad</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">id</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> }) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    popNotice</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">id</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div><h3 id=\"getcolor\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#getcolor\"><span>getColor()</span></a></h3>\n<p><code v-pre>(grey?: boolean) =&gt; Colors</code></p>\n<p><strong>简介:</strong></p>\n<ul>\n<li>\n<p>描述: 获得页面背景相关颜色</p>\n</li>\n<li>\n<p>用法: 在页面 <code v-pre>onShow</code> 时调用</p>\n</li>\n<li>\n<p>性质: 同步函数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>grey [default:false]</td>\n<td>页面是否为灰色背景</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<p><strong>案例:</strong></p>\n<div class=\"language-ts\" data-highlighter=\"shiki\" data-ext=\"ts\" data-title=\"ts\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onShow</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">() {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">    this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">setData</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      color</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> getColor</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">this</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">data</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">page</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">].</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">grey</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    });</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  }</span></span></code></pre>\n</div>","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n::: tip\n\n`page.ts` 用于小程序页面渲染。\n\n:::\n\n<!-- more -->\n\n## 插件的引入\n\n首先在 `ts` 文件头部引入 `page` 与 `@mptool/enhance`。\n\n```ts\nimport { $Page } from \"`@mptool/enhance\";\nimport { xxx } from \"path/to/page/ts\";\n```\n\n## 函数\n\n### resolvePage()\n\n`(option: PageQuery, page?: PageData, setGlobal = true) => PageData | null`\n\n**简介:**\n\n- 性质: 同步函数\n\n- 描述: 预处理 `page` 数据写入全局数据\n\n- 用法: 在页面 `onNavigate` 时调用，\n\n  | 参数      | 描述                               |\n  | --------- | ---------------------------------- |\n  | option    | 页面跳转参数                       |\n  | page      | 页面数据                           |\n  | setGlobal | 是否将处理后的数据写入到全局数据中 |\n\n- 返回: 处理后的 page 配置\n\n**案例:**\n\n```ts\n  onNavigate(option) {\n    resolvePage(option);\n  }\n```\n\n### setPage()\n\n`({ option, ctx, handle }: SetPageOption, page?: ComponentData[] | undefined, preload?: boolean) => void`\n\n**简介:**\n\n- 描述: 设置本地界面数据，如果传入 `page` 参数，则根据 `handle` 的值决定是否在 `setData` 前处理 `page`。\n\n  如果没有传入 `page`，则使用 `PageOption.data.page`。之后根据 `preload` 的值决定是否对页面链接进行预加载。\n\n- 用法: 在页面 `onLoad` 时调用\n\n- 性质: 同步函数\n\n  | 参数                     | 描述             |\n  | ------------------------ | ---------------- |\n  | object                   | 配置对象         |\n  | page                     | 页面数据         |\n  | preload \\[default:true\\] | 是否预加载子页面 |\n\n  `object` 参数:\n\n  | 参数                     | 描述               |\n  | ------------------------ | ------------------ |\n  | option                   | 页面传参           |\n  | ctx                      | 页面指针           |\n  | handle \\[default:false\\] | 页面是否已经被处理 |\n\n**案例:**\n\n```ts\n  onLoad(option: any) {\n    setPage({ option, ctx: this });\n  }\n```\n\n### setOnlinePage()\n\n`(option: PageOption, ctx: PageInstanceWithPage, preload = true) => void`\n\n**简介:**\n\n- 描述: 设置在线界面数据\n\n- 用法: 在页面 `onLoad` 时调用\n\n- 性质: 同步函数\n\n  | 参数                     | 描述             |\n  | ------------------------ | ---------------- |\n  | option                   | 页面跳转参数     |\n  | ctx                      | 页面指针         |\n  | preload \\[default:true\\] | 是否预加载子页面 |\n\n**案例:**\n\n```ts\n  onLoad(res: any) {\n    setOnlinePage(res, this);\n  }\n```\n\n### popNotice()\n\n`(id: string) => void`\n\n**简介:**\n\n- 描述: 弹出通知\n\n- 用法: 在页面 `onLoad` 时调用\n\n- 性质: 同步函数\n\n  | 参数 | 描述             |\n  | ---- | ---------------- |\n  | id   | 当前界面的标识符 |\n\n**案例:**\n\n```ts\n  onLoad({ id }) {\n    popNotice(id);\n  }\n```\n\n### getColor()\n\n`(grey?: boolean) => Colors`\n\n**简介:**\n\n- 描述: 获得页面背景相关颜色\n\n- 用法: 在页面 `onShow` 时调用\n\n- 性质: 同步函数\n\n  | 参数                   | 描述               |\n  | ---------------------- | ------------------ |\n  | grey \\[default:false\\] | 页面是否为灰色背景 |\n\n**案例:**\n\n```ts\n  onShow() {\n    this.setData({\n      color: getColor(this.data.page[0].grey)\n    });\n  }\n```\n","excerpt":"","title":"","headers":[{"level":2,"title":"插件的引入","slug":"插件的引入","link":"#插件的引入","children":[]},{"level":2,"title":"函数","slug":"函数","link":"#函数","children":[{"level":3,"title":"resolvePage()","slug":"resolvepage","link":"#resolvepage","children":[]},{"level":3,"title":"setPage()","slug":"setpage","link":"#setpage","children":[]},{"level":3,"title":"setOnlinePage()","slug":"setonlinepage","link":"#setonlinepage","children":[]},{"level":3,"title":"popNotice()","slug":"popnotice","link":"#popnotice","children":[]},{"level":3,"title":"getColor()","slug":"getcolor","link":"#getcolor","children":[]}]}]}}
