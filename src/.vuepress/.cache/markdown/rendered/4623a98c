{"content":"<h1 id=\"归档和备份\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#归档和备份\"><span>归档和备份</span></a></h1>\n<h2 id=\"gzip\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#gzip\"><span>gzip</span></a></h2>\n<p>gzip 程序用来压缩文件，原文件的压缩版(添加 <code v-pre>gz</code> 后缀名)会替代原文件。gunzip 程序用来还原压缩版本。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">gzip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">gunzip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt.gz</span></span></code></pre>\n</div><p><code v-pre>gzip</code> 的参数如下。</p>\n<ul>\n<li>-c 把输出写入到标准输出，并且保留原始文件。也有可能用--stdout 和--to-stdout 选项来指定。</li>\n<li>-d 解压缩。正如 gunzip 命令一样。也可以用--decompress 或者--uncompress 选项来指定.</li>\n<li>-f 强制压缩，即使原始文件的压缩文件已经存在了，也要执行。也可以用--force 选项来指定。</li>\n<li>-h 显示用法信息。也可用--help 选项来指定。</li>\n<li>-l 列出每个被压缩文件的压缩数据。也可用--list 选项。</li>\n<li>-r 若命令的一个或多个参数是目录，则递归地压缩目录中的文件。也可用--recursive 选项来指定。</li>\n<li>-t 测试压缩文件的完整性。也可用--test 选项来指定。</li>\n<li>-v 显示压缩过程中的信息。也可用--verbose 选项来指定。</li>\n<li>-number 设置压缩指数。number 是一个在 1(最快，最小压缩)到 9(最慢，最大压缩)之间的整数。数值 1 和 9 也可以各自用--fast 和--best 选项来表示。默认值是整数 6。</li>\n</ul>\n<p>下面是一些例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 查看解压缩后的内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gunzip</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><p><code v-pre>zcat</code> 程序等同于带有-c 选项的 gunzip 命令。它可以像 <code v-pre>cat</code> 命令那样，用来查看 <code v-pre>gzip</code> 压缩文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">zcat</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt.gz</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><h2 id=\"bzip2\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bzip2\"><span>bzip2</span></a></h2>\n<p><code v-pre>bzip2</code> 程序与 <code v-pre>gzip</code> 程序相似，但是使用了不同的压缩算法，舍弃了压缩速度，实现了更高的压缩级别。在大多数情况下，它的工作模式等同于 <code v-pre>gzip</code>。由 <code v-pre>bzip2</code> 压缩的文件，用扩展名 <code v-pre>.bz2</code> 表示。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bzip2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bunzip2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt.bz2</span></span></code></pre>\n</div><p>gzip 程序的所有选项(除了 <code v-pre>-r</code>)，bzip2 程序同样也支持。同样有 bunzip2 和 bzcat 程序来解压缩文件。bzip2 文件也带有 bzip2recover 程序，其会 试图恢复受损的 .bz2 文件。</p>\n<h2 id=\"zip\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zip\"><span>zip</span></a></h2>\n<p><code v-pre>zip</code> 程序既是压缩工具，也是一个打包工具，读取和写入.zip 文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">zip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> options</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zipfile</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file...</span></span></code></pre>\n</div><p>它的用法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 将指定目录压缩成zip文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zip</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -r</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.zip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span></span></code></pre>\n</div><p><code v-pre>zip</code> 与 <code v-pre>tar</code> 命令有一个相反之处。如果压缩文件已存在，其将被更新而不是被替代。这意味着会保留此文件包，但是会添加新文件，同时替换匹配的文件。</p>\n<p>解压使用 <code v-pre>unzip</code> 命令。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">unzip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ../playground.zip</span></span></code></pre>\n</div><p><code v-pre>unzip</code> 命令的参数如下。</p>\n<ul>\n<li><code v-pre>-l</code> 列出文件包中的内容而不解压</li>\n<li><code v-pre>-v</code> 显示冗余信息</li>\n<li><code v-pre>-p</code> 输出发送到标准输出</li>\n</ul>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">unzip</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls-etc.zip</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><h2 id=\"tar\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#tar\"><span>tar</span></a></h2>\n<p><code v-pre>tar</code> 是 tape archive 的简称，原来是一款制作磁带备份的工具，现在主要用于打包。一个 tar 包可以由一组独立的文件，一个或者多个目录，或者两者混合体组成。</p>\n<p><code v-pre>tar</code> 程序的语法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> mode[options]</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pathname...</span></span></code></pre>\n</div><p>tar 支持以下模式。</p>\n<ul>\n<li>c 表示 create，为文件和／或目录列表创建归档文件。</li>\n<li>x 抽取归档文件。</li>\n<li>r 追加具体的路径到归档文件的末尾。</li>\n<li>t 列出归档文件的内容。</li>\n</ul>\n<p>支持的参数如下。</p>\n<ul>\n<li>f 表示 file，用来指定生成的文件。</li>\n</ul>\n<p>模式和参数可以写在一起，而且不需要开头的短横线。注意，必须首先指定模式，然后才是其它的选项。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 创建子目录的tar包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 查看tar包内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 查看更详细的列表信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 还原归档文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 还原单个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pathname</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 还原文件到指定目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -C</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home/me/</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 追加文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 验证归档文件内容是否正确</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvfW</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 支持通配符</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ../playground2.tar</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --wildcards</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'home/me/playground/\\*.txt'</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>注意，<code v-pre>tar</code> 命令还原的时候，总是还原为相对路径。如果归档的时候，保存的是绝对路径，那么还原的时候，这个绝对路径会整个变成相对路径。</p>\n<p><code v-pre>find</code> 命令可以与 <code v-pre>tar</code> 命令配合使用。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">find</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'file.txt'</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -exec</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '{}'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '+'</span></span></code></pre>\n</div><p>上面的命令先用 <code v-pre>find</code> 程序找到所有名为 <code v-pre>file.txt</code> 的文件，然后使用追加模式(<code v-pre>r</code>)的 <code v-pre>tar</code> 命令，把匹配的文件添加到归档文件 <code v-pre>playground.tar</code> 里面。</p>\n<p>这种 <code v-pre>tar</code> 和 <code v-pre>find</code> 的配合使用，可以创建逐渐增加的目录树或者整个系统的备份。通过 <code v-pre>find</code> 命令匹配新于某个时间戳的文件，我们就能够创建一个归档文件，其只包含新于上一个 tar 包的文件。</p>\n<p>tar 支持压缩功能。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 打成gzip压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> czvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> assets.tar.gz</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dist</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 打成bz2压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cvfj</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> assets.tar.bz2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dist</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 解压 tar.gz 文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xzv</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 解压bz2压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 显示gzip压缩包内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 显示bz2压缩包内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 从gzip压缩包取出单个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 从bz2压缩包取出单个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> jxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 按通配符取出文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --wildcards</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '*.php'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> jxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --wildcards</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '*.php'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 追加文件到压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xyz.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xyz.txt</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"rsync\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#rsync\"><span>rsync</span></a></h2>\n<p><code v-pre>rsync</code> 命令用于在多个目录之间、或者本地与远程目录之间同步。字母 <code v-pre>r</code> 表示 <code v-pre>remote</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">rsync</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> options</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> source</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> destination</span></span></code></pre>\n</div><p>source 和 destination 是下列选项之一:</p>\n<ul>\n<li>一个本地文件或目录</li>\n<li>一个远端文件或目录，以 <code v-pre>[user@]host:path</code> 的形式存在</li>\n<li>一个远端 rsync 服务器，由 <code v-pre>rsync://[user@]host[:port]/path</code> 指定</li>\n</ul>\n<p>注意 source 和 destination 两者之一必须是本地文件。rsync 不支持远端到远端的复制。</p>\n<p><code v-pre>rsync</code> 命令的参数如下。</p>\n<ul>\n<li><code v-pre>-a</code> 递归和保护文件属性</li>\n<li><code v-pre>-v</code> 冗余输出</li>\n<li><code v-pre>--delete</code> 删除可能在备份设备中已经存在但却不再存在于源设备中的文件</li>\n<li><code v-pre>--rsh=ssh</code> 使用 ssh 程序作为远程 shell，目的地必须标注主机名。</li>\n</ul>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 同步两个本地目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 删除源设备不存在的文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> sudo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --delete</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/local</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /media/BigDisk/backup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 远程同步</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> sudo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --delete</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --rsh=ssh</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/local</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> remote-sys:/backup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 与远程rsync主机同步</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -delete</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync://rsync.gtlib.gatech.edu/path/to/oss</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> fedora-devel</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/linux/bash/archives/archiving.md","filePathRelative":"linux/bash/archives/archiving.md","frontmatter":{"date":"2020-06-04T00:00:00.000Z"},"sfcBlocks":{"template":{"type":"template","content":"<template><h1 id=\"归档和备份\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#归档和备份\"><span>归档和备份</span></a></h1>\n<h2 id=\"gzip\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#gzip\"><span>gzip</span></a></h2>\n<p>gzip 程序用来压缩文件，原文件的压缩版(添加 <code v-pre>gz</code> 后缀名)会替代原文件。gunzip 程序用来还原压缩版本。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">gzip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">gunzip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt.gz</span></span></code></pre>\n</div><p><code v-pre>gzip</code> 的参数如下。</p>\n<ul>\n<li>-c 把输出写入到标准输出，并且保留原始文件。也有可能用--stdout 和--to-stdout 选项来指定。</li>\n<li>-d 解压缩。正如 gunzip 命令一样。也可以用--decompress 或者--uncompress 选项来指定.</li>\n<li>-f 强制压缩，即使原始文件的压缩文件已经存在了，也要执行。也可以用--force 选项来指定。</li>\n<li>-h 显示用法信息。也可用--help 选项来指定。</li>\n<li>-l 列出每个被压缩文件的压缩数据。也可用--list 选项。</li>\n<li>-r 若命令的一个或多个参数是目录，则递归地压缩目录中的文件。也可用--recursive 选项来指定。</li>\n<li>-t 测试压缩文件的完整性。也可用--test 选项来指定。</li>\n<li>-v 显示压缩过程中的信息。也可用--verbose 选项来指定。</li>\n<li>-number 设置压缩指数。number 是一个在 1(最快，最小压缩)到 9(最慢，最大压缩)之间的整数。数值 1 和 9 也可以各自用--fast 和--best 选项来表示。默认值是整数 6。</li>\n</ul>\n<p>下面是一些例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 查看解压缩后的内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gunzip</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><p><code v-pre>zcat</code> 程序等同于带有-c 选项的 gunzip 命令。它可以像 <code v-pre>cat</code> 命令那样，用来查看 <code v-pre>gzip</code> 压缩文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">zcat</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt.gz</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><h2 id=\"bzip2\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bzip2\"><span>bzip2</span></a></h2>\n<p><code v-pre>bzip2</code> 程序与 <code v-pre>gzip</code> 程序相似，但是使用了不同的压缩算法，舍弃了压缩速度，实现了更高的压缩级别。在大多数情况下，它的工作模式等同于 <code v-pre>gzip</code>。由 <code v-pre>bzip2</code> 压缩的文件，用扩展名 <code v-pre>.bz2</code> 表示。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bzip2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bunzip2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt.bz2</span></span></code></pre>\n</div><p>gzip 程序的所有选项(除了 <code v-pre>-r</code>)，bzip2 程序同样也支持。同样有 bunzip2 和 bzcat 程序来解压缩文件。bzip2 文件也带有 bzip2recover 程序，其会 试图恢复受损的 .bz2 文件。</p>\n<h2 id=\"zip\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zip\"><span>zip</span></a></h2>\n<p><code v-pre>zip</code> 程序既是压缩工具，也是一个打包工具，读取和写入.zip 文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">zip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> options</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zipfile</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file...</span></span></code></pre>\n</div><p>它的用法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 将指定目录压缩成zip文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zip</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -r</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.zip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span></span></code></pre>\n</div><p><code v-pre>zip</code> 与 <code v-pre>tar</code> 命令有一个相反之处。如果压缩文件已存在，其将被更新而不是被替代。这意味着会保留此文件包，但是会添加新文件，同时替换匹配的文件。</p>\n<p>解压使用 <code v-pre>unzip</code> 命令。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">unzip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ../playground.zip</span></span></code></pre>\n</div><p><code v-pre>unzip</code> 命令的参数如下。</p>\n<ul>\n<li><code v-pre>-l</code> 列出文件包中的内容而不解压</li>\n<li><code v-pre>-v</code> 显示冗余信息</li>\n<li><code v-pre>-p</code> 输出发送到标准输出</li>\n</ul>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">unzip</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls-etc.zip</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><h2 id=\"tar\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#tar\"><span>tar</span></a></h2>\n<p><code v-pre>tar</code> 是 tape archive 的简称，原来是一款制作磁带备份的工具，现在主要用于打包。一个 tar 包可以由一组独立的文件，一个或者多个目录，或者两者混合体组成。</p>\n<p><code v-pre>tar</code> 程序的语法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> mode[options]</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pathname...</span></span></code></pre>\n</div><p>tar 支持以下模式。</p>\n<ul>\n<li>c 表示 create，为文件和／或目录列表创建归档文件。</li>\n<li>x 抽取归档文件。</li>\n<li>r 追加具体的路径到归档文件的末尾。</li>\n<li>t 列出归档文件的内容。</li>\n</ul>\n<p>支持的参数如下。</p>\n<ul>\n<li>f 表示 file，用来指定生成的文件。</li>\n</ul>\n<p>模式和参数可以写在一起，而且不需要开头的短横线。注意，必须首先指定模式，然后才是其它的选项。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 创建子目录的tar包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 查看tar包内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 查看更详细的列表信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 还原归档文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 还原单个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pathname</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 还原文件到指定目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -C</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home/me/</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 追加文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 验证归档文件内容是否正确</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvfW</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 支持通配符</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ../playground2.tar</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --wildcards</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'home/me/playground/\\*.txt'</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>注意，<code v-pre>tar</code> 命令还原的时候，总是还原为相对路径。如果归档的时候，保存的是绝对路径，那么还原的时候，这个绝对路径会整个变成相对路径。</p>\n<p><code v-pre>find</code> 命令可以与 <code v-pre>tar</code> 命令配合使用。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">find</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'file.txt'</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -exec</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '{}'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '+'</span></span></code></pre>\n</div><p>上面的命令先用 <code v-pre>find</code> 程序找到所有名为 <code v-pre>file.txt</code> 的文件，然后使用追加模式(<code v-pre>r</code>)的 <code v-pre>tar</code> 命令，把匹配的文件添加到归档文件 <code v-pre>playground.tar</code> 里面。</p>\n<p>这种 <code v-pre>tar</code> 和 <code v-pre>find</code> 的配合使用，可以创建逐渐增加的目录树或者整个系统的备份。通过 <code v-pre>find</code> 命令匹配新于某个时间戳的文件，我们就能够创建一个归档文件，其只包含新于上一个 tar 包的文件。</p>\n<p>tar 支持压缩功能。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 打成gzip压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> czvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> assets.tar.gz</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dist</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 打成bz2压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cvfj</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> assets.tar.bz2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dist</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 解压 tar.gz 文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xzv</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 解压bz2压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 显示gzip压缩包内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 显示bz2压缩包内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 从gzip压缩包取出单个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 从bz2压缩包取出单个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> jxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 按通配符取出文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --wildcards</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '*.php'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> jxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --wildcards</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '*.php'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 追加文件到压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xyz.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xyz.txt</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"rsync\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#rsync\"><span>rsync</span></a></h2>\n<p><code v-pre>rsync</code> 命令用于在多个目录之间、或者本地与远程目录之间同步。字母 <code v-pre>r</code> 表示 <code v-pre>remote</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">rsync</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> options</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> source</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> destination</span></span></code></pre>\n</div><p>source 和 destination 是下列选项之一:</p>\n<ul>\n<li>一个本地文件或目录</li>\n<li>一个远端文件或目录，以 <code v-pre>[user@]host:path</code> 的形式存在</li>\n<li>一个远端 rsync 服务器，由 <code v-pre>rsync://[user@]host[:port]/path</code> 指定</li>\n</ul>\n<p>注意 source 和 destination 两者之一必须是本地文件。rsync 不支持远端到远端的复制。</p>\n<p><code v-pre>rsync</code> 命令的参数如下。</p>\n<ul>\n<li><code v-pre>-a</code> 递归和保护文件属性</li>\n<li><code v-pre>-v</code> 冗余输出</li>\n<li><code v-pre>--delete</code> 删除可能在备份设备中已经存在但却不再存在于源设备中的文件</li>\n<li><code v-pre>--rsh=ssh</code> 使用 ssh 程序作为远程 shell，目的地必须标注主机名。</li>\n</ul>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 同步两个本地目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 删除源设备不存在的文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> sudo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --delete</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/local</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /media/BigDisk/backup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 远程同步</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> sudo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --delete</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --rsh=ssh</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/local</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> remote-sys:/backup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 与远程rsync主机同步</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -delete</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync://rsync.gtlib.gatech.edu/path/to/oss</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> fedora-devel</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></template>","contentStripped":"<h1 id=\"归档和备份\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#归档和备份\"><span>归档和备份</span></a></h1>\n<h2 id=\"gzip\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#gzip\"><span>gzip</span></a></h2>\n<p>gzip 程序用来压缩文件，原文件的压缩版(添加 <code v-pre>gz</code> 后缀名)会替代原文件。gunzip 程序用来还原压缩版本。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">gzip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">gunzip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt.gz</span></span></code></pre>\n</div><p><code v-pre>gzip</code> 的参数如下。</p>\n<ul>\n<li>-c 把输出写入到标准输出，并且保留原始文件。也有可能用--stdout 和--to-stdout 选项来指定。</li>\n<li>-d 解压缩。正如 gunzip 命令一样。也可以用--decompress 或者--uncompress 选项来指定.</li>\n<li>-f 强制压缩，即使原始文件的压缩文件已经存在了，也要执行。也可以用--force 选项来指定。</li>\n<li>-h 显示用法信息。也可用--help 选项来指定。</li>\n<li>-l 列出每个被压缩文件的压缩数据。也可用--list 选项。</li>\n<li>-r 若命令的一个或多个参数是目录，则递归地压缩目录中的文件。也可用--recursive 选项来指定。</li>\n<li>-t 测试压缩文件的完整性。也可用--test 选项来指定。</li>\n<li>-v 显示压缩过程中的信息。也可用--verbose 选项来指定。</li>\n<li>-number 设置压缩指数。number 是一个在 1(最快，最小压缩)到 9(最慢，最大压缩)之间的整数。数值 1 和 9 也可以各自用--fast 和--best 选项来表示。默认值是整数 6。</li>\n</ul>\n<p>下面是一些例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 查看解压缩后的内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gunzip</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><p><code v-pre>zcat</code> 程序等同于带有-c 选项的 gunzip 命令。它可以像 <code v-pre>cat</code> 命令那样，用来查看 <code v-pre>gzip</code> 压缩文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">zcat</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt.gz</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><h2 id=\"bzip2\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#bzip2\"><span>bzip2</span></a></h2>\n<p><code v-pre>bzip2</code> 程序与 <code v-pre>gzip</code> 程序相似，但是使用了不同的压缩算法，舍弃了压缩速度，实现了更高的压缩级别。在大多数情况下，它的工作模式等同于 <code v-pre>gzip</code>。由 <code v-pre>bzip2</code> 压缩的文件，用扩展名 <code v-pre>.bz2</code> 表示。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bzip2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">bunzip2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo.txt.bz2</span></span></code></pre>\n</div><p>gzip 程序的所有选项(除了 <code v-pre>-r</code>)，bzip2 程序同样也支持。同样有 bunzip2 和 bzcat 程序来解压缩文件。bzip2 文件也带有 bzip2recover 程序，其会 试图恢复受损的 .bz2 文件。</p>\n<h2 id=\"zip\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#zip\"><span>zip</span></a></h2>\n<p><code v-pre>zip</code> 程序既是压缩工具，也是一个打包工具，读取和写入.zip 文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">zip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> options</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zipfile</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file...</span></span></code></pre>\n</div><p>它的用法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 将指定目录压缩成zip文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zip</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -r</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.zip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span></span></code></pre>\n</div><p><code v-pre>zip</code> 与 <code v-pre>tar</code> 命令有一个相反之处。如果压缩文件已存在，其将被更新而不是被替代。这意味着会保留此文件包，但是会添加新文件，同时替换匹配的文件。</p>\n<p>解压使用 <code v-pre>unzip</code> 命令。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">unzip</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ../playground.zip</span></span></code></pre>\n</div><p><code v-pre>unzip</code> 命令的参数如下。</p>\n<ul>\n<li><code v-pre>-l</code> 列出文件包中的内容而不解压</li>\n<li><code v-pre>-v</code> 显示冗余信息</li>\n<li><code v-pre>-p</code> 输出发送到标准输出</li>\n</ul>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">unzip</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls-etc.zip</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><h2 id=\"tar\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#tar\"><span>tar</span></a></h2>\n<p><code v-pre>tar</code> 是 tape archive 的简称，原来是一款制作磁带备份的工具，现在主要用于打包。一个 tar 包可以由一组独立的文件，一个或者多个目录，或者两者混合体组成。</p>\n<p><code v-pre>tar</code> 程序的语法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> mode[options]</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pathname...</span></span></code></pre>\n</div><p>tar 支持以下模式。</p>\n<ul>\n<li>c 表示 create，为文件和／或目录列表创建归档文件。</li>\n<li>x 抽取归档文件。</li>\n<li>r 追加具体的路径到归档文件的末尾。</li>\n<li>t 列出归档文件的内容。</li>\n</ul>\n<p>支持的参数如下。</p>\n<ul>\n<li>f 表示 file，用来指定生成的文件。</li>\n</ul>\n<p>模式和参数可以写在一起，而且不需要开头的短横线。注意，必须首先指定模式，然后才是其它的选项。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 创建子目录的tar包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 查看tar包内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 查看更详细的列表信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 还原归档文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 还原单个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pathname</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 还原文件到指定目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -C</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home/me/</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 追加文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 验证归档文件内容是否正确</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvfW</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 支持通配符</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ../playground2.tar</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --wildcards</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'home/me/playground/\\*.txt'</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>注意，<code v-pre>tar</code> 命令还原的时候，总是还原为相对路径。如果归档的时候，保存的是绝对路径，那么还原的时候，这个绝对路径会整个变成相对路径。</p>\n<p><code v-pre>find</code> 命令可以与 <code v-pre>tar</code> 命令配合使用。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">find</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'file.txt'</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -exec</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground.tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '{}'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '+'</span></span></code></pre>\n</div><p>上面的命令先用 <code v-pre>find</code> 程序找到所有名为 <code v-pre>file.txt</code> 的文件，然后使用追加模式(<code v-pre>r</code>)的 <code v-pre>tar</code> 命令，把匹配的文件添加到归档文件 <code v-pre>playground.tar</code> 里面。</p>\n<p>这种 <code v-pre>tar</code> 和 <code v-pre>find</code> 的配合使用，可以创建逐渐增加的目录树或者整个系统的备份。通过 <code v-pre>find</code> 命令匹配新于某个时间戳的文件，我们就能够创建一个归档文件，其只包含新于上一个 tar 包的文件。</p>\n<p>tar 支持压缩功能。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 打成gzip压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> czvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> assets.tar.gz</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dist</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 打成bz2压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cvfj</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> assets.tar.bz2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dist</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 解压 tar.gz 文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xzv</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 解压bz2压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 显示gzip压缩包内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 显示bz2压缩包内容</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 从gzip压缩包取出单个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 从bz2压缩包取出单个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> jxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 按通配符取出文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --wildcards</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '*.php'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> jxvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --wildcards</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> '*.php'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 追加文件到压缩包</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.gz</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xyz.txt</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tar</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rvf</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> archive.tar.bz2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> xyz.txt</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"rsync\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#rsync\"><span>rsync</span></a></h2>\n<p><code v-pre>rsync</code> 命令用于在多个目录之间、或者本地与远程目录之间同步。字母 <code v-pre>r</code> 表示 <code v-pre>remote</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">rsync</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> options</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> source</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> destination</span></span></code></pre>\n</div><p>source 和 destination 是下列选项之一:</p>\n<ul>\n<li>一个本地文件或目录</li>\n<li>一个远端文件或目录，以 <code v-pre>[user@]host:path</code> 的形式存在</li>\n<li>一个远端 rsync 服务器，由 <code v-pre>rsync://[user@]host[:port]/path</code> 指定</li>\n</ul>\n<p>注意 source 和 destination 两者之一必须是本地文件。rsync 不支持远端到远端的复制。</p>\n<p><code v-pre>rsync</code> 命令的参数如下。</p>\n<ul>\n<li><code v-pre>-a</code> 递归和保护文件属性</li>\n<li><code v-pre>-v</code> 冗余输出</li>\n<li><code v-pre>--delete</code> 删除可能在备份设备中已经存在但却不再存在于源设备中的文件</li>\n<li><code v-pre>--rsh=ssh</code> 使用 ssh 程序作为远程 shell，目的地必须标注主机名。</li>\n</ul>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 同步两个本地目录</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> playground</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> foo</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 删除源设备不存在的文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> sudo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --delete</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/local</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /media/BigDisk/backup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 远程同步</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> sudo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --delete</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> --rsh=ssh</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/local</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> remote-sys:/backup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 与远程rsync主机同步</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -av</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -delete</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> rsync://rsync.gtlib.gatech.edu/path/to/oss</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> fedora-devel</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n# 归档和备份\n\n## gzip\n\ngzip 程序用来压缩文件，原文件的压缩版(添加 `gz` 后缀名)会替代原文件。gunzip 程序用来还原压缩版本。\n\n```bash\ngzip foo.txt\ngunzip foo.txt.gz\n```\n\n`gzip` 的参数如下。\n\n- -c 把输出写入到标准输出，并且保留原始文件。也有可能用--stdout 和--to-stdout 选项来指定。\n- -d 解压缩。正如 gunzip 命令一样。也可以用--decompress 或者--uncompress 选项来指定.\n- -f 强制压缩，即使原始文件的压缩文件已经存在了，也要执行。也可以用--force 选项来指定。\n- -h 显示用法信息。也可用--help 选项来指定。\n- -l 列出每个被压缩文件的压缩数据。也可用--list 选项。\n- -r 若命令的一个或多个参数是目录，则递归地压缩目录中的文件。也可用--recursive 选项来指定。\n- -t 测试压缩文件的完整性。也可用--test 选项来指定。\n- -v 显示压缩过程中的信息。也可用--verbose 选项来指定。\n- -number 设置压缩指数。number 是一个在 1(最快，最小压缩)到 9(最慢，最大压缩)之间的整数。数值 1 和 9 也可以各自用--fast 和--best 选项来表示。默认值是整数 6。\n\n下面是一些例子。\n\n```bash\n# 查看解压缩后的内容\n$ gunzip -c foo.txt | less\n```\n\n`zcat` 程序等同于带有-c 选项的 gunzip 命令。它可以像 `cat` 命令那样，用来查看 `gzip` 压缩文件。\n\n```bash\nzcat foo.txt.gz | less\n```\n\n## bzip2\n\n`bzip2` 程序与 `gzip` 程序相似，但是使用了不同的压缩算法，舍弃了压缩速度，实现了更高的压缩级别。在大多数情况下，它的工作模式等同于 `gzip`。由 `bzip2` 压缩的文件，用扩展名 `.bz2` 表示。\n\n```bash\nbzip2 foo.txt\nbunzip2 foo.txt.bz2\n```\n\ngzip 程序的所有选项(除了 `-r`)，bzip2 程序同样也支持。同样有 bunzip2 和 bzcat 程序来解压缩文件。bzip2 文件也带有 bzip2recover 程序，其会 试图恢复受损的 .bz2 文件。\n\n## zip\n\n`zip` 程序既是压缩工具，也是一个打包工具，读取和写入.zip 文件。\n\n```bash\nzip options zipfile file...\n```\n\n它的用法如下。\n\n```bash\n# 将指定目录压缩成zip文件\n$ zip -r playground.zip playground\n```\n\n`zip` 与 `tar` 命令有一个相反之处。如果压缩文件已存在，其将被更新而不是被替代。这意味着会保留此文件包，但是会添加新文件，同时替换匹配的文件。\n\n解压使用 `unzip` 命令。\n\n```bash\nunzip ../playground.zip\n```\n\n`unzip` 命令的参数如下。\n\n- `-l` 列出文件包中的内容而不解压\n- `-v` 显示冗余信息\n- `-p` 输出发送到标准输出\n\n```bash\nunzip -p ls-etc.zip | less\n```\n\n## tar\n\n`tar` 是 tape archive 的简称，原来是一款制作磁带备份的工具，现在主要用于打包。一个 tar 包可以由一组独立的文件，一个或者多个目录，或者两者混合体组成。\n\n`tar` 程序的语法如下。\n\n```bash\ntar mode[options] pathname...\n```\n\ntar 支持以下模式。\n\n- c 表示 create，为文件和／或目录列表创建归档文件。\n- x 抽取归档文件。\n- r 追加具体的路径到归档文件的末尾。\n- t 列出归档文件的内容。\n\n支持的参数如下。\n\n- f 表示 file，用来指定生成的文件。\n\n模式和参数可以写在一起，而且不需要开头的短横线。注意，必须首先指定模式，然后才是其它的选项。\n\n```bash\n# 创建子目录的tar包\n$ tar cf playground.tar playground\n\n# 查看tar包内容\n$ tar tf playground.tar\n\n# 查看更详细的列表信息\n$ tar tvf playground.tar\n\n# 还原归档文件\n$ tar xf playground.tar\n\n# 还原单个文件\n$ tar xf archive.tar pathname\n\n# 还原文件到指定目录\n$ tar xvf archive.tar -C /home/me/\n\n# 追加文件\n$ tar rf archive.tar file.txt\n\n# 验证归档文件内容是否正确\n$ tar tvfW archive.tar\n\n# 支持通配符\n$ tar xf ../playground2.tar --wildcards 'home/me/playground/\\*.txt'\n```\n\n注意，`tar` 命令还原的时候，总是还原为相对路径。如果归档的时候，保存的是绝对路径，那么还原的时候，这个绝对路径会整个变成相对路径。\n\n`find` 命令可以与 `tar` 命令配合使用。\n\n```bash\nfind playground -name 'file.txt' -exec tar rf playground.tar '{}' '+'\n```\n\n上面的命令先用 `find` 程序找到所有名为 `file.txt` 的文件，然后使用追加模式(`r`)的 `tar` 命令，把匹配的文件添加到归档文件 `playground.tar` 里面。\n\n这种 `tar` 和 `find` 的配合使用，可以创建逐渐增加的目录树或者整个系统的备份。通过 `find` 命令匹配新于某个时间戳的文件，我们就能够创建一个归档文件，其只包含新于上一个 tar 包的文件。\n\ntar 支持压缩功能。\n\n```bash\n# 打成gzip压缩包\n$ tar czvf assets.tar.gz dist\n\n# 打成bz2压缩包\n$ tar cvfj assets.tar.bz2 dist\n\n# 解压 tar.gz 文件\n$ tar xzv archive.tar.gz\n$ tar xvf archive.tar.gz\n\n# 解压bz2压缩包\n$ tar xvf archive.tar.bz2\n\n# 显示gzip压缩包内容\n$ tar tvf archive.tar.gz\n\n# 显示bz2压缩包内容\n$ tar tvf archive.tar.bz2\n\n# 从gzip压缩包取出单个文件\n$ tar zxvf archive.tar.gz file.txt\n\n# 从bz2压缩包取出单个文件\n$ tar jxvf archive.tar.bz2 file.txt\n\n# 按通配符取出文件\n$ tar zxvf archive.tar.gz --wildcards '*.php'\n$ tar jxvf archive.tar.bz2 --wildcards '*.php'\n\n# 追加文件到压缩包\n$ tar rvf archive.tar.gz xyz.txt\n$ tar rvf archive.tar.bz2 xyz.txt\n```\n\n## rsync\n\n`rsync` 命令用于在多个目录之间、或者本地与远程目录之间同步。字母 `r` 表示 `remote`。\n\n```bash\nrsync options source destination\n```\n\nsource 和 destination 是下列选项之一:\n\n- 一个本地文件或目录\n- 一个远端文件或目录，以 `[user@]host:path` 的形式存在\n- 一个远端 rsync 服务器，由 `rsync://[user@]host[:port]/path` 指定\n\n注意 source 和 destination 两者之一必须是本地文件。rsync 不支持远端到远端的复制。\n\n`rsync` 命令的参数如下。\n\n- `-a` 递归和保护文件属性\n- `-v` 冗余输出\n- `--delete` 删除可能在备份设备中已经存在但却不再存在于源设备中的文件\n- `--rsh=ssh` 使用 ssh 程序作为远程 shell，目的地必须标注主机名。\n\n```bash\n# 同步两个本地目录\n$ rsync -av playground foo\n\n# 删除源设备不存在的文件\n$ sudo rsync -av --delete /etc /home /usr/local /media/BigDisk/backup\n\n# 远程同步\n$ sudo rsync -av --delete --rsh=ssh /etc /home /usr/local remote-sys:/backup\n\n# 与远程rsync主机同步\n$ rsync -av -delete rsync://rsync.gtlib.gatech.edu/path/to/oss fedora-devel\n```\n","excerpt":"","title":"归档和备份","headers":[{"level":2,"title":"gzip","slug":"gzip","link":"#gzip","children":[]},{"level":2,"title":"bzip2","slug":"bzip2","link":"#bzip2","children":[]},{"level":2,"title":"zip","slug":"zip","link":"#zip","children":[]},{"level":2,"title":"tar","slug":"tar","link":"#tar","children":[]},{"level":2,"title":"rsync","slug":"rsync","link":"#rsync","children":[]}]}}
