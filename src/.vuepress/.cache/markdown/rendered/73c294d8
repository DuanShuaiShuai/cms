{"content":"<p>本章介绍 Bash 脚本的条件判断语法。</p>\n<!-- more -->\n<h2 id=\"if-结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#if-结构\"><span>if 结构</span></a></h2>\n<p><code v-pre>if</code> 是最常用的条件判断结构，只有符合给定条件时，才会执行指定的命令。它的语法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> commands</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  commands</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[elif commands; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  commands...]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  commands]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>这个命令分成三个部分: <code v-pre>if</code>、<code v-pre>elif</code> 和 <code v-pre>else</code>。其中，后两个部分是可选的。</p>\n<p><code v-pre>if</code> 关键字后面是主要的判断条件，<code v-pre>elif</code> 用来添加在主条件不成立时的其他判断条件，<code v-pre>else</code> 则是所有条件都不成立时要执行的部分。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> test</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $USER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"foo\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Hello foo.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"You are not foo.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面的例子中，判断条件是环境变量 <code v-pre>$USER</code> 是否等于 <code v-pre>foo</code>，如果等于就输出 <code v-pre>Hello foo.</code>，否则输出其他内容。</p>\n<p><code v-pre>if</code> 和 <code v-pre>then</code> 写在同一行时，需要分号分隔。分号是 Bash 的命令分隔符。它们也可以写成两行，这时不需要分号。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> true</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> false</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'it is false'</span><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"> # 本行不会执行</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面的例子中，<code v-pre>true</code> 和 <code v-pre>false</code> 是两个特殊命令，前者代表操作成功，后者代表操作失败。<code v-pre>if true</code> 意味着命令部分总是会执行，<code v-pre>if false</code> 意味着命令部分永远不会执行。</p>\n<p>除了多行的写法，<code v-pre>if</code> 结构也可以写成单行。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hello</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> world</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"It's true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>注意，<code v-pre>if</code> 关键字后面也可以是一条命令，该条命令执行成功(返回值 <code v-pre>0</code>)，就意味着判断条件成立。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hi'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hello</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> world</span></span></code></pre>\n</div><p>上面命令中，<code v-pre>if</code> 后面是一条命令 <code v-pre>echo 'hi'</code>。该命令会执行，如果返回值是 <code v-pre>0</code>，则执行 <code v-pre>then</code> 的部分。</p>\n<p><code v-pre>if</code> 后面可以跟任意数量的命令。这时，所有命令都会执行，但是判断真伪只看最后一个命令，即使前面所有命令都失败，只要最后一个命令返回 <code v-pre>0</code>，就会执行 <code v-pre>then</code> 的部分。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hello</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> world</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>if</code> 后面有两条命令 (<code v-pre>false;true;</code>)，第二条命令 (<code v-pre>true</code>) 决定了 <code v-pre>then</code> 的部分是否会执行。</p>\n<p><code v-pre>elif</code> 部分可以有多个。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一个 1 到 3 之间的数字(包含两端)> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"1\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"2\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"3\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 输入不符合要求</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，如果用户输入 <code v-pre>3</code>，就会连续判断 3 次。</p>\n<h2 id=\"test-命令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#test-命令\"><span>test 命令</span></a></h2>\n<p><code v-pre>if</code> 结构的判断条件，一般使用 <code v-pre>test</code> 命令，有三种形式。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法一</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">test</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expression</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法二</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[ expression ]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法三</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ expression ]]</span></span></code></pre>\n</div><p>上面三种形式是等价的，但是第三种形式还支持正则判断，前两种不支持。</p>\n<p>上面的 <code v-pre>expression</code> 是一个表达式。这个表达式为真，<code v-pre>test</code> 命令执行成功(返回值为 <code v-pre>0</code>)；表达式为伪，<code v-pre>test</code> 命令执行失败(返回值为 <code v-pre>1</code>)。注意，第二种和第三种写法，<code v-pre>[</code> 和 <code v-pre>]</code> 与内部的表达式之间必须有空格。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc/hosts</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">-f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc/hosts</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面的例子中，<code v-pre>test</code> 命令采用两种写法，判断 <code v-pre>/etc/hosts</code> 文件是否存在，这两种写法是等价的。命令执行后，返回值为 <code v-pre>0</code>，表示该文件确实存在。</p>\n<p>实际上，<code v-pre>[</code> 这个字符是 <code v-pre>test</code> 命令的一种简写形式，可以看作是一个独立的命令，这解释了为什么它后面必须有空格。</p>\n<p>下面把 <code v-pre>test</code> 命令的三种形式，用在 <code v-pre>if</code> 结构中，判断一个文件是否存在。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法一</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> test</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /tmp/foo.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Found foo.txt\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法二</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> /tmp/foo.txt ] ; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Found foo.txt\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法三</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> /tmp/foo.txt ]] ; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Found foo.txt\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"判断表达式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#判断表达式\"><span>判断表达式</span></a></h2>\n<p><code v-pre>if</code> 关键字后面，跟的是一个命令。这个命令可以是 <code v-pre>test</code> 命令，也可以是其他命令。命令的返回值为 <code v-pre>0</code> 表示判断成立，否则表示不成立。因为这些命令主要是为了得到返回值，所以可以视为表达式。</p>\n<p>常用的判断表达式有下面这些。</p>\n<h3 id=\"文件判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#文件判断\"><span>文件判断</span></a></h3>\n<p>以下表达式用来判断文件状态。</p>\n<ul>\n<li><code v-pre>[ -a file ]</code>: 如果 file 存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -b file ]</code>: 如果 file 存在并且是一个块(设备)文件，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -c file ]</code>: 如果 file 存在并且是一个字符(设备)文件，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -d file ]</code>: 如果 file 存在并且是一个目录，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -e file ]</code>: 如果 file 存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -f file ]</code>: 如果 file 存在并且是一个普通文件，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -g file ]</code>: 如果 file 存在并且设置了组 ID，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -G file ]</code>: 如果 file 存在并且属于有效的组 ID，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -h file ]</code>: 如果 file 存在并且是符号链接，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -k file ]</code>: 如果 file 存在并且设置了它的“sticky bit”，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -L file ]</code>: 如果 file 存在并且是一个符号链接，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -N file ]</code>: 如果 file 存在并且自上次读取后已被修改，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -O file ]</code>: 如果 file 存在并且属于有效的用户 ID，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -p file ]</code>: 如果 file 存在并且是一个命名管道，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -r file ]</code>: 如果 file 存在并且可读(当前用户有可读权限)，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -s file ]</code>: 如果 file 存在且其长度大于零，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -S file ]</code>: 如果 file 存在且是一个网络 socket，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -t fd ]</code>: 如果 fd 是一个文件描述符，并且重定向到终端，则为 <code v-pre>true</code>。这可以用来判断是否重定向了标准输入／输出错误。</li>\n<li><code v-pre>[ -u file ]</code>: 如果 file 存在并且设置了 setuid 位，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -w file ]</code>: 如果 file 存在并且可写(当前用户拥有可写权限)，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -x file ]</code>: 如果 file 存在并且可执行(有效用户有执行／搜索权限)，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ file1 -nt file2 ]</code>: 如果 FILE1 比 FILE2 的更新时间最近，或者 FILE1 存在而 FILE2 不存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ file1 -ot file2 ]</code>: 如果 FILE1 比 FILE2 的更新时间更旧，或者 FILE2 存在而 FILE1 不存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ FILE1 -ef FILE2 ]</code>: 如果 FILE1 和 FILE2 引用相同的设备和 inode 编号，则为 <code v-pre>true</code>。</li>\n</ul>\n<p>下面是一个示例。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">~/.bashrc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is a regular file.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is a directory.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-r</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is readable.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-w</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is writable.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-x</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is executable/searchable.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> does not exist\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面代码中，<code v-pre>$FILE</code> 要放在双引号之中。这样可以防止 <code v-pre>$FILE</code> 为空，因为这时 <code v-pre>[ -e ]</code> 会判断为真。而放在双引号之中，返回的就总是一个空字符串，<code v-pre>[ -e &quot;&quot; ]</code> 会判断为伪。</p>\n<h3 id=\"字符串判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#字符串判断\"><span>字符串判断</span></a></h3>\n<p>以下表达式用来判断字符串。</p>\n<ul>\n<li><code v-pre>[ string ]</code>: 如果 <code v-pre>string</code> 不为空(长度大于 0)，则判断为真。</li>\n<li><code v-pre>[ -n string ]</code>: 如果字符串 <code v-pre>string</code> 的长度大于零，则判断为真。</li>\n<li><code v-pre>[ -z string ]</code>: 如果字符串 <code v-pre>string</code> 的长度为零，则判断为真。</li>\n<li><code v-pre>[ string1 = string2 ]</code>: 如果 <code v-pre>string1</code> 和 <code v-pre>string2</code> 相同，则判断为真。</li>\n<li><code v-pre>[ string1 == string2 ]</code> 等同于 <code v-pre>[ string1 = string2 ]</code>。</li>\n<li><code v-pre>[ string1 != string2 ]</code>: 如果 <code v-pre>string1</code> 和 <code v-pre>string2</code> 不相同，则判断为真。</li>\n<li><code v-pre>[ string1 '&gt;' string2 ]</code>: 如果按照字典顺序 <code v-pre>string1</code> 排列在 <code v-pre>string2</code> 之后，则判断为真。</li>\n<li><code v-pre>[ string1 '&lt;' string2 ]</code>: 如果按照字典顺序 <code v-pre>string1</code> 排列在 <code v-pre>string2</code> 之前，则判断为真。</li>\n</ul>\n<p>注意，<code v-pre>test</code> 命令内部的 <code v-pre>&gt;</code> 和 <code v-pre>&lt;</code>，必须用引号引起来(或者是用反斜杠转义)。否则，它们会被 shell 解释为重定向操作符。</p>\n<p>下面是一个示例。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ANSWER</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">maybe</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-z</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"There is no answer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"yes\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is YES.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"no\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is NO.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"maybe\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is MAYBE.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is UNKNOWN.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面代码中，首先确定 <code v-pre>$ANSWER</code> 字符串是否为空。如果为空，就终止脚本，并把退出状态设为 <code v-pre>1</code>。注意，这里的 <code v-pre>echo</code> 命令把错误信息 <code v-pre>There is no answer.</code> 重定向到标准错误，这是处理错误信息的常用方法。如果 <code v-pre>$ANSWER</code> 字符串不为空，就判断它的值是否等于 <code v-pre>yes</code>、<code v-pre>no</code> 或者 <code v-pre>maybe</code>。</p>\n<p>注意，字符串判断时，变量要放在双引号之中，比如 <code v-pre>[ -n &quot;$COUNT&quot; ]</code>，否则变量替换成字符串以后，<code v-pre>test</code> 命令可能会报错，提示参数过多。另外，如果不放在双引号之中，变量为空时，命令会变成 <code v-pre>[ -n ]</code>，这时会判断为真。如果放在双引号之中，<code v-pre>[ -n &quot;&quot; ]</code> 就判断为伪。</p>\n<h3 id=\"整数判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#整数判断\"><span>整数判断</span></a></h3>\n<p>下面的表达式用于判断整数。</p>\n<ul>\n<li><code v-pre>[ integer1 -eq integer2 ]</code>: 如果 <code v-pre>integer1</code> 等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -ne integer2 ]</code>: 如果 <code v-pre>integer1</code> 不等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -le integer2 ]</code>: 如果 <code v-pre>integer1</code> 小于或等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -lt integer2 ]</code>: 如果 <code v-pre>integer1</code> 小于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -ge integer2 ]</code>: 如果 <code v-pre>integer1</code> 大于或等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -gt integer2 ]</code>: 如果 <code v-pre>integer1</code> 大于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n</ul>\n<p>下面是一个用法的例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">-5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-z</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is empty.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -eq</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is zero.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -lt</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is negative.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is positive.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> %</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)) </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-eq</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is even.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is odd.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，先判断变量 <code v-pre>$INT</code> 是否为空，然后判断是否为 <code v-pre>0</code>，接着判断正负，最后通过求余数判断奇偶。</p>\n<h3 id=\"正则判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#正则判断\"><span>正则判断</span></a></h3>\n<p><code v-pre>[[ expression ]]</code> 这种判断形式，支持正则表达式。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ string1 </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> regex ]]</span></span></code></pre>\n</div><p>上面的语法中，<code v-pre>regex</code> 是一个正则表示式，<code v-pre>=~</code> 是正则比较运算符。</p>\n<p>下面是一个例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">-5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^-?[0-9]+$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is an integer.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is not an integer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面代码中，先判断变量 <code v-pre>INT</code> 的字符串形式，是否满足 <code v-pre>^-?[0-9]+$</code> 的正则模式，如果满足就表明它是一个整数。</p>\n<h3 id=\"test-判断的逻辑运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#test-判断的逻辑运算\"><span>test 判断的逻辑运算</span></a></h3>\n<p>通过逻辑运算，可以把多个 <code v-pre>test</code> 判断表达式结合起来，创造更复杂的判断。三种逻辑运算 <code v-pre>AND</code>，<code v-pre>OR</code>，和 <code v-pre>NOT</code>，都有自己的专用符号。</p>\n<ul>\n<li><code v-pre>AND</code> 运算: 符号 <code v-pre>&amp;&amp;</code>，也可使用参数 <code v-pre>-a</code>。</li>\n<li><code v-pre>OR</code> 运算: 符号 <code v-pre>||</code>，也可使用参数 <code v-pre>-o</code>。</li>\n<li><code v-pre>NOT</code> 运算: 符号 <code v-pre>!</code>。</li>\n</ul>\n<p>下面是一个 <code v-pre>AND</code> 的例子，判断整数是否在某个范围之内。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">MIN_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">MAX_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">100</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">50</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^-?[0-9]+$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -ge</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MIN_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> &#x26;&#x26;</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -le</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MAX_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is within </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MIN_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MAX_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is out of range.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is not an integer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，<code v-pre>&amp;&amp;</code> 用来连接两个判断条件: 大于等于 <code v-pre>$MIN_VAL</code>，并且小于等于 <code v-pre>$MAX_VAL</code>。</p>\n<p>使用否定操作符 <code v-pre>!</code> 时，最好用圆括号确定转义的范围。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">!</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> \\(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -ge</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MIN_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -a</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -le</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MAX_VAL</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> \\)</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is outside </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MIN_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MAX_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is in range.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>test</code> 命令内部使用的圆括号，必须使用引号或者转义，否则会被 Bash 解释。</p>\n<h3 id=\"算术判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#算术判断\"><span>算术判断</span></a></h3>\n<p>Bash 还提供了 <code v-pre>((...))</code> 作为算术条件，进行算术运算的判断。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ></span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"true\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面代码执行后，会打印出 <code v-pre>true</code>。</p>\n<p>注意，算术判断不需要使用 <code v-pre>test</code> 命令，而是直接使用 <code v-pre>((...))</code> 结构。这个结构的返回值，决定了判断的真伪。</p>\n<p>如果算术计算的结果是非零值，则表示判断成立。这一点跟命令的返回值正好相反，需要小心。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((1)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"It is true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">It</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((0)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"It is true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"it is false.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">It</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>((1))</code> 表示判断成立，<code v-pre>((0))</code> 表示判断不成立。</p>\n<p>算术条件 <code v-pre>((...))</code> 也可以用于变量赋值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ));</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> echo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"foo is </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>(( foo = 5 ))</code> 完成了两件事情。首先把 <code v-pre>5</code> 赋值给变量 <code v-pre>foo</code>，然后根据返回值 <code v-pre>5</code>，判断条件为真。</p>\n<p>注意，赋值语句返回等号右边的值，如果返回的是 <code v-pre>0</code>，则判断为假。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ));</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> echo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"It is true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">;</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> echo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"It is false.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">It</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.</span></span></code></pre>\n</div><p>下面是用算术条件改写的数值判断脚本。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">-5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^-?[0-9]+$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is zero.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> &#x3C;</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is negative.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is positive.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( ((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> %</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)) == 0)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is even.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is odd.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is not an integer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>只要是算术表达式，都能用于 <code v-pre>((...))</code> 语法，详见 <RouteLink to=\"/linux/bash/arithmetic.html\">Bash 的算术运算</RouteLink> 一章。</p>\n<h3 id=\"普通命令的逻辑运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#普通命令的逻辑运算\"><span>普通命令的逻辑运算</span></a></h3>\n<p>如果 <code v-pre>if</code> 结构使用的不是 <code v-pre>test</code> 命令，而是普通命令，比如上一节的 <code v-pre>((...))</code> 算术运算，或者 <code v-pre>test</code> 命令与普通命令混用，那么可以使用 Bash 的命令控制操作符 <code v-pre>&amp;&amp;</code>(AND)和 <code v-pre>||</code>(OR)，进行多个命令的逻辑运算。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> || </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command2</span></span></code></pre>\n</div><p>对于 <code v-pre>&amp;&amp;</code> 操作符，先执行 <code v-pre>command1</code>，只有 <code v-pre>command1</code> 执行成功后， 才会执行 <code v-pre>command2</code>。对于 <code v-pre>||</code> 操作符，先执行 <code v-pre>command1</code>，只有 <code v-pre>command1</code> 执行失败后， 才会执行 <code v-pre>command2</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">mkdir</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> temp</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">cd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> temp</span></span></code></pre>\n</div><p>上面的命令会创建一个名为 <code v-pre>temp</code> 的目录，执行成功后，才会执行第二个命令，进入这个目录。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-d</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> temp ] || </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">mkdir</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> temp</span></span></code></pre>\n</div><p>上面的命令会测试目录 <code v-pre>temp</code> 是否存在，如果不存在，就会执行第二个命令，创建这个目录。这种写法非常有助于在脚本中处理错误。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">!</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -d</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> temp ] &#x26;&#x26; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span></code></pre>\n</div><p>上面的命令中，如果 <code v-pre>temp</code> 子目录不存在，脚本会终止，并且返回值为 <code v-pre>1</code>。</p>\n<p>下面就是 <code v-pre>if</code> 与 <code v-pre>&amp;&amp;</code> 结合使用的写法。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ condition ] &#x26;&#x26; [ condition ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  command</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>下面是一个示例。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#! /bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">filename</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">$1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">word1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">$2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">word2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">$3</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> grep</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $word1</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $filename</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $word2</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $filename</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$word1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> and </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$word2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> are both in </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$filename</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面的例子只有在指定文件里面，同时存在搜索词 <code v-pre>word1</code> 和 <code v-pre>word2</code>，就会执行 <code v-pre>if</code> 的命令部分。</p>\n<p>下面的示例演示如何将一个 <code v-pre>&amp;&amp;</code> 判断表达式，改写成对应的 <code v-pre>if</code> 结构。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]] &#x26;&#x26; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">cd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">rm</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 等同于</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">!</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"No such directory: '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ! </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">cd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Cannot cd to '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ! </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">rm</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"File deletion failed. Check results\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"case-结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#case-结构\"><span>case 结构</span></a></h2>\n<p><code v-pre>case</code> 结构用于多值判断，可以为每个值指定对应的命令，跟包含多个 <code v-pre>elif</code> 的 <code v-pre>if</code> 结构等价，但是语义更好。它的语法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> expression </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  pattern</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    commands</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  pattern</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    commands</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n</div><p>上面代码中，<code v-pre>expression</code> 是一个表达式，<code v-pre>pattern</code> 是表达式的值或者一个模式，可以有多条，用来匹配多个值，每条以两个分号 (<code v-pre>;</code>) 结尾。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一个 1 到 3 之间的数字(包含两端)> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $character</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  * ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 输入不符合要求</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，最后一条匹配语句的模式是 <code v-pre>*</code>，这个通配符可以匹配其他字符和没有输入字符的情况，类似 <code v-pre>if</code> 的 <code v-pre>else</code> 部分。</p>\n<p>下面是另一个例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">OS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">uname</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -s</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$OS</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  FreeBSD</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is FreeBSD\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  Darwin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is Mac OSX\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  AIX</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is AIX\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  Minix</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is Minix\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  Linux</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is Linux\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  *) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Failed to identify this OS\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面的例子判断当前是什么操作系统。</p>\n<p><code v-pre>case</code> 的匹配模式可以使用各种通配符，下面是一些例子。</p>\n<ul>\n<li><code v-pre>a)</code>: 匹配 <code v-pre>a</code>。</li>\n<li><code v-pre>a|b)</code>: 匹配 <code v-pre>a</code> 或 <code v-pre>b</code>。</li>\n<li><code v-pre>[[:alpha:]])</code>: 匹配单个字母。</li>\n<li><code v-pre>???)</code>: 匹配 3 个字符的单词。</li>\n<li><code v-pre>*.txt)</code>: 匹配 <code v-pre>.txt</code> 结尾。</li>\n<li><code v-pre>*)</code>: 匹配任意输入，通过作为 <code v-pre>case</code> 结构的最后一个模式。</li>\n</ul>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一个字母或数字 > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $character</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:lower:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> |</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\"> [[:upper:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入了字母 </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">                              ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [0-9]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> )                     </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入了数字 </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">                              ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  * )                         </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入不符合要求\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，使用通配符 <code v-pre>[[:lower:]] | [[:upper:]]</code> 匹配字母，<code v-pre>[0-9]</code> 匹配数字。</p>\n<p>Bash 4.0 之前，<code v-pre>case</code> 结构只能匹配一个条件，然后就会退出 <code v-pre>case</code> 结构。Bash 4.0 之后，允许匹配多个条件，这时可以用 <code v-pre>;;&amp;</code> 终止每个条件块。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># test.sh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Type a character > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $REPLY</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:upper:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is upper case.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:lower:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is lower case.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:alpha:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is alphabetic.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:digit:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a digit.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:graph:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a visible character.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:punct:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a punctuation symbol.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:space:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a whitespace character.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:xdigit:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)   </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a hexadecimal digit.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>执行上面的脚本，会得到下面的结果。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test.sh</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Type</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> lower</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> case.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> alphabetic.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> visible</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> hexadecimal</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> digit.</span></span></code></pre>\n</div><p>可以看到条件语句结尾添加了 <code v-pre>;;&amp;</code> 以后，在匹配一个条件之后，并没有退出 <code v-pre>case</code> 结构，而是继续判断下一个条件。</p>\n<h2 id=\"参考链接\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参考链接\"><span>参考链接</span></a></h2>\n<ul>\n<li><a href=\"http://linuxcommand.org/tlcl.php\" target=\"_blank\" rel=\"noopener noreferrer\">The Linux command-line</a>, William Shotts</li>\n<li><a href=\"https://www.pcwdld.com/linux-commands-cheat-sheet\" target=\"_blank\" rel=\"noopener noreferrer\">Linux Commands Cheat Sheet</a> (一个很简短的 CheatSheet)</li>\n</ul>\n","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/linux/bash/condition.md","filePathRelative":"linux/bash/condition.md","frontmatter":{"date":"2020-05-04T00:00:00.000Z","title":"条件判断","icon":"condition","author":"阮一峰","category":"Linux","tag":["Bash"],"copyright":"本教程采用<a href=\"https://creativecommons.org/licenses/by-sa/3.0/deed.zh\" rel=\"noopener noreferrer\" target=\"_blank\">知识共享 署名-相同方式共享 3.0协议</a>"},"sfcBlocks":{"template":{"type":"template","content":"<template><p>本章介绍 Bash 脚本的条件判断语法。</p>\n<!-- more -->\n<h2 id=\"if-结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#if-结构\"><span>if 结构</span></a></h2>\n<p><code v-pre>if</code> 是最常用的条件判断结构，只有符合给定条件时，才会执行指定的命令。它的语法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> commands</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  commands</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[elif commands; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  commands...]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  commands]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>这个命令分成三个部分: <code v-pre>if</code>、<code v-pre>elif</code> 和 <code v-pre>else</code>。其中，后两个部分是可选的。</p>\n<p><code v-pre>if</code> 关键字后面是主要的判断条件，<code v-pre>elif</code> 用来添加在主条件不成立时的其他判断条件，<code v-pre>else</code> 则是所有条件都不成立时要执行的部分。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> test</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $USER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"foo\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Hello foo.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"You are not foo.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面的例子中，判断条件是环境变量 <code v-pre>$USER</code> 是否等于 <code v-pre>foo</code>，如果等于就输出 <code v-pre>Hello foo.</code>，否则输出其他内容。</p>\n<p><code v-pre>if</code> 和 <code v-pre>then</code> 写在同一行时，需要分号分隔。分号是 Bash 的命令分隔符。它们也可以写成两行，这时不需要分号。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> true</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> false</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'it is false'</span><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"> # 本行不会执行</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面的例子中，<code v-pre>true</code> 和 <code v-pre>false</code> 是两个特殊命令，前者代表操作成功，后者代表操作失败。<code v-pre>if true</code> 意味着命令部分总是会执行，<code v-pre>if false</code> 意味着命令部分永远不会执行。</p>\n<p>除了多行的写法，<code v-pre>if</code> 结构也可以写成单行。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hello</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> world</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"It's true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>注意，<code v-pre>if</code> 关键字后面也可以是一条命令，该条命令执行成功(返回值 <code v-pre>0</code>)，就意味着判断条件成立。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hi'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hello</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> world</span></span></code></pre>\n</div><p>上面命令中，<code v-pre>if</code> 后面是一条命令 <code v-pre>echo 'hi'</code>。该命令会执行，如果返回值是 <code v-pre>0</code>，则执行 <code v-pre>then</code> 的部分。</p>\n<p><code v-pre>if</code> 后面可以跟任意数量的命令。这时，所有命令都会执行，但是判断真伪只看最后一个命令，即使前面所有命令都失败，只要最后一个命令返回 <code v-pre>0</code>，就会执行 <code v-pre>then</code> 的部分。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hello</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> world</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>if</code> 后面有两条命令 (<code v-pre>false;true;</code>)，第二条命令 (<code v-pre>true</code>) 决定了 <code v-pre>then</code> 的部分是否会执行。</p>\n<p><code v-pre>elif</code> 部分可以有多个。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一个 1 到 3 之间的数字(包含两端)> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"1\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"2\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"3\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 输入不符合要求</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，如果用户输入 <code v-pre>3</code>，就会连续判断 3 次。</p>\n<h2 id=\"test-命令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#test-命令\"><span>test 命令</span></a></h2>\n<p><code v-pre>if</code> 结构的判断条件，一般使用 <code v-pre>test</code> 命令，有三种形式。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法一</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">test</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expression</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法二</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[ expression ]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法三</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ expression ]]</span></span></code></pre>\n</div><p>上面三种形式是等价的，但是第三种形式还支持正则判断，前两种不支持。</p>\n<p>上面的 <code v-pre>expression</code> 是一个表达式。这个表达式为真，<code v-pre>test</code> 命令执行成功(返回值为 <code v-pre>0</code>)；表达式为伪，<code v-pre>test</code> 命令执行失败(返回值为 <code v-pre>1</code>)。注意，第二种和第三种写法，<code v-pre>[</code> 和 <code v-pre>]</code> 与内部的表达式之间必须有空格。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc/hosts</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">-f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc/hosts</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面的例子中，<code v-pre>test</code> 命令采用两种写法，判断 <code v-pre>/etc/hosts</code> 文件是否存在，这两种写法是等价的。命令执行后，返回值为 <code v-pre>0</code>，表示该文件确实存在。</p>\n<p>实际上，<code v-pre>[</code> 这个字符是 <code v-pre>test</code> 命令的一种简写形式，可以看作是一个独立的命令，这解释了为什么它后面必须有空格。</p>\n<p>下面把 <code v-pre>test</code> 命令的三种形式，用在 <code v-pre>if</code> 结构中，判断一个文件是否存在。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法一</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> test</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /tmp/foo.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Found foo.txt\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法二</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> /tmp/foo.txt ] ; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Found foo.txt\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法三</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> /tmp/foo.txt ]] ; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Found foo.txt\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"判断表达式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#判断表达式\"><span>判断表达式</span></a></h2>\n<p><code v-pre>if</code> 关键字后面，跟的是一个命令。这个命令可以是 <code v-pre>test</code> 命令，也可以是其他命令。命令的返回值为 <code v-pre>0</code> 表示判断成立，否则表示不成立。因为这些命令主要是为了得到返回值，所以可以视为表达式。</p>\n<p>常用的判断表达式有下面这些。</p>\n<h3 id=\"文件判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#文件判断\"><span>文件判断</span></a></h3>\n<p>以下表达式用来判断文件状态。</p>\n<ul>\n<li><code v-pre>[ -a file ]</code>: 如果 file 存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -b file ]</code>: 如果 file 存在并且是一个块(设备)文件，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -c file ]</code>: 如果 file 存在并且是一个字符(设备)文件，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -d file ]</code>: 如果 file 存在并且是一个目录，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -e file ]</code>: 如果 file 存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -f file ]</code>: 如果 file 存在并且是一个普通文件，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -g file ]</code>: 如果 file 存在并且设置了组 ID，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -G file ]</code>: 如果 file 存在并且属于有效的组 ID，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -h file ]</code>: 如果 file 存在并且是符号链接，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -k file ]</code>: 如果 file 存在并且设置了它的“sticky bit”，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -L file ]</code>: 如果 file 存在并且是一个符号链接，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -N file ]</code>: 如果 file 存在并且自上次读取后已被修改，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -O file ]</code>: 如果 file 存在并且属于有效的用户 ID，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -p file ]</code>: 如果 file 存在并且是一个命名管道，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -r file ]</code>: 如果 file 存在并且可读(当前用户有可读权限)，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -s file ]</code>: 如果 file 存在且其长度大于零，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -S file ]</code>: 如果 file 存在且是一个网络 socket，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -t fd ]</code>: 如果 fd 是一个文件描述符，并且重定向到终端，则为 <code v-pre>true</code>。这可以用来判断是否重定向了标准输入／输出错误。</li>\n<li><code v-pre>[ -u file ]</code>: 如果 file 存在并且设置了 setuid 位，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -w file ]</code>: 如果 file 存在并且可写(当前用户拥有可写权限)，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -x file ]</code>: 如果 file 存在并且可执行(有效用户有执行／搜索权限)，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ file1 -nt file2 ]</code>: 如果 FILE1 比 FILE2 的更新时间最近，或者 FILE1 存在而 FILE2 不存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ file1 -ot file2 ]</code>: 如果 FILE1 比 FILE2 的更新时间更旧，或者 FILE2 存在而 FILE1 不存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ FILE1 -ef FILE2 ]</code>: 如果 FILE1 和 FILE2 引用相同的设备和 inode 编号，则为 <code v-pre>true</code>。</li>\n</ul>\n<p>下面是一个示例。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">~/.bashrc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is a regular file.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is a directory.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-r</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is readable.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-w</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is writable.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-x</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is executable/searchable.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> does not exist\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面代码中，<code v-pre>$FILE</code> 要放在双引号之中。这样可以防止 <code v-pre>$FILE</code> 为空，因为这时 <code v-pre>[ -e ]</code> 会判断为真。而放在双引号之中，返回的就总是一个空字符串，<code v-pre>[ -e &quot;&quot; ]</code> 会判断为伪。</p>\n<h3 id=\"字符串判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#字符串判断\"><span>字符串判断</span></a></h3>\n<p>以下表达式用来判断字符串。</p>\n<ul>\n<li><code v-pre>[ string ]</code>: 如果 <code v-pre>string</code> 不为空(长度大于 0)，则判断为真。</li>\n<li><code v-pre>[ -n string ]</code>: 如果字符串 <code v-pre>string</code> 的长度大于零，则判断为真。</li>\n<li><code v-pre>[ -z string ]</code>: 如果字符串 <code v-pre>string</code> 的长度为零，则判断为真。</li>\n<li><code v-pre>[ string1 = string2 ]</code>: 如果 <code v-pre>string1</code> 和 <code v-pre>string2</code> 相同，则判断为真。</li>\n<li><code v-pre>[ string1 == string2 ]</code> 等同于 <code v-pre>[ string1 = string2 ]</code>。</li>\n<li><code v-pre>[ string1 != string2 ]</code>: 如果 <code v-pre>string1</code> 和 <code v-pre>string2</code> 不相同，则判断为真。</li>\n<li><code v-pre>[ string1 '&gt;' string2 ]</code>: 如果按照字典顺序 <code v-pre>string1</code> 排列在 <code v-pre>string2</code> 之后，则判断为真。</li>\n<li><code v-pre>[ string1 '&lt;' string2 ]</code>: 如果按照字典顺序 <code v-pre>string1</code> 排列在 <code v-pre>string2</code> 之前，则判断为真。</li>\n</ul>\n<p>注意，<code v-pre>test</code> 命令内部的 <code v-pre>&gt;</code> 和 <code v-pre>&lt;</code>，必须用引号引起来(或者是用反斜杠转义)。否则，它们会被 shell 解释为重定向操作符。</p>\n<p>下面是一个示例。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ANSWER</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">maybe</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-z</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"There is no answer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"yes\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is YES.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"no\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is NO.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"maybe\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is MAYBE.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is UNKNOWN.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面代码中，首先确定 <code v-pre>$ANSWER</code> 字符串是否为空。如果为空，就终止脚本，并把退出状态设为 <code v-pre>1</code>。注意，这里的 <code v-pre>echo</code> 命令把错误信息 <code v-pre>There is no answer.</code> 重定向到标准错误，这是处理错误信息的常用方法。如果 <code v-pre>$ANSWER</code> 字符串不为空，就判断它的值是否等于 <code v-pre>yes</code>、<code v-pre>no</code> 或者 <code v-pre>maybe</code>。</p>\n<p>注意，字符串判断时，变量要放在双引号之中，比如 <code v-pre>[ -n &quot;$COUNT&quot; ]</code>，否则变量替换成字符串以后，<code v-pre>test</code> 命令可能会报错，提示参数过多。另外，如果不放在双引号之中，变量为空时，命令会变成 <code v-pre>[ -n ]</code>，这时会判断为真。如果放在双引号之中，<code v-pre>[ -n &quot;&quot; ]</code> 就判断为伪。</p>\n<h3 id=\"整数判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#整数判断\"><span>整数判断</span></a></h3>\n<p>下面的表达式用于判断整数。</p>\n<ul>\n<li><code v-pre>[ integer1 -eq integer2 ]</code>: 如果 <code v-pre>integer1</code> 等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -ne integer2 ]</code>: 如果 <code v-pre>integer1</code> 不等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -le integer2 ]</code>: 如果 <code v-pre>integer1</code> 小于或等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -lt integer2 ]</code>: 如果 <code v-pre>integer1</code> 小于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -ge integer2 ]</code>: 如果 <code v-pre>integer1</code> 大于或等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -gt integer2 ]</code>: 如果 <code v-pre>integer1</code> 大于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n</ul>\n<p>下面是一个用法的例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">-5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-z</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is empty.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -eq</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is zero.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -lt</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is negative.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is positive.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> %</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)) </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-eq</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is even.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is odd.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，先判断变量 <code v-pre>$INT</code> 是否为空，然后判断是否为 <code v-pre>0</code>，接着判断正负，最后通过求余数判断奇偶。</p>\n<h3 id=\"正则判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#正则判断\"><span>正则判断</span></a></h3>\n<p><code v-pre>[[ expression ]]</code> 这种判断形式，支持正则表达式。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ string1 </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> regex ]]</span></span></code></pre>\n</div><p>上面的语法中，<code v-pre>regex</code> 是一个正则表示式，<code v-pre>=~</code> 是正则比较运算符。</p>\n<p>下面是一个例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">-5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^-?[0-9]+$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is an integer.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is not an integer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面代码中，先判断变量 <code v-pre>INT</code> 的字符串形式，是否满足 <code v-pre>^-?[0-9]+$</code> 的正则模式，如果满足就表明它是一个整数。</p>\n<h3 id=\"test-判断的逻辑运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#test-判断的逻辑运算\"><span>test 判断的逻辑运算</span></a></h3>\n<p>通过逻辑运算，可以把多个 <code v-pre>test</code> 判断表达式结合起来，创造更复杂的判断。三种逻辑运算 <code v-pre>AND</code>，<code v-pre>OR</code>，和 <code v-pre>NOT</code>，都有自己的专用符号。</p>\n<ul>\n<li><code v-pre>AND</code> 运算: 符号 <code v-pre>&amp;&amp;</code>，也可使用参数 <code v-pre>-a</code>。</li>\n<li><code v-pre>OR</code> 运算: 符号 <code v-pre>||</code>，也可使用参数 <code v-pre>-o</code>。</li>\n<li><code v-pre>NOT</code> 运算: 符号 <code v-pre>!</code>。</li>\n</ul>\n<p>下面是一个 <code v-pre>AND</code> 的例子，判断整数是否在某个范围之内。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">MIN_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">MAX_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">100</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">50</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^-?[0-9]+$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -ge</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MIN_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> &#x26;&#x26;</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -le</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MAX_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is within </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MIN_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MAX_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is out of range.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is not an integer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，<code v-pre>&amp;&amp;</code> 用来连接两个判断条件: 大于等于 <code v-pre>$MIN_VAL</code>，并且小于等于 <code v-pre>$MAX_VAL</code>。</p>\n<p>使用否定操作符 <code v-pre>!</code> 时，最好用圆括号确定转义的范围。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">!</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> \\(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -ge</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MIN_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -a</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -le</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MAX_VAL</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> \\)</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is outside </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MIN_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MAX_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is in range.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>test</code> 命令内部使用的圆括号，必须使用引号或者转义，否则会被 Bash 解释。</p>\n<h3 id=\"算术判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#算术判断\"><span>算术判断</span></a></h3>\n<p>Bash 还提供了 <code v-pre>((...))</code> 作为算术条件，进行算术运算的判断。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ></span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"true\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面代码执行后，会打印出 <code v-pre>true</code>。</p>\n<p>注意，算术判断不需要使用 <code v-pre>test</code> 命令，而是直接使用 <code v-pre>((...))</code> 结构。这个结构的返回值，决定了判断的真伪。</p>\n<p>如果算术计算的结果是非零值，则表示判断成立。这一点跟命令的返回值正好相反，需要小心。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((1)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"It is true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">It</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((0)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"It is true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"it is false.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">It</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>((1))</code> 表示判断成立，<code v-pre>((0))</code> 表示判断不成立。</p>\n<p>算术条件 <code v-pre>((...))</code> 也可以用于变量赋值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ));</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> echo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"foo is </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>(( foo = 5 ))</code> 完成了两件事情。首先把 <code v-pre>5</code> 赋值给变量 <code v-pre>foo</code>，然后根据返回值 <code v-pre>5</code>，判断条件为真。</p>\n<p>注意，赋值语句返回等号右边的值，如果返回的是 <code v-pre>0</code>，则判断为假。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ));</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> echo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"It is true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">;</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> echo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"It is false.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">It</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.</span></span></code></pre>\n</div><p>下面是用算术条件改写的数值判断脚本。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">-5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^-?[0-9]+$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is zero.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> &#x3C;</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is negative.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is positive.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( ((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> %</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)) == 0)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is even.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is odd.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is not an integer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>只要是算术表达式，都能用于 <code v-pre>((...))</code> 语法，详见 <RouteLink to=\"/linux/bash/arithmetic.html\">Bash 的算术运算</RouteLink> 一章。</p>\n<h3 id=\"普通命令的逻辑运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#普通命令的逻辑运算\"><span>普通命令的逻辑运算</span></a></h3>\n<p>如果 <code v-pre>if</code> 结构使用的不是 <code v-pre>test</code> 命令，而是普通命令，比如上一节的 <code v-pre>((...))</code> 算术运算，或者 <code v-pre>test</code> 命令与普通命令混用，那么可以使用 Bash 的命令控制操作符 <code v-pre>&amp;&amp;</code>(AND)和 <code v-pre>||</code>(OR)，进行多个命令的逻辑运算。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> || </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command2</span></span></code></pre>\n</div><p>对于 <code v-pre>&amp;&amp;</code> 操作符，先执行 <code v-pre>command1</code>，只有 <code v-pre>command1</code> 执行成功后， 才会执行 <code v-pre>command2</code>。对于 <code v-pre>||</code> 操作符，先执行 <code v-pre>command1</code>，只有 <code v-pre>command1</code> 执行失败后， 才会执行 <code v-pre>command2</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">mkdir</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> temp</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">cd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> temp</span></span></code></pre>\n</div><p>上面的命令会创建一个名为 <code v-pre>temp</code> 的目录，执行成功后，才会执行第二个命令，进入这个目录。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-d</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> temp ] || </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">mkdir</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> temp</span></span></code></pre>\n</div><p>上面的命令会测试目录 <code v-pre>temp</code> 是否存在，如果不存在，就会执行第二个命令，创建这个目录。这种写法非常有助于在脚本中处理错误。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">!</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -d</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> temp ] &#x26;&#x26; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span></code></pre>\n</div><p>上面的命令中，如果 <code v-pre>temp</code> 子目录不存在，脚本会终止，并且返回值为 <code v-pre>1</code>。</p>\n<p>下面就是 <code v-pre>if</code> 与 <code v-pre>&amp;&amp;</code> 结合使用的写法。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ condition ] &#x26;&#x26; [ condition ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  command</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>下面是一个示例。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#! /bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">filename</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">$1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">word1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">$2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">word2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">$3</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> grep</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $word1</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $filename</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $word2</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $filename</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$word1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> and </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$word2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> are both in </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$filename</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面的例子只有在指定文件里面，同时存在搜索词 <code v-pre>word1</code> 和 <code v-pre>word2</code>，就会执行 <code v-pre>if</code> 的命令部分。</p>\n<p>下面的示例演示如何将一个 <code v-pre>&amp;&amp;</code> 判断表达式，改写成对应的 <code v-pre>if</code> 结构。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]] &#x26;&#x26; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">cd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">rm</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 等同于</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">!</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"No such directory: '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ! </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">cd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Cannot cd to '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ! </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">rm</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"File deletion failed. Check results\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"case-结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#case-结构\"><span>case 结构</span></a></h2>\n<p><code v-pre>case</code> 结构用于多值判断，可以为每个值指定对应的命令，跟包含多个 <code v-pre>elif</code> 的 <code v-pre>if</code> 结构等价，但是语义更好。它的语法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> expression </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  pattern</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    commands</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  pattern</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    commands</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n</div><p>上面代码中，<code v-pre>expression</code> 是一个表达式，<code v-pre>pattern</code> 是表达式的值或者一个模式，可以有多条，用来匹配多个值，每条以两个分号 (<code v-pre>;</code>) 结尾。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一个 1 到 3 之间的数字(包含两端)> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $character</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  * ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 输入不符合要求</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，最后一条匹配语句的模式是 <code v-pre>*</code>，这个通配符可以匹配其他字符和没有输入字符的情况，类似 <code v-pre>if</code> 的 <code v-pre>else</code> 部分。</p>\n<p>下面是另一个例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">OS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">uname</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -s</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$OS</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  FreeBSD</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is FreeBSD\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  Darwin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is Mac OSX\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  AIX</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is AIX\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  Minix</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is Minix\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  Linux</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is Linux\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  *) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Failed to identify this OS\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面的例子判断当前是什么操作系统。</p>\n<p><code v-pre>case</code> 的匹配模式可以使用各种通配符，下面是一些例子。</p>\n<ul>\n<li><code v-pre>a)</code>: 匹配 <code v-pre>a</code>。</li>\n<li><code v-pre>a|b)</code>: 匹配 <code v-pre>a</code> 或 <code v-pre>b</code>。</li>\n<li><code v-pre>[[:alpha:]])</code>: 匹配单个字母。</li>\n<li><code v-pre>???)</code>: 匹配 3 个字符的单词。</li>\n<li><code v-pre>*.txt)</code>: 匹配 <code v-pre>.txt</code> 结尾。</li>\n<li><code v-pre>*)</code>: 匹配任意输入，通过作为 <code v-pre>case</code> 结构的最后一个模式。</li>\n</ul>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一个字母或数字 > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $character</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:lower:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> |</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\"> [[:upper:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入了字母 </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">                              ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [0-9]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> )                     </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入了数字 </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">                              ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  * )                         </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入不符合要求\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，使用通配符 <code v-pre>[[:lower:]] | [[:upper:]]</code> 匹配字母，<code v-pre>[0-9]</code> 匹配数字。</p>\n<p>Bash 4.0 之前，<code v-pre>case</code> 结构只能匹配一个条件，然后就会退出 <code v-pre>case</code> 结构。Bash 4.0 之后，允许匹配多个条件，这时可以用 <code v-pre>;;&amp;</code> 终止每个条件块。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># test.sh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Type a character > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $REPLY</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:upper:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is upper case.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:lower:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is lower case.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:alpha:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is alphabetic.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:digit:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a digit.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:graph:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a visible character.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:punct:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a punctuation symbol.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:space:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a whitespace character.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:xdigit:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)   </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a hexadecimal digit.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>执行上面的脚本，会得到下面的结果。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test.sh</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Type</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> lower</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> case.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> alphabetic.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> visible</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> hexadecimal</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> digit.</span></span></code></pre>\n</div><p>可以看到条件语句结尾添加了 <code v-pre>;;&amp;</code> 以后，在匹配一个条件之后，并没有退出 <code v-pre>case</code> 结构，而是继续判断下一个条件。</p>\n<h2 id=\"参考链接\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参考链接\"><span>参考链接</span></a></h2>\n<ul>\n<li><a href=\"http://linuxcommand.org/tlcl.php\" target=\"_blank\" rel=\"noopener noreferrer\">The Linux command-line</a>, William Shotts</li>\n<li><a href=\"https://www.pcwdld.com/linux-commands-cheat-sheet\" target=\"_blank\" rel=\"noopener noreferrer\">Linux Commands Cheat Sheet</a> (一个很简短的 CheatSheet)</li>\n</ul>\n</template>","contentStripped":"<p>本章介绍 Bash 脚本的条件判断语法。</p>\n<!-- more -->\n<h2 id=\"if-结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#if-结构\"><span>if 结构</span></a></h2>\n<p><code v-pre>if</code> 是最常用的条件判断结构，只有符合给定条件时，才会执行指定的命令。它的语法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> commands</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  commands</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[elif commands; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  commands...]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  commands]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>这个命令分成三个部分: <code v-pre>if</code>、<code v-pre>elif</code> 和 <code v-pre>else</code>。其中，后两个部分是可选的。</p>\n<p><code v-pre>if</code> 关键字后面是主要的判断条件，<code v-pre>elif</code> 用来添加在主条件不成立时的其他判断条件，<code v-pre>else</code> 则是所有条件都不成立时要执行的部分。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> test</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $USER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"foo\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Hello foo.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"You are not foo.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面的例子中，判断条件是环境变量 <code v-pre>$USER</code> 是否等于 <code v-pre>foo</code>，如果等于就输出 <code v-pre>Hello foo.</code>，否则输出其他内容。</p>\n<p><code v-pre>if</code> 和 <code v-pre>then</code> 写在同一行时，需要分号分隔。分号是 Bash 的命令分隔符。它们也可以写成两行，这时不需要分号。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> true</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> false</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'it is false'</span><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"> # 本行不会执行</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面的例子中，<code v-pre>true</code> 和 <code v-pre>false</code> 是两个特殊命令，前者代表操作成功，后者代表操作失败。<code v-pre>if true</code> 意味着命令部分总是会执行，<code v-pre>if false</code> 意味着命令部分永远不会执行。</p>\n<p>除了多行的写法，<code v-pre>if</code> 结构也可以写成单行。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hello</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> world</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"It's true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>注意，<code v-pre>if</code> 关键字后面也可以是一条命令，该条命令执行成功(返回值 <code v-pre>0</code>)，就意味着判断条件成立。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hi'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hello</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> world</span></span></code></pre>\n</div><p>上面命令中，<code v-pre>if</code> 后面是一条命令 <code v-pre>echo 'hi'</code>。该命令会执行，如果返回值是 <code v-pre>0</code>，则执行 <code v-pre>then</code> 的部分。</p>\n<p><code v-pre>if</code> 后面可以跟任意数量的命令。这时，所有命令都会执行，但是判断真伪只看最后一个命令，即使前面所有命令都失败，只要最后一个命令返回 <code v-pre>0</code>，就会执行 <code v-pre>then</code> 的部分。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">true</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'hello world'</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">hello</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> world</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>if</code> 后面有两条命令 (<code v-pre>false;true;</code>)，第二条命令 (<code v-pre>true</code>) 决定了 <code v-pre>then</code> 的部分是否会执行。</p>\n<p><code v-pre>elif</code> 部分可以有多个。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一个 1 到 3 之间的数字(包含两端)> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"1\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"2\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"3\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 输入不符合要求</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，如果用户输入 <code v-pre>3</code>，就会连续判断 3 次。</p>\n<h2 id=\"test-命令\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#test-命令\"><span>test 命令</span></a></h2>\n<p><code v-pre>if</code> 结构的判断条件，一般使用 <code v-pre>test</code> 命令，有三种形式。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法一</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">test</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> expression</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法二</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[ expression ]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法三</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ expression ]]</span></span></code></pre>\n</div><p>上面三种形式是等价的，但是第三种形式还支持正则判断，前两种不支持。</p>\n<p>上面的 <code v-pre>expression</code> 是一个表达式。这个表达式为真，<code v-pre>test</code> 命令执行成功(返回值为 <code v-pre>0</code>)；表达式为伪，<code v-pre>test</code> 命令执行失败(返回值为 <code v-pre>1</code>)。注意，第二种和第三种写法，<code v-pre>[</code> 和 <code v-pre>]</code> 与内部的表达式之间必须有空格。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc/hosts</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">-f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /etc/hosts</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ]</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">  echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> $?</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">0</span></span></code></pre>\n</div><p>上面的例子中，<code v-pre>test</code> 命令采用两种写法，判断 <code v-pre>/etc/hosts</code> 文件是否存在，这两种写法是等价的。命令执行后，返回值为 <code v-pre>0</code>，表示该文件确实存在。</p>\n<p>实际上，<code v-pre>[</code> 这个字符是 <code v-pre>test</code> 命令的一种简写形式，可以看作是一个独立的命令，这解释了为什么它后面必须有空格。</p>\n<p>下面把 <code v-pre>test</code> 命令的三种形式，用在 <code v-pre>if</code> 结构中，判断一个文件是否存在。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法一</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> test</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /tmp/foo.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Found foo.txt\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法二</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> /tmp/foo.txt ] ; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Found foo.txt\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 写法三</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> /tmp/foo.txt ]] ; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Found foo.txt\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"判断表达式\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#判断表达式\"><span>判断表达式</span></a></h2>\n<p><code v-pre>if</code> 关键字后面，跟的是一个命令。这个命令可以是 <code v-pre>test</code> 命令，也可以是其他命令。命令的返回值为 <code v-pre>0</code> 表示判断成立，否则表示不成立。因为这些命令主要是为了得到返回值，所以可以视为表达式。</p>\n<p>常用的判断表达式有下面这些。</p>\n<h3 id=\"文件判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#文件判断\"><span>文件判断</span></a></h3>\n<p>以下表达式用来判断文件状态。</p>\n<ul>\n<li><code v-pre>[ -a file ]</code>: 如果 file 存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -b file ]</code>: 如果 file 存在并且是一个块(设备)文件，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -c file ]</code>: 如果 file 存在并且是一个字符(设备)文件，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -d file ]</code>: 如果 file 存在并且是一个目录，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -e file ]</code>: 如果 file 存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -f file ]</code>: 如果 file 存在并且是一个普通文件，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -g file ]</code>: 如果 file 存在并且设置了组 ID，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -G file ]</code>: 如果 file 存在并且属于有效的组 ID，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -h file ]</code>: 如果 file 存在并且是符号链接，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -k file ]</code>: 如果 file 存在并且设置了它的“sticky bit”，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -L file ]</code>: 如果 file 存在并且是一个符号链接，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -N file ]</code>: 如果 file 存在并且自上次读取后已被修改，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -O file ]</code>: 如果 file 存在并且属于有效的用户 ID，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -p file ]</code>: 如果 file 存在并且是一个命名管道，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -r file ]</code>: 如果 file 存在并且可读(当前用户有可读权限)，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -s file ]</code>: 如果 file 存在且其长度大于零，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -S file ]</code>: 如果 file 存在且是一个网络 socket，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -t fd ]</code>: 如果 fd 是一个文件描述符，并且重定向到终端，则为 <code v-pre>true</code>。这可以用来判断是否重定向了标准输入／输出错误。</li>\n<li><code v-pre>[ -u file ]</code>: 如果 file 存在并且设置了 setuid 位，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -w file ]</code>: 如果 file 存在并且可写(当前用户拥有可写权限)，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ -x file ]</code>: 如果 file 存在并且可执行(有效用户有执行／搜索权限)，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ file1 -nt file2 ]</code>: 如果 FILE1 比 FILE2 的更新时间最近，或者 FILE1 存在而 FILE2 不存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ file1 -ot file2 ]</code>: 如果 FILE1 比 FILE2 的更新时间更旧，或者 FILE2 存在而 FILE1 不存在，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ FILE1 -ef FILE2 ]</code>: 如果 FILE1 和 FILE2 引用相同的设备和 inode 编号，则为 <code v-pre>true</code>。</li>\n</ul>\n<p>下面是一个示例。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">~/.bashrc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is a regular file.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is a directory.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-r</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is readable.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-w</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is writable.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-x</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is executable/searchable.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> does not exist\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面代码中，<code v-pre>$FILE</code> 要放在双引号之中。这样可以防止 <code v-pre>$FILE</code> 为空，因为这时 <code v-pre>[ -e ]</code> 会判断为真。而放在双引号之中，返回的就总是一个空字符串，<code v-pre>[ -e &quot;&quot; ]</code> 会判断为伪。</p>\n<h3 id=\"字符串判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#字符串判断\"><span>字符串判断</span></a></h3>\n<p>以下表达式用来判断字符串。</p>\n<ul>\n<li><code v-pre>[ string ]</code>: 如果 <code v-pre>string</code> 不为空(长度大于 0)，则判断为真。</li>\n<li><code v-pre>[ -n string ]</code>: 如果字符串 <code v-pre>string</code> 的长度大于零，则判断为真。</li>\n<li><code v-pre>[ -z string ]</code>: 如果字符串 <code v-pre>string</code> 的长度为零，则判断为真。</li>\n<li><code v-pre>[ string1 = string2 ]</code>: 如果 <code v-pre>string1</code> 和 <code v-pre>string2</code> 相同，则判断为真。</li>\n<li><code v-pre>[ string1 == string2 ]</code> 等同于 <code v-pre>[ string1 = string2 ]</code>。</li>\n<li><code v-pre>[ string1 != string2 ]</code>: 如果 <code v-pre>string1</code> 和 <code v-pre>string2</code> 不相同，则判断为真。</li>\n<li><code v-pre>[ string1 '&gt;' string2 ]</code>: 如果按照字典顺序 <code v-pre>string1</code> 排列在 <code v-pre>string2</code> 之后，则判断为真。</li>\n<li><code v-pre>[ string1 '&lt;' string2 ]</code>: 如果按照字典顺序 <code v-pre>string1</code> 排列在 <code v-pre>string2</code> 之前，则判断为真。</li>\n</ul>\n<p>注意，<code v-pre>test</code> 命令内部的 <code v-pre>&gt;</code> 和 <code v-pre>&lt;</code>，必须用引号引起来(或者是用反斜杠转义)。否则，它们会被 shell 解释为重定向操作符。</p>\n<p>下面是一个示例。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">ANSWER</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">maybe</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-z</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"There is no answer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"yes\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is YES.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"no\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is NO.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">elif</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$ANSWER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"maybe\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is MAYBE.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"The answer is UNKNOWN.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面代码中，首先确定 <code v-pre>$ANSWER</code> 字符串是否为空。如果为空，就终止脚本，并把退出状态设为 <code v-pre>1</code>。注意，这里的 <code v-pre>echo</code> 命令把错误信息 <code v-pre>There is no answer.</code> 重定向到标准错误，这是处理错误信息的常用方法。如果 <code v-pre>$ANSWER</code> 字符串不为空，就判断它的值是否等于 <code v-pre>yes</code>、<code v-pre>no</code> 或者 <code v-pre>maybe</code>。</p>\n<p>注意，字符串判断时，变量要放在双引号之中，比如 <code v-pre>[ -n &quot;$COUNT&quot; ]</code>，否则变量替换成字符串以后，<code v-pre>test</code> 命令可能会报错，提示参数过多。另外，如果不放在双引号之中，变量为空时，命令会变成 <code v-pre>[ -n ]</code>，这时会判断为真。如果放在双引号之中，<code v-pre>[ -n &quot;&quot; ]</code> 就判断为伪。</p>\n<h3 id=\"整数判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#整数判断\"><span>整数判断</span></a></h3>\n<p>下面的表达式用于判断整数。</p>\n<ul>\n<li><code v-pre>[ integer1 -eq integer2 ]</code>: 如果 <code v-pre>integer1</code> 等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -ne integer2 ]</code>: 如果 <code v-pre>integer1</code> 不等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -le integer2 ]</code>: 如果 <code v-pre>integer1</code> 小于或等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -lt integer2 ]</code>: 如果 <code v-pre>integer1</code> 小于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -ge integer2 ]</code>: 如果 <code v-pre>integer1</code> 大于或等于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n<li><code v-pre>[ integer1 -gt integer2 ]</code>: 如果 <code v-pre>integer1</code> 大于 <code v-pre>integer2</code>，则为 <code v-pre>true</code>。</li>\n</ul>\n<p>下面是一个用法的例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">-5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-z</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is empty.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -eq</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is zero.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -lt</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is negative.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is positive.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ $((</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> %</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)) </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-eq</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is even.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is odd.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，先判断变量 <code v-pre>$INT</code> 是否为空，然后判断是否为 <code v-pre>0</code>，接着判断正负，最后通过求余数判断奇偶。</p>\n<h3 id=\"正则判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#正则判断\"><span>正则判断</span></a></h3>\n<p><code v-pre>[[ expression ]]</code> 这种判断形式，支持正则表达式。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ string1 </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> regex ]]</span></span></code></pre>\n</div><p>上面的语法中，<code v-pre>regex</code> 是一个正则表示式，<code v-pre>=~</code> 是正则比较运算符。</p>\n<p>下面是一个例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">-5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^-?[0-9]+$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is an integer.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is not an integer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面代码中，先判断变量 <code v-pre>INT</code> 的字符串形式，是否满足 <code v-pre>^-?[0-9]+$</code> 的正则模式，如果满足就表明它是一个整数。</p>\n<h3 id=\"test-判断的逻辑运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#test-判断的逻辑运算\"><span>test 判断的逻辑运算</span></a></h3>\n<p>通过逻辑运算，可以把多个 <code v-pre>test</code> 判断表达式结合起来，创造更复杂的判断。三种逻辑运算 <code v-pre>AND</code>，<code v-pre>OR</code>，和 <code v-pre>NOT</code>，都有自己的专用符号。</p>\n<ul>\n<li><code v-pre>AND</code> 运算: 符号 <code v-pre>&amp;&amp;</code>，也可使用参数 <code v-pre>-a</code>。</li>\n<li><code v-pre>OR</code> 运算: 符号 <code v-pre>||</code>，也可使用参数 <code v-pre>-o</code>。</li>\n<li><code v-pre>NOT</code> 运算: 符号 <code v-pre>!</code>。</li>\n</ul>\n<p>下面是一个 <code v-pre>AND</code> 的例子，判断整数是否在某个范围之内。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">MIN_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">MAX_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">100</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">50</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^-?[0-9]+$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -ge</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MIN_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> &#x26;&#x26;</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -le</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MAX_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is within </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MIN_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MAX_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is out of range.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is not an integer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，<code v-pre>&amp;&amp;</code> 用来连接两个判断条件: 大于等于 <code v-pre>$MIN_VAL</code>，并且小于等于 <code v-pre>$MAX_VAL</code>。</p>\n<p>使用否定操作符 <code v-pre>!</code> 时，最好用圆括号确定转义的范围。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">!</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> \\(</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -ge</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MIN_VAL</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -a</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -le</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $MAX_VAL</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> \\)</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is outside </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MIN_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$MAX_VAL</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is in range.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>test</code> 命令内部使用的圆括号，必须使用引号或者转义，否则会被 Bash 解释。</p>\n<h3 id=\"算术判断\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#算术判断\"><span>算术判断</span></a></h3>\n<p>Bash 还提供了 <code v-pre>((...))</code> 作为算术条件，进行算术运算的判断。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\">3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ></span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"true\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面代码执行后，会打印出 <code v-pre>true</code>。</p>\n<p>注意，算术判断不需要使用 <code v-pre>test</code> 命令，而是直接使用 <code v-pre>((...))</code> 结构。这个结构的返回值，决定了判断的真伪。</p>\n<p>如果算术计算的结果是非零值，则表示判断成立。这一点跟命令的返回值正好相反，需要小心。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((1)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"It is true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">It</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> true</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((0)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"It is true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"it is false.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">It</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>((1))</code> 表示判断成立，<code v-pre>((0))</code> 表示判断不成立。</p>\n<p>算术条件 <code v-pre>((...))</code> 也可以用于变量赋值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ));</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> echo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"foo is </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 5</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>(( foo = 5 ))</code> 完成了两件事情。首先把 <code v-pre>5</code> 赋值给变量 <code v-pre>foo</code>，然后根据返回值 <code v-pre>5</code>，判断条件为真。</p>\n<p>注意，赋值语句返回等号右边的值，如果返回的是 <code v-pre>0</code>，则判断为假。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">foo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ));</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> echo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"It is true.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">;</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> echo </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"It is false.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">It</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> false</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.</span></span></code></pre>\n</div><p>下面是用算术条件改写的数值判断脚本。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">-5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$INT</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^-?[0-9]+$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is zero.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> &#x3C;</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is negative.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is positive.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (( ((</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">INT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> %</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)) == 0)); </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is even.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">      echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is odd.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">  fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"INT is not an integer.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>只要是算术表达式，都能用于 <code v-pre>((...))</code> 语法，详见 <RouteLink to=\"/linux/bash/arithmetic.html\">Bash 的算术运算</RouteLink> 一章。</p>\n<h3 id=\"普通命令的逻辑运算\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#普通命令的逻辑运算\"><span>普通命令的逻辑运算</span></a></h3>\n<p>如果 <code v-pre>if</code> 结构使用的不是 <code v-pre>test</code> 命令，而是普通命令，比如上一节的 <code v-pre>((...))</code> 算术运算，或者 <code v-pre>test</code> 命令与普通命令混用，那么可以使用 Bash 的命令控制操作符 <code v-pre>&amp;&amp;</code>(AND)和 <code v-pre>||</code>(OR)，进行多个命令的逻辑运算。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> || </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">command2</span></span></code></pre>\n</div><p>对于 <code v-pre>&amp;&amp;</code> 操作符，先执行 <code v-pre>command1</code>，只有 <code v-pre>command1</code> 执行成功后， 才会执行 <code v-pre>command2</code>。对于 <code v-pre>||</code> 操作符，先执行 <code v-pre>command1</code>，只有 <code v-pre>command1</code> 执行失败后， 才会执行 <code v-pre>command2</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">mkdir</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> temp</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">cd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> temp</span></span></code></pre>\n</div><p>上面的命令会创建一个名为 <code v-pre>temp</code> 的目录，执行成功后，才会执行第二个命令，进入这个目录。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-d</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> temp ] || </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">mkdir</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> temp</span></span></code></pre>\n</div><p>上面的命令会测试目录 <code v-pre>temp</code> 是否存在，如果不存在，就会执行第二个命令，创建这个目录。这种写法非常有助于在脚本中处理错误。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">!</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -d</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> temp ] &#x26;&#x26; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span></code></pre>\n</div><p>上面的命令中，如果 <code v-pre>temp</code> 子目录不存在，脚本会终止，并且返回值为 <code v-pre>1</code>。</p>\n<p>下面就是 <code v-pre>if</code> 与 <code v-pre>&amp;&amp;</code> 结合使用的写法。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ condition ] &#x26;&#x26; [ condition ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  command</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>下面是一个示例。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#! /bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">filename</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">$1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">word1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">$2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">word2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">$3</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> grep</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $word1</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $filename</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $word2</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $filename</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$word1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> and </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$word2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> are both in </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$filename</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面的例子只有在指定文件里面，同时存在搜索词 <code v-pre>word1</code> 和 <code v-pre>word2</code>，就会执行 <code v-pre>if</code> 的命令部分。</p>\n<p>下面的示例演示如何将一个 <code v-pre>&amp;&amp;</code> 判断表达式，改写成对应的 <code v-pre>if</code> 结构。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]] &#x26;&#x26; </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">cd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">rm</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 等同于</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">!</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> -d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"No such directory: '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ! </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">cd</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Cannot cd to '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$dir_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ! </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">rm</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\"> *</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"File deletion failed. Check results\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h2 id=\"case-结构\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#case-结构\"><span>case 结构</span></a></h2>\n<p><code v-pre>case</code> 结构用于多值判断，可以为每个值指定对应的命令，跟包含多个 <code v-pre>elif</code> 的 <code v-pre>if</code> 结构等价，但是语义更好。它的语法如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> expression </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  pattern</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    commands</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  pattern</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> )</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    commands</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  ...</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n</div><p>上面代码中，<code v-pre>expression</code> 是一个表达式，<code v-pre>pattern</code> 是表达式的值或者一个模式，可以有多条，用来匹配多个值，每条以两个分号 (<code v-pre>;</code>) 结尾。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一个 1 到 3 之间的数字(包含两端)> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $character</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  * ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 输入不符合要求</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，最后一条匹配语句的模式是 <code v-pre>*</code>，这个通配符可以匹配其他字符和没有输入字符的情况，类似 <code v-pre>if</code> 的 <code v-pre>else</code> 部分。</p>\n<p>下面是另一个例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">OS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">uname</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -s</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$OS</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  FreeBSD</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is FreeBSD\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  Darwin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is Mac OSX\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  AIX</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is AIX\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  Minix</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is Minix\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  Linux</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"This is Linux\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  *) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Failed to identify this OS\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面的例子判断当前是什么操作系统。</p>\n<p><code v-pre>case</code> 的匹配模式可以使用各种通配符，下面是一些例子。</p>\n<ul>\n<li><code v-pre>a)</code>: 匹配 <code v-pre>a</code>。</li>\n<li><code v-pre>a|b)</code>: 匹配 <code v-pre>a</code> 或 <code v-pre>b</code>。</li>\n<li><code v-pre>[[:alpha:]])</code>: 匹配单个字母。</li>\n<li><code v-pre>???)</code>: 匹配 3 个字符的单词。</li>\n<li><code v-pre>*.txt)</code>: 匹配 <code v-pre>.txt</code> 结尾。</li>\n<li><code v-pre>*)</code>: 匹配任意输入，通过作为 <code v-pre>case</code> 结构的最后一个模式。</li>\n</ul>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一个字母或数字 > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $character</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:lower:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> |</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\"> [[:upper:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ) </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入了字母 </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">                              ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [0-9]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> )                     </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入了数字 </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$character</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">                              ;;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  * )                         </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入不符合要求\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，使用通配符 <code v-pre>[[:lower:]] | [[:upper:]]</code> 匹配字母，<code v-pre>[0-9]</code> 匹配数字。</p>\n<p>Bash 4.0 之前，<code v-pre>case</code> 结构只能匹配一个条件，然后就会退出 <code v-pre>case</code> 结构。Bash 4.0 之后，允许匹配多个条件，这时可以用 <code v-pre>;;&amp;</code> 终止每个条件块。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># test.sh</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Type a character > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">case</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $REPLY</span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\"> in</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:upper:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is upper case.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:lower:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is lower case.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:alpha:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is alphabetic.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:digit:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a digit.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:graph:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a visible character.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:punct:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a punctuation symbol.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:space:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)    </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a whitespace character.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">  [[:xdigit:]]</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)   </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"'</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">' is a hexadecimal digit.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ;;</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#E06C75\">&#x26;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">esac</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>执行上面的脚本，会得到下面的结果。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test.sh</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Type</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> lower</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> case.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> alphabetic.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> visible</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> character.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">'a'</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> hexadecimal</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> digit.</span></span></code></pre>\n</div><p>可以看到条件语句结尾添加了 <code v-pre>;;&amp;</code> 以后，在匹配一个条件之后，并没有退出 <code v-pre>case</code> 结构，而是继续判断下一个条件。</p>\n<h2 id=\"参考链接\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参考链接\"><span>参考链接</span></a></h2>\n<ul>\n<li><a href=\"http://linuxcommand.org/tlcl.php\" target=\"_blank\" rel=\"noopener noreferrer\">The Linux command-line</a>, William Shotts</li>\n<li><a href=\"https://www.pcwdld.com/linux-commands-cheat-sheet\" target=\"_blank\" rel=\"noopener noreferrer\">Linux Commands Cheat Sheet</a> (一个很简短的 CheatSheet)</li>\n</ul>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n本章介绍 Bash 脚本的条件判断语法。\n\n<!-- more -->\n\n## if 结构\n\n`if` 是最常用的条件判断结构，只有符合给定条件时，才会执行指定的命令。它的语法如下。\n\n```bash\nif commands; then\n  commands\n[elif commands; then\n  commands...]\n[else\n  commands]\nfi\n```\n\n这个命令分成三个部分: `if`、`elif` 和 `else`。其中，后两个部分是可选的。\n\n`if` 关键字后面是主要的判断条件，`elif` 用来添加在主条件不成立时的其他判断条件，`else` 则是所有条件都不成立时要执行的部分。\n\n```bash\nif test $USER = \"foo\"; then\n  echo \"Hello foo.\"\nelse\n  echo \"You are not foo.\"\nfi\n```\n\n上面的例子中，判断条件是环境变量 `$USER` 是否等于 `foo`，如果等于就输出 `Hello foo.`，否则输出其他内容。\n\n`if` 和 `then` 写在同一行时，需要分号分隔。分号是 Bash 的命令分隔符。它们也可以写成两行，这时不需要分号。\n\n```bash\nif true\nthen\n  echo 'hello world'\nfi\n\nif false\nthen\n  echo 'it is false' # 本行不会执行\nfi\n```\n\n上面的例子中，`true` 和 `false` 是两个特殊命令，前者代表操作成功，后者代表操作失败。`if true` 意味着命令部分总是会执行，`if false` 意味着命令部分永远不会执行。\n\n除了多行的写法，`if` 结构也可以写成单行。\n\n```bash\n$ if true; then echo 'hello world'; fi\nhello world\n\n$ if false; then echo \"It's true.\"; fi\n```\n\n注意，`if` 关键字后面也可以是一条命令，该条命令执行成功(返回值 `0`)，就意味着判断条件成立。\n\n```bash\n$ if echo 'hi'; then echo 'hello world'; fi\nhi\nhello world\n```\n\n上面命令中，`if` 后面是一条命令 `echo 'hi'`。该命令会执行，如果返回值是 `0`，则执行 `then` 的部分。\n\n`if` 后面可以跟任意数量的命令。这时，所有命令都会执行，但是判断真伪只看最后一个命令，即使前面所有命令都失败，只要最后一个命令返回 `0`，就会执行 `then` 的部分。\n\n```bash\n$ if false; true; then echo 'hello world'; fi\nhello world\n```\n\n上面例子中，`if` 后面有两条命令 (`false;true;`)，第二条命令 (`true`) 决定了 `then` 的部分是否会执行。\n\n`elif` 部分可以有多个。\n\n```bash\n#!/bin/bash\n\necho -n \"输入一个 1 到 3 之间的数字(包含两端)> \"\nread character\nif [ \"$character\" = \"1\" ]; then\n    echo 1\nelif [ \"$character\" = \"2\" ]; then\n    echo 2\nelif [ \"$character\" = \"3\" ]; then\n    echo 3\nelse\n    echo 输入不符合要求\nfi\n```\n\n上面例子中，如果用户输入 `3`，就会连续判断 3 次。\n\n## test 命令\n\n`if` 结构的判断条件，一般使用 `test` 命令，有三种形式。\n\n```bash\n# 写法一\ntest expression\n\n# 写法二\n[ expression ]\n\n# 写法三\n[[ expression ]]\n```\n\n上面三种形式是等价的，但是第三种形式还支持正则判断，前两种不支持。\n\n上面的 `expression` 是一个表达式。这个表达式为真，`test` 命令执行成功(返回值为 `0`)；表达式为伪，`test` 命令执行失败(返回值为 `1`)。注意，第二种和第三种写法，`[` 和 `]` 与内部的表达式之间必须有空格。\n\n```bash\n$ test -f /etc/hosts\n$ echo $?\n0\n\n$ [ -f /etc/hosts ]\n$  echo $?\n0\n```\n\n上面的例子中，`test` 命令采用两种写法，判断 `/etc/hosts` 文件是否存在，这两种写法是等价的。命令执行后，返回值为 `0`，表示该文件确实存在。\n\n实际上，`[` 这个字符是 `test` 命令的一种简写形式，可以看作是一个独立的命令，这解释了为什么它后面必须有空格。\n\n下面把 `test` 命令的三种形式，用在 `if` 结构中，判断一个文件是否存在。\n\n```bash\n# 写法一\nif test -e /tmp/foo.txt ; then\n  echo \"Found foo.txt\"\nfi\n\n# 写法二\nif [ -e /tmp/foo.txt ] ; then\n  echo \"Found foo.txt\"\nfi\n\n# 写法三\nif [[ -e /tmp/foo.txt ]] ; then\n  echo \"Found foo.txt\"\nfi\n```\n\n## 判断表达式\n\n`if` 关键字后面，跟的是一个命令。这个命令可以是 `test` 命令，也可以是其他命令。命令的返回值为 `0` 表示判断成立，否则表示不成立。因为这些命令主要是为了得到返回值，所以可以视为表达式。\n\n常用的判断表达式有下面这些。\n\n### 文件判断\n\n以下表达式用来判断文件状态。\n\n- `[ -a file ]`: 如果 file 存在，则为 `true`。\n- `[ -b file ]`: 如果 file 存在并且是一个块(设备)文件，则为 `true`。\n- `[ -c file ]`: 如果 file 存在并且是一个字符(设备)文件，则为 `true`。\n- `[ -d file ]`: 如果 file 存在并且是一个目录，则为 `true`。\n- `[ -e file ]`: 如果 file 存在，则为 `true`。\n- `[ -f file ]`: 如果 file 存在并且是一个普通文件，则为 `true`。\n- `[ -g file ]`: 如果 file 存在并且设置了组 ID，则为 `true`。\n- `[ -G file ]`: 如果 file 存在并且属于有效的组 ID，则为 `true`。\n- `[ -h file ]`: 如果 file 存在并且是符号链接，则为 `true`。\n- `[ -k file ]`: 如果 file 存在并且设置了它的“sticky bit”，则为 `true`。\n- `[ -L file ]`: 如果 file 存在并且是一个符号链接，则为 `true`。\n- `[ -N file ]`: 如果 file 存在并且自上次读取后已被修改，则为 `true`。\n- `[ -O file ]`: 如果 file 存在并且属于有效的用户 ID，则为 `true`。\n- `[ -p file ]`: 如果 file 存在并且是一个命名管道，则为 `true`。\n- `[ -r file ]`: 如果 file 存在并且可读(当前用户有可读权限)，则为 `true`。\n- `[ -s file ]`: 如果 file 存在且其长度大于零，则为 `true`。\n- `[ -S file ]`: 如果 file 存在且是一个网络 socket，则为 `true`。\n- `[ -t fd ]`: 如果 fd 是一个文件描述符，并且重定向到终端，则为 `true`。这可以用来判断是否重定向了标准输入／输出错误。\n- `[ -u file ]`: 如果 file 存在并且设置了 setuid 位，则为 `true`。\n- `[ -w file ]`: 如果 file 存在并且可写(当前用户拥有可写权限)，则为 `true`。\n- `[ -x file ]`: 如果 file 存在并且可执行(有效用户有执行／搜索权限)，则为 `true`。\n- `[ file1 -nt file2 ]`: 如果 FILE1 比 FILE2 的更新时间最近，或者 FILE1 存在而 FILE2 不存在，则为 `true`。\n- `[ file1 -ot file2 ]`: 如果 FILE1 比 FILE2 的更新时间更旧，或者 FILE2 存在而 FILE1 不存在，则为 `true`。\n- `[ FILE1 -ef FILE2 ]`: 如果 FILE1 和 FILE2 引用相同的设备和 inode 编号，则为 `true`。\n\n下面是一个示例。\n\n```bash\n#!/bin/bash\n\nFILE=~/.bashrc\n\nif [ -e \"$FILE\" ]; then\n  if [ -f \"$FILE\" ]; then\n    echo \"$FILE is a regular file.\"\n  fi\n  if [ -d \"$FILE\" ]; then\n    echo \"$FILE is a directory.\"\n  fi\n  if [ -r \"$FILE\" ]; then\n    echo \"$FILE is readable.\"\n  fi\n  if [ -w \"$FILE\" ]; then\n    echo \"$FILE is writable.\"\n  fi\n  if [ -x \"$FILE\" ]; then\n    echo \"$FILE is executable/searchable.\"\n  fi\nelse\n  echo \"$FILE does not exist\"\n  exit 1\nfi\n```\n\n上面代码中，`$FILE` 要放在双引号之中。这样可以防止 `$FILE` 为空，因为这时 `[ -e ]` 会判断为真。而放在双引号之中，返回的就总是一个空字符串，`[ -e \"\" ]` 会判断为伪。\n\n### 字符串判断\n\n以下表达式用来判断字符串。\n\n- `[ string ]`: 如果 `string` 不为空(长度大于 0)，则判断为真。\n- `[ -n string ]`: 如果字符串 `string` 的长度大于零，则判断为真。\n- `[ -z string ]`: 如果字符串 `string` 的长度为零，则判断为真。\n- `[ string1 = string2 ]`: 如果 `string1` 和 `string2` 相同，则判断为真。\n- `[ string1 == string2 ]` 等同于 `[ string1 = string2 ]`。\n- `[ string1 != string2 ]`: 如果 `string1` 和 `string2` 不相同，则判断为真。\n- `[ string1 '>' string2 ]`: 如果按照字典顺序 `string1` 排列在 `string2` 之后，则判断为真。\n- `[ string1 '<' string2 ]`: 如果按照字典顺序 `string1` 排列在 `string2` 之前，则判断为真。\n\n注意，`test` 命令内部的 `>` 和 `<`，必须用引号引起来(或者是用反斜杠转义)。否则，它们会被 shell 解释为重定向操作符。\n\n下面是一个示例。\n\n```bash\n#!/bin/bash\n\nANSWER=maybe\n\nif [ -z \"$ANSWER\" ]; then\n  echo \"There is no answer.\" >&2\n  exit 1\nfi\nif [ \"$ANSWER\" = \"yes\" ]; then\n  echo \"The answer is YES.\"\nelif [ \"$ANSWER\" = \"no\" ]; then\n  echo \"The answer is NO.\"\nelif [ \"$ANSWER\" = \"maybe\" ]; then\n  echo \"The answer is MAYBE.\"\nelse\n  echo \"The answer is UNKNOWN.\"\nfi\n```\n\n上面代码中，首先确定 `$ANSWER` 字符串是否为空。如果为空，就终止脚本，并把退出状态设为 `1`。注意，这里的 `echo` 命令把错误信息 `There is no answer.` 重定向到标准错误，这是处理错误信息的常用方法。如果 `$ANSWER` 字符串不为空，就判断它的值是否等于 `yes`、`no` 或者 `maybe`。\n\n注意，字符串判断时，变量要放在双引号之中，比如 `[ -n \"$COUNT\" ]`，否则变量替换成字符串以后，`test` 命令可能会报错，提示参数过多。另外，如果不放在双引号之中，变量为空时，命令会变成 `[ -n ]`，这时会判断为真。如果放在双引号之中，`[ -n \"\" ]` 就判断为伪。\n\n### 整数判断\n\n下面的表达式用于判断整数。\n\n- `[ integer1 -eq integer2 ]`: 如果 `integer1` 等于 `integer2`，则为 `true`。\n- `[ integer1 -ne integer2 ]`: 如果 `integer1` 不等于 `integer2`，则为 `true`。\n- `[ integer1 -le integer2 ]`: 如果 `integer1` 小于或等于 `integer2`，则为 `true`。\n- `[ integer1 -lt integer2 ]`: 如果 `integer1` 小于 `integer2`，则为 `true`。\n- `[ integer1 -ge integer2 ]`: 如果 `integer1` 大于或等于 `integer2`，则为 `true`。\n- `[ integer1 -gt integer2 ]`: 如果 `integer1` 大于 `integer2`，则为 `true`。\n\n下面是一个用法的例子。\n\n```bash\n#!/bin/bash\n\nINT=-5\n\nif [ -z \"$INT\" ]; then\n  echo \"INT is empty.\" >&2\n  exit 1\nfi\nif [ $INT -eq 0 ]; then\n  echo \"INT is zero.\"\nelse\n  if [ $INT -lt 0 ]; then\n    echo \"INT is negative.\"\n  else\n    echo \"INT is positive.\"\n  fi\n  if [ $((INT % 2)) -eq 0 ]; then\n    echo \"INT is even.\"\n  else\n    echo \"INT is odd.\"\n  fi\nfi\n```\n\n上面例子中，先判断变量 `$INT` 是否为空，然后判断是否为 `0`，接着判断正负，最后通过求余数判断奇偶。\n\n### 正则判断\n\n`[[ expression ]]` 这种判断形式，支持正则表达式。\n\n```bash\n[[ string1 =~ regex ]]\n```\n\n上面的语法中，`regex` 是一个正则表示式，`=~` 是正则比较运算符。\n\n下面是一个例子。\n\n```bash\n#!/bin/bash\n\nINT=-5\n\nif [[ \"$INT\" =~ ^-?[0-9]+$ ]]; then\n  echo \"INT is an integer.\"\n  exit 0\nelse\n  echo \"INT is not an integer.\" >&2\n  exit 1\nfi\n```\n\n上面代码中，先判断变量 `INT` 的字符串形式，是否满足 `^-?[0-9]+$` 的正则模式，如果满足就表明它是一个整数。\n\n### test 判断的逻辑运算\n\n通过逻辑运算，可以把多个 `test` 判断表达式结合起来，创造更复杂的判断。三种逻辑运算 `AND`，`OR`，和 `NOT`，都有自己的专用符号。\n\n- `AND` 运算: 符号 `&&`，也可使用参数 `-a`。\n- `OR` 运算: 符号 `||`，也可使用参数 `-o`。\n- `NOT` 运算: 符号 `!`。\n\n下面是一个 `AND` 的例子，判断整数是否在某个范围之内。\n\n```bash\n#!/bin/bash\n\nMIN_VAL=1\nMAX_VAL=100\n\nINT=50\n\nif [[ \"$INT\" =~ ^-?[0-9]+$ ]]; then\n  if [[ $INT -ge $MIN_VAL && $INT -le $MAX_VAL ]]; then\n    echo \"$INT is within $MIN_VAL to $MAX_VAL.\"\n  else\n    echo \"$INT is out of range.\"\n  fi\nelse\n  echo \"INT is not an integer.\" >&2\n  exit 1\nfi\n```\n\n上面例子中，`&&` 用来连接两个判断条件: 大于等于 `$MIN_VAL`，并且小于等于 `$MAX_VAL`。\n\n使用否定操作符 `!` 时，最好用圆括号确定转义的范围。\n\n```bash\nif [ ! \\( $INT -ge $MIN_VAL -a $INT -le $MAX_VAL \\) ]; then\n    echo \"$INT is outside $MIN_VAL to $MAX_VAL.\"\nelse\n    echo \"$INT is in range.\"\nfi\n```\n\n上面例子中，`test` 命令内部使用的圆括号，必须使用引号或者转义，否则会被 Bash 解释。\n\n### 算术判断\n\nBash 还提供了 `((...))` 作为算术条件，进行算术运算的判断。\n\n```bash\nif ((3 > 2)); then\n  echo \"true\"\nfi\n```\n\n上面代码执行后，会打印出 `true`。\n\n注意，算术判断不需要使用 `test` 命令，而是直接使用 `((...))` 结构。这个结构的返回值，决定了判断的真伪。\n\n如果算术计算的结果是非零值，则表示判断成立。这一点跟命令的返回值正好相反，需要小心。\n\n```bash\n$ if ((1)); then echo \"It is true.\"; fi\nIt is true.\n$ if ((0)); then echo \"It is true.\"; else echo \"it is false.\"; fi\nIt is false.\n```\n\n上面例子中，`((1))` 表示判断成立，`((0))` 表示判断不成立。\n\n算术条件 `((...))` 也可以用于变量赋值。\n\n```bash\n$ if (( foo = 5 ));then echo \"foo is $foo\"; fi\nfoo is 5\n```\n\n上面例子中，`(( foo = 5 ))` 完成了两件事情。首先把 `5` 赋值给变量 `foo`，然后根据返回值 `5`，判断条件为真。\n\n注意，赋值语句返回等号右边的值，如果返回的是 `0`，则判断为假。\n\n```bash\n$ if (( foo = 0 ));then echo \"It is true.\";else echo \"It is false.\"; fi\nIt is false.\n```\n\n下面是用算术条件改写的数值判断脚本。\n\n```bash\n#!/bin/bash\n\nINT=-5\n\nif [[ \"$INT\" =~ ^-?[0-9]+$ ]]; then\n  if ((INT == 0)); then\n    echo \"INT is zero.\"\n  else\n    if ((INT < 0)); then\n      echo \"INT is negative.\"\n    else\n      echo \"INT is positive.\"\n    fi\n    if (( ((INT % 2)) == 0)); then\n      echo \"INT is even.\"\n    else\n      echo \"INT is odd.\"\n    fi\n  fi\nelse\n  echo \"INT is not an integer.\" >&2\n  exit 1\nfi\n```\n\n只要是算术表达式，都能用于 `((...))` 语法，详见 [Bash 的算术运算](arithmetic.md) 一章。\n\n### 普通命令的逻辑运算\n\n如果 `if` 结构使用的不是 `test` 命令，而是普通命令，比如上一节的 `((...))` 算术运算，或者 `test` 命令与普通命令混用，那么可以使用 Bash 的命令控制操作符 `&&`(AND)和 `||`(OR)，进行多个命令的逻辑运算。\n\n```bash\ncommand1 && command2\ncommand1 || command2\n```\n\n对于 `&&` 操作符，先执行 `command1`，只有 `command1` 执行成功后， 才会执行 `command2`。对于 `||` 操作符，先执行 `command1`，只有 `command1` 执行失败后， 才会执行 `command2`。\n\n```bash\nmkdir temp && cd temp\n```\n\n上面的命令会创建一个名为 `temp` 的目录，执行成功后，才会执行第二个命令，进入这个目录。\n\n```bash\n[ -d temp ] || mkdir temp\n```\n\n上面的命令会测试目录 `temp` 是否存在，如果不存在，就会执行第二个命令，创建这个目录。这种写法非常有助于在脚本中处理错误。\n\n```bash\n[ ! -d temp ] && exit 1\n```\n\n上面的命令中，如果 `temp` 子目录不存在，脚本会终止，并且返回值为 `1`。\n\n下面就是 `if` 与 `&&` 结合使用的写法。\n\n```bash\nif [ condition ] && [ condition ]; then\n  command\nfi\n```\n\n下面是一个示例。\n\n```bash\n#! /bin/bash\n\nfilename=$1\nword1=$2\nword2=$3\n\nif grep $word1 $filename && grep $word2 $filename\nthen\n  echo \"$word1 and $word2 are both in $filename.\"\nfi\n```\n\n上面的例子只有在指定文件里面，同时存在搜索词 `word1` 和 `word2`，就会执行 `if` 的命令部分。\n\n下面的示例演示如何将一个 `&&` 判断表达式，改写成对应的 `if` 结构。\n\n```bash\n[[ -d \"$dir_name\" ]] && cd \"$dir_name\" && rm *\n\n# 等同于\n\nif [[ ! -d \"$dir_name\" ]]; then\n  echo \"No such directory: '$dir_name'\" >&2\n  exit 1\nfi\nif ! cd \"$dir_name\"; then\n  echo \"Cannot cd to '$dir_name'\" >&2\n  exit 1\nfi\nif ! rm *; then\n  echo \"File deletion failed. Check results\" >&2\n  exit 1\nfi\n```\n\n## case 结构\n\n`case` 结构用于多值判断，可以为每个值指定对应的命令，跟包含多个 `elif` 的 `if` 结构等价，但是语义更好。它的语法如下。\n\n```bash\ncase expression in\n  pattern )\n    commands ;;\n  pattern )\n    commands ;;\n  ...\nesac\n```\n\n上面代码中，`expression` 是一个表达式，`pattern` 是表达式的值或者一个模式，可以有多条，用来匹配多个值，每条以两个分号 (`;`) 结尾。\n\n```bash\n#!/bin/bash\n\necho -n \"输入一个 1 到 3 之间的数字(包含两端)> \"\nread character\ncase $character in\n  1 ) echo 1\n    ;;\n  2 ) echo 2\n    ;;\n  3 ) echo 3\n    ;;\n  * ) echo 输入不符合要求\nesac\n```\n\n上面例子中，最后一条匹配语句的模式是 `*`，这个通配符可以匹配其他字符和没有输入字符的情况，类似 `if` 的 `else` 部分。\n\n下面是另一个例子。\n\n```bash\n#!/bin/bash\n\nOS=$(uname -s)\n\ncase \"$OS\" in\n  FreeBSD) echo \"This is FreeBSD\" ;;\n  Darwin) echo \"This is Mac OSX\" ;;\n  AIX) echo \"This is AIX\" ;;\n  Minix) echo \"This is Minix\" ;;\n  Linux) echo \"This is Linux\" ;;\n  *) echo \"Failed to identify this OS\" ;;\nesac\n```\n\n上面的例子判断当前是什么操作系统。\n\n`case` 的匹配模式可以使用各种通配符，下面是一些例子。\n\n- `a)`: 匹配 `a`。\n- `a|b)`: 匹配 `a` 或 `b`。\n- `[[:alpha:]])`: 匹配单个字母。\n- `???)`: 匹配 3 个字符的单词。\n- `*.txt)`: 匹配 `.txt` 结尾。\n- `*)`: 匹配任意输入，通过作为 `case` 结构的最后一个模式。\n\n```bash\n#!/bin/bash\n\necho -n \"输入一个字母或数字 > \"\nread character\ncase $character in\n  [[:lower:]] | [[:upper:]] ) echo \"输入了字母 $character\"\n                              ;;\n  [0-9] )                     echo \"输入了数字 $character\"\n                              ;;\n  * )                         echo \"输入不符合要求\"\nesac\n```\n\n上面例子中，使用通配符 `[[:lower:]] | [[:upper:]]` 匹配字母，`[0-9]` 匹配数字。\n\nBash 4.0 之前，`case` 结构只能匹配一个条件，然后就会退出 `case` 结构。Bash 4.0 之后，允许匹配多个条件，这时可以用 `;;&` 终止每个条件块。\n\n```bash\n#!/bin/bash\n# test.sh\n\nread -n 1 -p \"Type a character > \"\necho\ncase $REPLY in\n  [[:upper:]])    echo \"'$REPLY' is upper case.\" ;;&\n  [[:lower:]])    echo \"'$REPLY' is lower case.\" ;;&\n  [[:alpha:]])    echo \"'$REPLY' is alphabetic.\" ;;&\n  [[:digit:]])    echo \"'$REPLY' is a digit.\" ;;&\n  [[:graph:]])    echo \"'$REPLY' is a visible character.\" ;;&\n  [[:punct:]])    echo \"'$REPLY' is a punctuation symbol.\" ;;&\n  [[:space:]])    echo \"'$REPLY' is a whitespace character.\" ;;&\n  [[:xdigit:]])   echo \"'$REPLY' is a hexadecimal digit.\" ;;&\nesac\n```\n\n执行上面的脚本，会得到下面的结果。\n\n```bash\n$ test.sh\nType a character > a\n'a' is lower case.\n'a' is alphabetic.\n'a' is a visible character.\n'a' is a hexadecimal digit.\n```\n\n可以看到条件语句结尾添加了 `;;&` 以后，在匹配一个条件之后，并没有退出 `case` 结构，而是继续判断下一个条件。\n\n## 参考链接\n\n- [The Linux command-line](http://linuxcommand.org/tlcl.php), William Shotts\n- [Linux Commands Cheat Sheet](https://www.pcwdld.com/linux-commands-cheat-sheet) (一个很简短的 CheatSheet)\n","excerpt":"","title":"","headers":[{"level":2,"title":"if 结构","slug":"if-结构","link":"#if-结构","children":[]},{"level":2,"title":"test 命令","slug":"test-命令","link":"#test-命令","children":[]},{"level":2,"title":"判断表达式","slug":"判断表达式","link":"#判断表达式","children":[{"level":3,"title":"文件判断","slug":"文件判断","link":"#文件判断","children":[]},{"level":3,"title":"字符串判断","slug":"字符串判断","link":"#字符串判断","children":[]},{"level":3,"title":"整数判断","slug":"整数判断","link":"#整数判断","children":[]},{"level":3,"title":"正则判断","slug":"正则判断","link":"#正则判断","children":[]},{"level":3,"title":"test 判断的逻辑运算","slug":"test-判断的逻辑运算","link":"#test-判断的逻辑运算","children":[]},{"level":3,"title":"算术判断","slug":"算术判断","link":"#算术判断","children":[]},{"level":3,"title":"普通命令的逻辑运算","slug":"普通命令的逻辑运算","link":"#普通命令的逻辑运算","children":[]}]},{"level":2,"title":"case 结构","slug":"case-结构","link":"#case-结构","children":[]},{"level":2,"title":"参考链接","slug":"参考链接","link":"#参考链接","children":[]}],"links":[{"raw":"arithmetic.md","relative":"linux/bash/arithmetic.md","absolute":"/linux/bash/arithmetic.md"}]}}
