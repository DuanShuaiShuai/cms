{"content":"<p>Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。</p>\n<!-- more -->\n<h2 id=\"工作区-working-directory\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#工作区-working-directory\"><span>工作区(Working Directory)</span></a></h2>\n<p>就是您在电脑里能看到的目录，比如 learngit 文件夹就是一个工作区:</p>\n<h2 id=\"版本库-repository\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#版本库-repository\"><span>版本库(Repository)</span></a></h2>\n<p>工作区有一个隐藏目录.git，这个不算工作区，而是 Git 的版本库。</p>\n<p>Git 的版本库里存了很多东西，其中最重要的就是称为 stage(或者叫 index)的暂存区，还有 Git 为我们自动创建的第一个分支 <code v-pre>master</code>，以及指向 master 的一个指针叫 <code v-pre>HEAD</code>。</p>\n<figure><img src=\"@source/software/git/assets/git3.jpg\" alt=\"版本库图例\" tabindex=\"0\" loading=\"lazy\"><figcaption>版本库图例</figcaption></figure>\n<p>前面讲了我们把文件往 Git 版本库里添加的时候，提交更改，实际上就是把暂存区的所有内容提交到当前分支。我们创建 Git 版本库时，Git 自动为我们创建了唯一一个 <code v-pre>master</code> 分支，所以，现在，<code v-pre>git commit</code> 就是往 master 分支上提交更改。</p>\n<p>您可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。</p>\n<p>先对 readme.txt 做个修改，比如加上一行内容:</p>\n<div class=\"language-md\" data-highlighter=\"shiki\" data-ext=\"md\" data-title=\"md\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">Git is a distributed version control system.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">Git is free software distributed under the GPL.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">Git has a mutable index called stage.</span></span></code></pre>\n</div><p>然后，在工作区新增一个 LICENSE 文本文件(内容随便写)。</p>\n<p>先用 <code v-pre>git status</code> 查看一下状态:</p>\n<div class=\"language-sh line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> status</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">On</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> branch</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> master</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> not</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> staged</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> for</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git add &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> update</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> what</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> will</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> be</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> committed</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git checkout -- &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> discard</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> in</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> working</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> directory</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    modified:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">   readme.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Untracked</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> files:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git add &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> include</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> in</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> what</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> will</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> be</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> committed</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    LICENSE</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">no</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> added</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (use </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"git add\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> and/or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git commit -a\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>Git 非常清楚地告诉我们，readme.txt 被修改了，而 LICENSE 还从来没有被添加过，所以它的状态是 <code v-pre>Untracked</code>。</p>\n<p>现在，使用两次命令 <code v-pre>git add</code>，把 readme.txt 和 LICENSE 都添加后，用 <code v-pre>git status</code> 再查看一下:</p>\n<div class=\"language-sh\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> status</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">On</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> branch</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> master</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> be</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> committed:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git reset HEAD &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> unstage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    new</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">   LICENSE</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    modified:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">   readme.txt</span></span></code></pre>\n</div><p>现在，暂存区的状态就变成这样了:</p>\n<figure><img src=\"@source/software/git/assets/git4.jpg\" alt=\"状态示意图\" tabindex=\"0\" loading=\"lazy\"><figcaption>状态示意图</figcaption></figure>\n<p>所以，<code v-pre>git add</code> 命令实际上就是把要提交的所有修改放到暂存区(Stage)，然后，执行 <code v-pre>git commit</code> 就可以一次性把暂存区的所有修改提交到分支。</p>\n<div class=\"language-sh\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -m</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"understand how stage works\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[master e43a48b] understand how stage works</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> 2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> files</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> changed,</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> insertions</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">+</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> create</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> mode</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 100644</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> LICENSE</span></span></code></pre>\n</div><p>一旦提交后，如果您又没有对工作区做任何修改，那么工作区就是“干净”的:</p>\n<div class=\"language-sh\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> status</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">On</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> branch</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> master</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">nothing</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit,</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> working</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tree</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> clean</span></span></code></pre>\n</div>","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/software/git/working-directory.md","filePathRelative":"software/git/working-directory.md","frontmatter":{"date":"2020-05-05T00:00:00.000Z","title":"工作区和暂存区","icon":"workingDirectory","order":7,"author":"廖雪峰","category":"Git","tag":["Git","软件"],"copyright":"Copyright by 廖雪峰 Edited by Mister.Duan"},"sfcBlocks":{"template":{"type":"template","content":"<template><p>Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。</p>\n<!-- more -->\n<h2 id=\"工作区-working-directory\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#工作区-working-directory\"><span>工作区(Working Directory)</span></a></h2>\n<p>就是您在电脑里能看到的目录，比如 learngit 文件夹就是一个工作区:</p>\n<h2 id=\"版本库-repository\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#版本库-repository\"><span>版本库(Repository)</span></a></h2>\n<p>工作区有一个隐藏目录.git，这个不算工作区，而是 Git 的版本库。</p>\n<p>Git 的版本库里存了很多东西，其中最重要的就是称为 stage(或者叫 index)的暂存区，还有 Git 为我们自动创建的第一个分支 <code v-pre>master</code>，以及指向 master 的一个指针叫 <code v-pre>HEAD</code>。</p>\n<figure><img src=\"@source/software/git/assets/git3.jpg\" alt=\"版本库图例\" tabindex=\"0\" loading=\"lazy\"><figcaption>版本库图例</figcaption></figure>\n<p>前面讲了我们把文件往 Git 版本库里添加的时候，提交更改，实际上就是把暂存区的所有内容提交到当前分支。我们创建 Git 版本库时，Git 自动为我们创建了唯一一个 <code v-pre>master</code> 分支，所以，现在，<code v-pre>git commit</code> 就是往 master 分支上提交更改。</p>\n<p>您可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。</p>\n<p>先对 readme.txt 做个修改，比如加上一行内容:</p>\n<div class=\"language-md\" data-highlighter=\"shiki\" data-ext=\"md\" data-title=\"md\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">Git is a distributed version control system.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">Git is free software distributed under the GPL.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">Git has a mutable index called stage.</span></span></code></pre>\n</div><p>然后，在工作区新增一个 LICENSE 文本文件(内容随便写)。</p>\n<p>先用 <code v-pre>git status</code> 查看一下状态:</p>\n<div class=\"language-sh line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> status</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">On</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> branch</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> master</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> not</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> staged</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> for</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git add &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> update</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> what</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> will</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> be</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> committed</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git checkout -- &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> discard</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> in</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> working</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> directory</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    modified:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">   readme.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Untracked</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> files:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git add &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> include</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> in</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> what</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> will</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> be</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> committed</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    LICENSE</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">no</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> added</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (use </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"git add\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> and/or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git commit -a\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>Git 非常清楚地告诉我们，readme.txt 被修改了，而 LICENSE 还从来没有被添加过，所以它的状态是 <code v-pre>Untracked</code>。</p>\n<p>现在，使用两次命令 <code v-pre>git add</code>，把 readme.txt 和 LICENSE 都添加后，用 <code v-pre>git status</code> 再查看一下:</p>\n<div class=\"language-sh\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> status</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">On</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> branch</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> master</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> be</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> committed:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git reset HEAD &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> unstage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    new</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">   LICENSE</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    modified:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">   readme.txt</span></span></code></pre>\n</div><p>现在，暂存区的状态就变成这样了:</p>\n<figure><img src=\"@source/software/git/assets/git4.jpg\" alt=\"状态示意图\" tabindex=\"0\" loading=\"lazy\"><figcaption>状态示意图</figcaption></figure>\n<p>所以，<code v-pre>git add</code> 命令实际上就是把要提交的所有修改放到暂存区(Stage)，然后，执行 <code v-pre>git commit</code> 就可以一次性把暂存区的所有修改提交到分支。</p>\n<div class=\"language-sh\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -m</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"understand how stage works\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[master e43a48b] understand how stage works</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> 2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> files</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> changed,</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> insertions</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">+</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> create</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> mode</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 100644</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> LICENSE</span></span></code></pre>\n</div><p>一旦提交后，如果您又没有对工作区做任何修改，那么工作区就是“干净”的:</p>\n<div class=\"language-sh\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> status</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">On</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> branch</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> master</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">nothing</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit,</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> working</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tree</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> clean</span></span></code></pre>\n</div></template>","contentStripped":"<p>Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。</p>\n<!-- more -->\n<h2 id=\"工作区-working-directory\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#工作区-working-directory\"><span>工作区(Working Directory)</span></a></h2>\n<p>就是您在电脑里能看到的目录，比如 learngit 文件夹就是一个工作区:</p>\n<h2 id=\"版本库-repository\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#版本库-repository\"><span>版本库(Repository)</span></a></h2>\n<p>工作区有一个隐藏目录.git，这个不算工作区，而是 Git 的版本库。</p>\n<p>Git 的版本库里存了很多东西，其中最重要的就是称为 stage(或者叫 index)的暂存区，还有 Git 为我们自动创建的第一个分支 <code v-pre>master</code>，以及指向 master 的一个指针叫 <code v-pre>HEAD</code>。</p>\n<figure><img src=\"@source/software/git/assets/git3.jpg\" alt=\"版本库图例\" tabindex=\"0\" loading=\"lazy\"><figcaption>版本库图例</figcaption></figure>\n<p>前面讲了我们把文件往 Git 版本库里添加的时候，提交更改，实际上就是把暂存区的所有内容提交到当前分支。我们创建 Git 版本库时，Git 自动为我们创建了唯一一个 <code v-pre>master</code> 分支，所以，现在，<code v-pre>git commit</code> 就是往 master 分支上提交更改。</p>\n<p>您可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。</p>\n<p>先对 readme.txt 做个修改，比如加上一行内容:</p>\n<div class=\"language-md\" data-highlighter=\"shiki\" data-ext=\"md\" data-title=\"md\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">Git is a distributed version control system.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">Git is free software distributed under the GPL.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">Git has a mutable index called stage.</span></span></code></pre>\n</div><p>然后，在工作区新增一个 LICENSE 文本文件(内容随便写)。</p>\n<p>先用 <code v-pre>git status</code> 查看一下状态:</p>\n<div class=\"language-sh line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> status</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">On</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> branch</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> master</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> not</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> staged</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> for</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git add &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> update</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> what</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> will</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> be</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> committed</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git checkout -- &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> discard</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> in</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> working</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> directory</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    modified:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">   readme.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Untracked</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> files:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git add &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> include</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> in</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> what</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> will</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> be</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> committed</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    LICENSE</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">no</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> added</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> (use </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"git add\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> and/or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git commit -a\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>Git 非常清楚地告诉我们，readme.txt 被修改了，而 LICENSE 还从来没有被添加过，所以它的状态是 <code v-pre>Untracked</code>。</p>\n<p>现在，使用两次命令 <code v-pre>git add</code>，把 readme.txt 和 LICENSE 都添加后，用 <code v-pre>git status</code> 再查看一下:</p>\n<div class=\"language-sh\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> status</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">On</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> branch</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> master</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Changes</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> be</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> committed:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  (</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">use</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"git reset HEAD &#x3C;file>...\"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> unstage</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    new</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">   LICENSE</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    modified:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">   readme.txt</span></span></code></pre>\n</div><p>现在，暂存区的状态就变成这样了:</p>\n<figure><img src=\"@source/software/git/assets/git4.jpg\" alt=\"状态示意图\" tabindex=\"0\" loading=\"lazy\"><figcaption>状态示意图</figcaption></figure>\n<p>所以，<code v-pre>git add</code> 命令实际上就是把要提交的所有修改放到暂存区(Stage)，然后，执行 <code v-pre>git commit</code> 就可以一次性把暂存区的所有修改提交到分支。</p>\n<div class=\"language-sh\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -m</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"understand how stage works\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[master e43a48b] understand how stage works</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> 2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> files</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> changed,</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> insertions</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">+</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> create</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> mode</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 100644</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> LICENSE</span></span></code></pre>\n</div><p>一旦提交后，如果您又没有对工作区做任何修改，那么工作区就是“干净”的:</p>\n<div class=\"language-sh\" data-highlighter=\"shiki\" data-ext=\"sh\" data-title=\"sh\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> git</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> status</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">On</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> branch</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> master</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">nothing</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> commit,</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> working</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> tree</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> clean</span></span></code></pre>\n</div>","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\nGit 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。\n\n<!-- more -->\n\n## 工作区(Working Directory)\n\n就是您在电脑里能看到的目录，比如 learngit 文件夹就是一个工作区:\n\n## 版本库(Repository)\n\n工作区有一个隐藏目录.git，这个不算工作区，而是 Git 的版本库。\n\nGit 的版本库里存了很多东西，其中最重要的就是称为 stage(或者叫 index)的暂存区，还有 Git 为我们自动创建的第一个分支 `master`，以及指向 master 的一个指针叫 `HEAD`。\n\n![版本库图例](./assets/git3.jpg)\n\n前面讲了我们把文件往 Git 版本库里添加的时候，提交更改，实际上就是把暂存区的所有内容提交到当前分支。我们创建 Git 版本库时，Git 自动为我们创建了唯一一个 `master` 分支，所以，现在，`git commit` 就是往 master 分支上提交更改。\n\n您可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。\n\n先对 readme.txt 做个修改，比如加上一行内容:\n\n```md\nGit is a distributed version control system.\nGit is free software distributed under the GPL.\nGit has a mutable index called stage.\n```\n\n然后，在工作区新增一个 LICENSE 文本文件(内容随便写)。\n\n先用 `git status` 查看一下状态:\n\n```sh\n$ git status\nOn branch master\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n    modified:   readme.txt\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\n    LICENSE\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n```\n\nGit 非常清楚地告诉我们，readme.txt 被修改了，而 LICENSE 还从来没有被添加过，所以它的状态是 `Untracked`。\n\n现在，使用两次命令 `git add`，把 readme.txt 和 LICENSE 都添加后，用 `git status` 再查看一下:\n\n```sh\n$ git status\nOn branch master\nChanges to be committed:\n  (use \"git reset HEAD <file>...\" to unstage)\n\n    new file:   LICENSE\n    modified:   readme.txt\n```\n\n现在，暂存区的状态就变成这样了:\n\n![状态示意图](./assets/git4.jpg)\n\n所以，`git add` 命令实际上就是把要提交的所有修改放到暂存区(Stage)，然后，执行 `git commit` 就可以一次性把暂存区的所有修改提交到分支。\n\n```sh\n$ git commit -m \"understand how stage works\"\n[master e43a48b] understand how stage works\n 2 files changed, 2 insertions(+)\n create mode 100644 LICENSE\n```\n\n一旦提交后，如果您又没有对工作区做任何修改，那么工作区就是“干净”的:\n\n```sh\n$ git status\nOn branch master\nnothing to commit, working tree clean\n```\n","excerpt":"","title":"","headers":[{"level":2,"title":"工作区(Working Directory)","slug":"工作区-working-directory","link":"#工作区-working-directory","children":[]},{"level":2,"title":"版本库(Repository)","slug":"版本库-repository","link":"#版本库-repository","children":[]}]}}
