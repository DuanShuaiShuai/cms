{"content":"<h1 id=\"标准-i-o\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#标准-i-o\"><span>标准 I/O</span></a></h1>\n<h2 id=\"echo\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#echo\"><span>echo</span></a></h2>\n<p><code v-pre>echo</code> 命令用于将指定内容输出到显示屏(标准输出)。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> this</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">this</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test</span></span></code></pre>\n</div><p>它的参数如下。</p>\n<ul>\n<li><code v-pre>-e</code> 解释转义字符。</li>\n<li><code v-pre>-n</code> 不输出行尾的换行符</li>\n</ul>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"a\\nb\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a\\nb</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"a\\nb\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">b</span></span></code></pre>\n</div><p>上面代码中，如果不加 <code v-pre>-e</code> 参数，<code v-pre>\\n</code> 就会按字面形式输出；加了以后，就被解释成了换行符。</p>\n<p>引号之中可以包括多个换行符，即可以输出多行文本。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"&#x3C;HTML></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;HEAD></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">          &#x3C;TITLE>Page Title&#x3C;/TITLE></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;/HEAD></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;BODY></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">          Page body.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;/BODY></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">&#x3C;/HTML>\"</span></span></code></pre>\n</div><h2 id=\"read\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#read\"><span>read</span></a></h2>\n<p><code v-pre>read</code> 命令被用来从标准输入读取单行数据。这个命令可以用来读取键盘输入，当使用重定向的时候，读取文件中的一行数据。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [-options] [variable...]</span></span></code></pre>\n</div><p>上面的 variable 用来存储输入数值的一个或多个变量名。如果没有提供变量名，shell 变量 <code v-pre>REPLY</code> 会包含数据行。</p>\n<p>基本上，read 会把来自标准输入的字段赋值给具体的变量。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Please enter an integer -> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> int</span></span></code></pre>\n</div><p><code v-pre>read</code> 可以给多个变量赋值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-multiple: read multiple values from keyboard</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var5</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var1 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var2 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var3 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var4 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var5 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面脚本的用法如下。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-multiple</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> e</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'b'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'c'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'd'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'e'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-multiple</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-multiple</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> g</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'b'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'c'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'd'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'e f g'</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>如果 read 命令接受到变量值数目少于期望的数字，那么额外的变量值为空，而多余的输入数据则会 被包含到最后一个变量中。</p>\n<p>如果 read 命令之后没有列出变量名，则一个 shell 变量 <code v-pre>REPLY</code>，将会包含所有的输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-single: read multiple values into default variable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面脚本的输出结果如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-single</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a b c d'</span></span></code></pre>\n</div><p>read 命令的参数如下。</p>\n<ul>\n<li><code v-pre>-a array</code> 把输入赋值到数组 array 中，从索引号零开始。</li>\n<li><code v-pre>-d delimiter</code> 用字符串 delimiter 中的第一个字符指示输入结束，而不是一个换行符。</li>\n<li><code v-pre>-e</code> 使用 Readline 来处理输入。这使得与命令行相同的方式编辑输入。</li>\n<li><code v-pre>-n num</code> 读取 num 个输入字符，而不是整行。</li>\n<li><code v-pre>-p prompt</code> 为输入显示提示信息，使用字符串 prompt。</li>\n<li><code v-pre>-r</code> Raw mode. 不把反斜杠字符解释为转义字符。</li>\n<li><code v-pre>-s</code> Silent mode. 不会在屏幕上显示输入的字符。当输入密码和其它确认信息的时候，这会很有帮助。</li>\n<li><code v-pre>-t seconds</code> 超时. 几秒钟后终止输入。read 会返回一个非零退出状态，若输入超时。</li>\n<li><code v-pre>-u fd</code> 使用文件描述符 fd 中的输入，而不是标准输入。</li>\n</ul>\n<p><code v-pre>-p</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p><code v-pre>-t</code> 和 <code v-pre>-s</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -t</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 10</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -sp</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter secret pass phrase > \"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> secret_pass</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"\\nSecret pass phrase = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$secret_pass</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面这个脚本提示用户输入一个密码，并等待输入 10 秒钟。如果在特定的时间内没有完成输入， 则脚本会退出并返回一个错误。因为包含了一个 -s 选项，所以输入的密码不会出现在屏幕上。</p>\n<p>Shell 的内部变量 <code v-pre>IFS</code> 可以控制输入字段的分离。例如，这个 /etc/passwd 文件包含的数据行 使用冒号作为字段分隔符。通过把 IFS 的值更改为单个冒号，我们可以使用 read 读取 /etc/passwd 中的内容，并成功地把字段分给不同的变量。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-ifs: read fields from a file</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">/etc/passwd</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter a user name > \"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user_name</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">file_info</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"^</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">:\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\":\"</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pw</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> shell</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;&#x3C;&#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"User = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"UID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"GID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Full Name = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Dir. = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Shell = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$shell</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"No such user '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>Shell 允许在一个命令之前立即发生一个或多个变量赋值。这些赋值为跟随着的命令更改环境变量。这个赋值的影响是暂时的；只是在命令存在期间改变环境变量。</p>\n<p>虽然通常 read 命令接受标准输入，但是您不能这样做:</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> “foo”</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span></span></code></pre>\n</div><p>我们期望这个命令能生效，但是它不能。这个命令将显示成功，但是 REPLY 变量 总是为空。为什么会这样?</p>\n<p>答案与 shell 处理管道线的方式有关系。在 bash(和其它 shells，例如 sh)中，管道线 会创建子 shell。它们是 shell 的副本，且用来执行命令的环境变量在管道线中。上面示例中，read 命令将在子 shell 中执行。</p>\n<p>在类 Unix 的系统中，子 shell 执行的时候，会为进程创建父环境的副本。当进程结束 之后，环境副本就会被破坏掉。这意味着一个子 shell 永远不能改变父进程的环境。read 赋值变量， 然后会变为环境的一部分。在上面的例子中，read 在它的子 shell 环境中，把 foo 赋值给变量 REPLY， 但是当命令退出后，子 shell 和它的环境将被破坏掉，这样赋值的影响就会消失。</p>\n<p>使用 here 字符串是解决此问题的一种方法。</p>\n<p>下面是生成菜单的一个例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-menu: a menu driven system information program</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clear</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">Please Select:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    1. Display System Information</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    2. Display Disk Space</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    3. Display Home Space Utilization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    0. Quit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter selection [0-3] > \"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^[0-3]$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Program terminated.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Hostname: </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$HOSTNAME</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">        uptime</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">        df</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">        if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ $(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">id</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -u</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-eq</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">            echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Space Utilization (All Users)\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">            du</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -sh</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home/</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">*</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">        else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">            echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Space Utilization (</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$USER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">)\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">            du</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -sh</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $HOME</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">        fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Invalid entry.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/linux/bash/archives/deleted/stdio.md","filePathRelative":"linux/bash/archives/deleted/stdio.md","frontmatter":{"date":"2020-06-04T00:00:00.000Z"},"sfcBlocks":{"template":{"type":"template","content":"<template><h1 id=\"标准-i-o\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#标准-i-o\"><span>标准 I/O</span></a></h1>\n<h2 id=\"echo\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#echo\"><span>echo</span></a></h2>\n<p><code v-pre>echo</code> 命令用于将指定内容输出到显示屏(标准输出)。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> this</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">this</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test</span></span></code></pre>\n</div><p>它的参数如下。</p>\n<ul>\n<li><code v-pre>-e</code> 解释转义字符。</li>\n<li><code v-pre>-n</code> 不输出行尾的换行符</li>\n</ul>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"a\\nb\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a\\nb</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"a\\nb\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">b</span></span></code></pre>\n</div><p>上面代码中，如果不加 <code v-pre>-e</code> 参数，<code v-pre>\\n</code> 就会按字面形式输出；加了以后，就被解释成了换行符。</p>\n<p>引号之中可以包括多个换行符，即可以输出多行文本。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"&#x3C;HTML></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;HEAD></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">          &#x3C;TITLE>Page Title&#x3C;/TITLE></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;/HEAD></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;BODY></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">          Page body.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;/BODY></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">&#x3C;/HTML>\"</span></span></code></pre>\n</div><h2 id=\"read\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#read\"><span>read</span></a></h2>\n<p><code v-pre>read</code> 命令被用来从标准输入读取单行数据。这个命令可以用来读取键盘输入，当使用重定向的时候，读取文件中的一行数据。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [-options] [variable...]</span></span></code></pre>\n</div><p>上面的 variable 用来存储输入数值的一个或多个变量名。如果没有提供变量名，shell 变量 <code v-pre>REPLY</code> 会包含数据行。</p>\n<p>基本上，read 会把来自标准输入的字段赋值给具体的变量。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Please enter an integer -> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> int</span></span></code></pre>\n</div><p><code v-pre>read</code> 可以给多个变量赋值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-multiple: read multiple values from keyboard</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var5</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var1 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var2 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var3 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var4 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var5 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面脚本的用法如下。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-multiple</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> e</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'b'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'c'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'd'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'e'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-multiple</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-multiple</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> g</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'b'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'c'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'd'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'e f g'</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>如果 read 命令接受到变量值数目少于期望的数字，那么额外的变量值为空，而多余的输入数据则会 被包含到最后一个变量中。</p>\n<p>如果 read 命令之后没有列出变量名，则一个 shell 变量 <code v-pre>REPLY</code>，将会包含所有的输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-single: read multiple values into default variable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面脚本的输出结果如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-single</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a b c d'</span></span></code></pre>\n</div><p>read 命令的参数如下。</p>\n<ul>\n<li><code v-pre>-a array</code> 把输入赋值到数组 array 中，从索引号零开始。</li>\n<li><code v-pre>-d delimiter</code> 用字符串 delimiter 中的第一个字符指示输入结束，而不是一个换行符。</li>\n<li><code v-pre>-e</code> 使用 Readline 来处理输入。这使得与命令行相同的方式编辑输入。</li>\n<li><code v-pre>-n num</code> 读取 num 个输入字符，而不是整行。</li>\n<li><code v-pre>-p prompt</code> 为输入显示提示信息，使用字符串 prompt。</li>\n<li><code v-pre>-r</code> Raw mode. 不把反斜杠字符解释为转义字符。</li>\n<li><code v-pre>-s</code> Silent mode. 不会在屏幕上显示输入的字符。当输入密码和其它确认信息的时候，这会很有帮助。</li>\n<li><code v-pre>-t seconds</code> 超时. 几秒钟后终止输入。read 会返回一个非零退出状态，若输入超时。</li>\n<li><code v-pre>-u fd</code> 使用文件描述符 fd 中的输入，而不是标准输入。</li>\n</ul>\n<p><code v-pre>-p</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p><code v-pre>-t</code> 和 <code v-pre>-s</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -t</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 10</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -sp</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter secret pass phrase > \"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> secret_pass</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"\\nSecret pass phrase = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$secret_pass</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面这个脚本提示用户输入一个密码，并等待输入 10 秒钟。如果在特定的时间内没有完成输入， 则脚本会退出并返回一个错误。因为包含了一个 -s 选项，所以输入的密码不会出现在屏幕上。</p>\n<p>Shell 的内部变量 <code v-pre>IFS</code> 可以控制输入字段的分离。例如，这个 /etc/passwd 文件包含的数据行 使用冒号作为字段分隔符。通过把 IFS 的值更改为单个冒号，我们可以使用 read 读取 /etc/passwd 中的内容，并成功地把字段分给不同的变量。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-ifs: read fields from a file</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">/etc/passwd</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter a user name > \"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user_name</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">file_info</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"^</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">:\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\":\"</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pw</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> shell</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;&#x3C;&#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"User = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"UID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"GID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Full Name = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Dir. = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Shell = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$shell</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"No such user '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>Shell 允许在一个命令之前立即发生一个或多个变量赋值。这些赋值为跟随着的命令更改环境变量。这个赋值的影响是暂时的；只是在命令存在期间改变环境变量。</p>\n<p>虽然通常 read 命令接受标准输入，但是您不能这样做:</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> “foo”</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span></span></code></pre>\n</div><p>我们期望这个命令能生效，但是它不能。这个命令将显示成功，但是 REPLY 变量 总是为空。为什么会这样?</p>\n<p>答案与 shell 处理管道线的方式有关系。在 bash(和其它 shells，例如 sh)中，管道线 会创建子 shell。它们是 shell 的副本，且用来执行命令的环境变量在管道线中。上面示例中，read 命令将在子 shell 中执行。</p>\n<p>在类 Unix 的系统中，子 shell 执行的时候，会为进程创建父环境的副本。当进程结束 之后，环境副本就会被破坏掉。这意味着一个子 shell 永远不能改变父进程的环境。read 赋值变量， 然后会变为环境的一部分。在上面的例子中，read 在它的子 shell 环境中，把 foo 赋值给变量 REPLY， 但是当命令退出后，子 shell 和它的环境将被破坏掉，这样赋值的影响就会消失。</p>\n<p>使用 here 字符串是解决此问题的一种方法。</p>\n<p>下面是生成菜单的一个例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-menu: a menu driven system information program</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clear</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">Please Select:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    1. Display System Information</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    2. Display Disk Space</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    3. Display Home Space Utilization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    0. Quit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter selection [0-3] > \"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^[0-3]$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Program terminated.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Hostname: </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$HOSTNAME</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">        uptime</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">        df</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">        if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ $(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">id</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -u</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-eq</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">            echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Space Utilization (All Users)\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">            du</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -sh</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home/</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">*</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">        else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">            echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Space Utilization (</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$USER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">)\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">            du</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -sh</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $HOME</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">        fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Invalid entry.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></template>","contentStripped":"<h1 id=\"标准-i-o\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#标准-i-o\"><span>标准 I/O</span></a></h1>\n<h2 id=\"echo\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#echo\"><span>echo</span></a></h2>\n<p><code v-pre>echo</code> 命令用于将指定内容输出到显示屏(标准输出)。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> this</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">this</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> is</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> test</span></span></code></pre>\n</div><p>它的参数如下。</p>\n<ul>\n<li><code v-pre>-e</code> 解释转义字符。</li>\n<li><code v-pre>-n</code> 不输出行尾的换行符</li>\n</ul>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"a\\nb\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a\\nb</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"a\\nb\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">b</span></span></code></pre>\n</div><p>上面代码中，如果不加 <code v-pre>-e</code> 参数，<code v-pre>\\n</code> 就会按字面形式输出；加了以后，就被解释成了换行符。</p>\n<p>引号之中可以包括多个换行符，即可以输出多行文本。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"&#x3C;HTML></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;HEAD></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">          &#x3C;TITLE>Page Title&#x3C;/TITLE></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;/HEAD></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;BODY></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">          Page body.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    &#x3C;/BODY></span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">&#x3C;/HTML>\"</span></span></code></pre>\n</div><h2 id=\"read\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#read\"><span>read</span></a></h2>\n<p><code v-pre>read</code> 命令被用来从标准输入读取单行数据。这个命令可以用来读取键盘输入，当使用重定向的时候，读取文件中的一行数据。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [-options] [variable...]</span></span></code></pre>\n</div><p>上面的 variable 用来存储输入数值的一个或多个变量名。如果没有提供变量名，shell 变量 <code v-pre>REPLY</code> 会包含数据行。</p>\n<p>基本上，read 会把来自标准输入的字段赋值给具体的变量。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Please enter an integer -> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> int</span></span></code></pre>\n</div><p><code v-pre>read</code> 可以给多个变量赋值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-multiple: read multiple values from keyboard</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> var5</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var1 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var2 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var3 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var4 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"var5 = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面脚本的用法如下。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-multiple</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> e</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'b'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'c'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'd'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'e'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-multiple</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ''</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-multiple</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> f</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> g</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var1</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var2</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'b'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'c'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var4</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'd'</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">var5</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'e f g'</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>如果 read 命令接受到变量值数目少于期望的数字，那么额外的变量值为空，而多余的输入数据则会 被包含到最后一个变量中。</p>\n<p>如果 read 命令之后没有列出变量名，则一个 shell 变量 <code v-pre>REPLY</code>，将会包含所有的输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-single: read multiple values into default variable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面脚本的输出结果如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-single</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a b c d'</span></span></code></pre>\n</div><p>read 命令的参数如下。</p>\n<ul>\n<li><code v-pre>-a array</code> 把输入赋值到数组 array 中，从索引号零开始。</li>\n<li><code v-pre>-d delimiter</code> 用字符串 delimiter 中的第一个字符指示输入结束，而不是一个换行符。</li>\n<li><code v-pre>-e</code> 使用 Readline 来处理输入。这使得与命令行相同的方式编辑输入。</li>\n<li><code v-pre>-n num</code> 读取 num 个输入字符，而不是整行。</li>\n<li><code v-pre>-p prompt</code> 为输入显示提示信息，使用字符串 prompt。</li>\n<li><code v-pre>-r</code> Raw mode. 不把反斜杠字符解释为转义字符。</li>\n<li><code v-pre>-s</code> Silent mode. 不会在屏幕上显示输入的字符。当输入密码和其它确认信息的时候，这会很有帮助。</li>\n<li><code v-pre>-t seconds</code> 超时. 几秒钟后终止输入。read 会返回一个非零退出状态，若输入超时。</li>\n<li><code v-pre>-u fd</code> 使用文件描述符 fd 中的输入，而不是标准输入。</li>\n</ul>\n<p><code v-pre>-p</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p><code v-pre>-t</code> 和 <code v-pre>-s</code> 的例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -t</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 10</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -sp</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter secret pass phrase > \"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> secret_pass</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"\\nSecret pass phrase = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$secret_pass</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面这个脚本提示用户输入一个密码，并等待输入 10 秒钟。如果在特定的时间内没有完成输入， 则脚本会退出并返回一个错误。因为包含了一个 -s 选项，所以输入的密码不会出现在屏幕上。</p>\n<p>Shell 的内部变量 <code v-pre>IFS</code> 可以控制输入字段的分离。例如，这个 /etc/passwd 文件包含的数据行 使用冒号作为字段分隔符。通过把 IFS 的值更改为单个冒号，我们可以使用 read 读取 /etc/passwd 中的内容，并成功地把字段分给不同的变量。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-ifs: read fields from a file</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">/etc/passwd</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter a user name > \"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user_name</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">file_info</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"^</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">:\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">    IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\":\"</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pw</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> shell</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;&#x3C;&#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"User = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"UID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"GID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Full Name = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Dir. = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Shell = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$shell</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"No such user '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>Shell 允许在一个命令之前立即发生一个或多个变量赋值。这些赋值为跟随着的命令更改环境变量。这个赋值的影响是暂时的；只是在命令存在期间改变环境变量。</p>\n<p>虽然通常 read 命令接受标准输入，但是您不能这样做:</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> “foo”</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span></span></code></pre>\n</div><p>我们期望这个命令能生效，但是它不能。这个命令将显示成功，但是 REPLY 变量 总是为空。为什么会这样?</p>\n<p>答案与 shell 处理管道线的方式有关系。在 bash(和其它 shells，例如 sh)中，管道线 会创建子 shell。它们是 shell 的副本，且用来执行命令的环境变量在管道线中。上面示例中，read 命令将在子 shell 中执行。</p>\n<p>在类 Unix 的系统中，子 shell 执行的时候，会为进程创建父环境的副本。当进程结束 之后，环境副本就会被破坏掉。这意味着一个子 shell 永远不能改变父进程的环境。read 赋值变量， 然后会变为环境的一部分。在上面的例子中，read 在它的子 shell 环境中，把 foo 赋值给变量 REPLY， 但是当命令退出后，子 shell 和它的环境将被破坏掉，这样赋值的影响就会消失。</p>\n<p>使用 here 字符串是解决此问题的一种方法。</p>\n<p>下面是生成菜单的一个例子。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-menu: a menu driven system information program</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">clear</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">Please Select:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    1. Display System Information</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    2. Display Disk Space</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    3. Display Home Space Utilization</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">    0. Quit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter selection [0-3] > \"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> =~</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ^[0-3]$ ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Program terminated.\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Hostname: </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$HOSTNAME</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">        uptime</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 2</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">        df</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -h</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\"> ==</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">        if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ $(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">id</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -u</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-eq</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">            echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Space Utilization (All Users)\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">            du</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -sh</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /home/</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E5C07B\">*</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">        else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">            echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Space Utilization (</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$USER</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">)\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">            du</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -sh</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $HOME</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">        fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">        exit</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">    fi</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Invalid entry.\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n# 标准 I/O\n\n## echo\n\n`echo` 命令用于将指定内容输出到显示屏(标准输出)。\n\n```bash\n$ echo this is a test\nthis is a test\n```\n\n它的参数如下。\n\n- `-e` 解释转义字符。\n- `-n` 不输出行尾的换行符\n\n```bash\n$ echo \"a\\nb\"\na\\nb\n\n$ echo -e \"a\\nb\"\na\nb\n```\n\n上面代码中，如果不加 `-e` 参数，`\\n` 就会按字面形式输出；加了以后，就被解释成了换行符。\n\n引号之中可以包括多个换行符，即可以输出多行文本。\n\n```bash\necho \"<HTML>\n    <HEAD>\n          <TITLE>Page Title</TITLE>\n    </HEAD>\n    <BODY>\n          Page body.\n    </BODY>\n</HTML>\"\n```\n\n## read\n\n`read` 命令被用来从标准输入读取单行数据。这个命令可以用来读取键盘输入，当使用重定向的时候，读取文件中的一行数据。\n\n```bash\nread [-options] [variable...]\n```\n\n上面的 variable 用来存储输入数值的一个或多个变量名。如果没有提供变量名，shell 变量 `REPLY` 会包含数据行。\n\n基本上，read 会把来自标准输入的字段赋值给具体的变量。\n\n```bash\necho -n \"Please enter an integer -> \"\nread int\n```\n\n`read` 可以给多个变量赋值。\n\n```bash\n#!/bin/bash\n# read-multiple: read multiple values from keyboard\necho -n \"Enter one or more values > \"\nread var1 var2 var3 var4 var5\necho \"var1 = '$var1'\"\necho \"var2 = '$var2'\"\necho \"var3 = '$var3'\"\necho \"var4 = '$var4'\"\necho \"var5 = '$var5'\"\n```\n\n上面脚本的用法如下。\n\n```bash\n$ read-multiple\nEnter one or more values > a b c d e\nvar1 = 'a'\nvar2 = 'b'\nvar3 = 'c'\nvar4 = 'd'\nvar5 = 'e'\n\n$ read-multiple\nEnter one or more values > a\nvar1 = 'a'\nvar2 = ''\nvar3 = ''\nvar4 = ''\nvar5 = ''\n\n$ read-multiple\nEnter one or more values > a b c d e f g\nvar1 = 'a'\nvar2 = 'b'\nvar3 = 'c'\nvar4 = 'd'\nvar5 = 'e f g'\n```\n\n如果 read 命令接受到变量值数目少于期望的数字，那么额外的变量值为空，而多余的输入数据则会 被包含到最后一个变量中。\n\n如果 read 命令之后没有列出变量名，则一个 shell 变量 `REPLY`，将会包含所有的输入。\n\n```bash\n#!/bin/bash\n# read-single: read multiple values into default variable\necho -n \"Enter one or more values > \"\nread\necho \"REPLY = '$REPLY'\"\n```\n\n上面脚本的输出结果如下。\n\n```bash\n$ read-single\nEnter one or more values > a b c d\nREPLY = 'a b c d'\n```\n\nread 命令的参数如下。\n\n- `-a array` 把输入赋值到数组 array 中，从索引号零开始。\n- `-d delimiter` 用字符串 delimiter 中的第一个字符指示输入结束，而不是一个换行符。\n- `-e` 使用 Readline 来处理输入。这使得与命令行相同的方式编辑输入。\n- `-n num` 读取 num 个输入字符，而不是整行。\n- `-p prompt` 为输入显示提示信息，使用字符串 prompt。\n- `-r` Raw mode. 不把反斜杠字符解释为转义字符。\n- `-s` Silent mode. 不会在屏幕上显示输入的字符。当输入密码和其它确认信息的时候，这会很有帮助。\n- `-t seconds` 超时. 几秒钟后终止输入。read 会返回一个非零退出状态，若输入超时。\n- `-u fd` 使用文件描述符 fd 中的输入，而不是标准输入。\n\n`-p` 的例子。\n\n```bash\nread -p \"Enter one or more values > \"\necho \"REPLY = '$REPLY'\"\n```\n\n`-t` 和 `-s` 的例子。\n\n```bash\nif read -t 10 -sp \"Enter secret pass phrase > \" secret_pass; then\n    echo -e \"\\nSecret pass phrase = '$secret_pass'\"\n```\n\n上面这个脚本提示用户输入一个密码，并等待输入 10 秒钟。如果在特定的时间内没有完成输入， 则脚本会退出并返回一个错误。因为包含了一个 -s 选项，所以输入的密码不会出现在屏幕上。\n\nShell 的内部变量 `IFS` 可以控制输入字段的分离。例如，这个 /etc/passwd 文件包含的数据行 使用冒号作为字段分隔符。通过把 IFS 的值更改为单个冒号，我们可以使用 read 读取 /etc/passwd 中的内容，并成功地把字段分给不同的变量。\n\n```bash\n#!/bin/bash\n# read-ifs: read fields from a file\nFILE=/etc/passwd\nread -p \"Enter a user name > \" user_name\nfile_info=$(grep \"^$user_name:\" $FILE)\nif [ -n \"$file_info\" ]; then\n    IFS=\":\" read user pw uid gid name home shell <<< \"$file_info\"\n    echo \"User = '$user'\"\n    echo \"UID = '$uid'\"\n    echo \"GID = '$gid'\"\n    echo \"Full Name = '$name'\"\n    echo \"Home Dir. = '$home'\"\n    echo \"Shell = '$shell'\"\nelse\n    echo \"No such user '$user_name'\" >&2\n    exit 1\nfi\n```\n\nShell 允许在一个命令之前立即发生一个或多个变量赋值。这些赋值为跟随着的命令更改环境变量。这个赋值的影响是暂时的；只是在命令存在期间改变环境变量。\n\n虽然通常 read 命令接受标准输入，但是您不能这样做:\n\n```bash\necho “foo” | read\n```\n\n我们期望这个命令能生效，但是它不能。这个命令将显示成功，但是 REPLY 变量 总是为空。为什么会这样?\n\n答案与 shell 处理管道线的方式有关系。在 bash(和其它 shells，例如 sh)中，管道线 会创建子 shell。它们是 shell 的副本，且用来执行命令的环境变量在管道线中。上面示例中，read 命令将在子 shell 中执行。\n\n在类 Unix 的系统中，子 shell 执行的时候，会为进程创建父环境的副本。当进程结束 之后，环境副本就会被破坏掉。这意味着一个子 shell 永远不能改变父进程的环境。read 赋值变量， 然后会变为环境的一部分。在上面的例子中，read 在它的子 shell 环境中，把 foo 赋值给变量 REPLY， 但是当命令退出后，子 shell 和它的环境将被破坏掉，这样赋值的影响就会消失。\n\n使用 here 字符串是解决此问题的一种方法。\n\n下面是生成菜单的一个例子。\n\n```bash\n#!/bin/bash\n# read-menu: a menu driven system information program\nclear\necho \"\nPlease Select:\n\n    1. Display System Information\n    2. Display Disk Space\n    3. Display Home Space Utilization\n    0. Quit\n\"\nread -p \"Enter selection [0-3] > \"\n\nif [[ $REPLY =~ ^[0-3]$ ]]; then\n    if [[ $REPLY == 0 ]]; then\n        echo \"Program terminated.\"\n        exit\n    fi\n    if [[ $REPLY == 1 ]]; then\n        echo \"Hostname: $HOSTNAME\"\n        uptime\n        exit\n    fi\n    if [[ $REPLY == 2 ]]; then\n        df -h\n        exit\n    fi\n    if [[ $REPLY == 3 ]]; then\n        if [[ $(id -u) -eq 0 ]]; then\n            echo \"Home Space Utilization (All Users)\"\n            du -sh /home/*\n        else\n            echo \"Home Space Utilization ($USER)\"\n            du -sh $HOME\n        fi\n        exit\n    fi\nelse\n    echo \"Invalid entry.\" >&2\n    exit 1\nfi\n```\n","excerpt":"","title":"标准 I/O","headers":[{"level":2,"title":"echo","slug":"echo","link":"#echo","children":[]},{"level":2,"title":"read","slug":"read","link":"#read","children":[]}]}}
