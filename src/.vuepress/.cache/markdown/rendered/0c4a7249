{"content":"<p>注册小程序。接受一个 Object 参数，其指定小程序的生命周期回调等。 <Badge text=\"重要\" type=\"error\" /></p>\n<div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<p>App() 必须在 app.js 中调用，必须调用且只能调用一次。不然会出现无法预期的后果。</p>\n</div>\n<!-- more -->\n<h2 id=\"参数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参数\"><span>参数</span></a></h2>\n<h3 id=\"object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#object-object\"><span>Object object</span></a></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n<th>最低版本</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>onLaunch</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>生命周期回调——监听小程序初始化。</td>\n<td></td>\n</tr>\n<tr>\n<td>onShow</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>生命周期回调——监听小程序启动或切前台。</td>\n<td></td>\n</tr>\n<tr>\n<td>onHide</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>生命周期回调——监听小程序切后台。</td>\n<td></td>\n</tr>\n<tr>\n<td>onError</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>错误监听函数。</td>\n<td></td>\n</tr>\n<tr>\n<td>onPageNotFound</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>页面不存在监听函数。</td>\n<td>1.9.90</td>\n</tr>\n<tr>\n<td>onUnhandledRejection</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>未处理的 Promise 拒绝事件监听函数。</td>\n<td>2.10.0</td>\n</tr>\n<tr>\n<td>onThemeChange</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>监听系统主题变化</td>\n<td>2.11.0</td>\n</tr>\n</tbody>\n</table>\n<p>| 其他 | any | | 否 | 开发者可以添加任意的函数或数据变量到 <code v-pre>Object</code> 参数中，用 <code v-pre>this</code> 可以访问 |</p>\n<p>关于小程序前后台的定义和小程序的运行机制，请参考 <RouteLink to=\"/code/mini-app/guide/service/run.html\">运行机制</RouteLink>。</p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">App</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLaunch</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">options</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">    // Do something initial when launch.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onShow</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">options</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">    // Do something when show.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onHide</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">() {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">    // Do something when hide.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onError</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">msg</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">    console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">msg</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">  globalData</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"I am global data\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">});</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h3 id=\"onlaunch-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onlaunch-object-object\"><span>onLaunch(Object object)</span></a></h3>\n<p>小程序初始化完成时触发，全局只触发一次。参数也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/life-cycle/wx.getLaunchOptionsSync.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.getLaunchOptionsSync</code></a> 获取。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/life-cycle/wx.getLaunchOptionsSync.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.getLaunchOptionsSync</code></a> 一致</p>\n<h3 id=\"onshow-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onshow-object-object\"><span>onShow(Object object)</span></a></h3>\n<p>小程序启动，或从后台进入前台显示时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppShow.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onAppShow</code></a> 绑定监听。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppShow.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onAppShow</code></a> 一致</p>\n<h2 id=\"onhide\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onhide\"><span>onHide()</span></a></h2>\n<p>小程序从前台进入后台时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppHide.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onAppHide</code></a> 绑定监听。</p>\n<h2 id=\"onerror-string-error\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onerror-string-error\"><span>onError(String error)</span></a></h2>\n<p>小程序发生脚本错误或 API 调用报错时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onError.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onError</code></a> 绑定监听。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onError.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onError</code></a> 一致</p>\n<h2 id=\"onpagenotfound-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onpagenotfound-object-object\"><span>onPageNotFound(Object object)</span></a></h2>\n<p>小程序要打开的页面不存在时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onPageNotFound</code></a> 绑定监听。注意事项请参考 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onPageNotFound</code></a>。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onPageNotFound</code></a> 一致</p>\n<p>示例代码:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">App</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onPageNotFound</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">res</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">    wx</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">redirectTo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      url</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"pages/...\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    }); </span><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">// 如果是 tabbar 页面，请使用 wx.switchTab</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">});</span></span></code></pre>\n</div><h2 id=\"onunhandledrejection-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onunhandledrejection-object-object\"><span>onUnhandledRejection(Object object)</span></a></h2>\n<blockquote>\n<p>基础库 2.10.0 开始支持</p>\n</blockquote>\n<p>小程序有未处理的 Promise 拒绝时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onUnhandledRejection</code></a> 绑定监听。注意事项请参考 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onUnhandledRejection</code></a>。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onUnhandledRejection</code></a> 一致</p>\n<h2 id=\"onthemechange-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onthemechange-object-object\"><span>onThemeChange(Object object)</span></a></h2>\n<blockquote>\n<p>基础库 2.11.0 开始支持</p>\n</blockquote>\n<p>系统切换主题时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onThemeChange.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onThemeChange</code></a> 绑定监听。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onThemeChange.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onThemeChange</code></a> 一致</p>\n<h2 id=\"appobject-getapp-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#appobject-getapp-object-object\"><span>AppObject getApp(Object object)</span></a></h2>\n<p>获取到小程序全局唯一的 App 实例。</p>\n<h3 id=\"getapp-参数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#getapp-参数\"><span>getApp 参数</span></a></h3>\n<p>Object object</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n<th>最低版本</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>allowDefault</td>\n<td>boolean</td>\n<td>false</td>\n<td>否</td>\n<td>在 <code v-pre>App</code> 未定义时返回默认实现。当 <code v-pre>App</code> 被调用时，默认实现中定义的属性会被覆盖合并到 App 中。一般用于独立分包</td>\n<td>2.2.4</td>\n</tr>\n</tbody>\n</table>\n<p>示例代码:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">// other.js</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">const</span><span style=\"--shiki-light:#986801;--shiki-dark:#E5C07B\"> appInstance</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> getApp</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">appInstance</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">globalData</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">); </span><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">// I am global data</span></span></code></pre>\n</div><div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<ul>\n<li>不要在定义于 <code v-pre>App()</code> 内的函数中，或调用 <code v-pre>App</code> 前调用 <code v-pre>getApp()</code> ，使用 <code v-pre>this</code> 就可以拿到 app 实例。</li>\n<li>通过 <code v-pre>getApp()</code> 获取实例之后，不要私自调用生命周期函数。</li>\n</ul>\n</div>\n","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/code/mini-app/guide/service/app.md","filePathRelative":"code/mini-app/guide/service/app.md","frontmatter":{"date":"2020-10-09T00:00:00.000Z","title":"App","icon":"app","category":"小程序"},"sfcBlocks":{"template":{"type":"template","content":"<template><p>注册小程序。接受一个 Object 参数，其指定小程序的生命周期回调等。 <Badge text=\"重要\" type=\"error\" /></p>\n<div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<p>App() 必须在 app.js 中调用，必须调用且只能调用一次。不然会出现无法预期的后果。</p>\n</div>\n<!-- more -->\n<h2 id=\"参数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参数\"><span>参数</span></a></h2>\n<h3 id=\"object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#object-object\"><span>Object object</span></a></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n<th>最低版本</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>onLaunch</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>生命周期回调——监听小程序初始化。</td>\n<td></td>\n</tr>\n<tr>\n<td>onShow</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>生命周期回调——监听小程序启动或切前台。</td>\n<td></td>\n</tr>\n<tr>\n<td>onHide</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>生命周期回调——监听小程序切后台。</td>\n<td></td>\n</tr>\n<tr>\n<td>onError</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>错误监听函数。</td>\n<td></td>\n</tr>\n<tr>\n<td>onPageNotFound</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>页面不存在监听函数。</td>\n<td>1.9.90</td>\n</tr>\n<tr>\n<td>onUnhandledRejection</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>未处理的 Promise 拒绝事件监听函数。</td>\n<td>2.10.0</td>\n</tr>\n<tr>\n<td>onThemeChange</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>监听系统主题变化</td>\n<td>2.11.0</td>\n</tr>\n</tbody>\n</table>\n<p>| 其他 | any | | 否 | 开发者可以添加任意的函数或数据变量到 <code v-pre>Object</code> 参数中，用 <code v-pre>this</code> 可以访问 |</p>\n<p>关于小程序前后台的定义和小程序的运行机制，请参考 <RouteLink to=\"/code/mini-app/guide/service/run.html\">运行机制</RouteLink>。</p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">App</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLaunch</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">options</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">    // Do something initial when launch.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onShow</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">options</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">    // Do something when show.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onHide</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">() {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">    // Do something when hide.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onError</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">msg</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">    console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">msg</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">  globalData</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"I am global data\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">});</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h3 id=\"onlaunch-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onlaunch-object-object\"><span>onLaunch(Object object)</span></a></h3>\n<p>小程序初始化完成时触发，全局只触发一次。参数也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/life-cycle/wx.getLaunchOptionsSync.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.getLaunchOptionsSync</code></a> 获取。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/life-cycle/wx.getLaunchOptionsSync.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.getLaunchOptionsSync</code></a> 一致</p>\n<h3 id=\"onshow-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onshow-object-object\"><span>onShow(Object object)</span></a></h3>\n<p>小程序启动，或从后台进入前台显示时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppShow.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onAppShow</code></a> 绑定监听。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppShow.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onAppShow</code></a> 一致</p>\n<h2 id=\"onhide\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onhide\"><span>onHide()</span></a></h2>\n<p>小程序从前台进入后台时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppHide.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onAppHide</code></a> 绑定监听。</p>\n<h2 id=\"onerror-string-error\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onerror-string-error\"><span>onError(String error)</span></a></h2>\n<p>小程序发生脚本错误或 API 调用报错时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onError.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onError</code></a> 绑定监听。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onError.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onError</code></a> 一致</p>\n<h2 id=\"onpagenotfound-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onpagenotfound-object-object\"><span>onPageNotFound(Object object)</span></a></h2>\n<p>小程序要打开的页面不存在时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onPageNotFound</code></a> 绑定监听。注意事项请参考 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onPageNotFound</code></a>。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onPageNotFound</code></a> 一致</p>\n<p>示例代码:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">App</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onPageNotFound</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">res</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">    wx</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">redirectTo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      url</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"pages/...\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    }); </span><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">// 如果是 tabbar 页面，请使用 wx.switchTab</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">});</span></span></code></pre>\n</div><h2 id=\"onunhandledrejection-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onunhandledrejection-object-object\"><span>onUnhandledRejection(Object object)</span></a></h2>\n<blockquote>\n<p>基础库 2.10.0 开始支持</p>\n</blockquote>\n<p>小程序有未处理的 Promise 拒绝时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onUnhandledRejection</code></a> 绑定监听。注意事项请参考 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onUnhandledRejection</code></a>。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onUnhandledRejection</code></a> 一致</p>\n<h2 id=\"onthemechange-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onthemechange-object-object\"><span>onThemeChange(Object object)</span></a></h2>\n<blockquote>\n<p>基础库 2.11.0 开始支持</p>\n</blockquote>\n<p>系统切换主题时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onThemeChange.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onThemeChange</code></a> 绑定监听。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onThemeChange.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onThemeChange</code></a> 一致</p>\n<h2 id=\"appobject-getapp-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#appobject-getapp-object-object\"><span>AppObject getApp(Object object)</span></a></h2>\n<p>获取到小程序全局唯一的 App 实例。</p>\n<h3 id=\"getapp-参数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#getapp-参数\"><span>getApp 参数</span></a></h3>\n<p>Object object</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n<th>最低版本</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>allowDefault</td>\n<td>boolean</td>\n<td>false</td>\n<td>否</td>\n<td>在 <code v-pre>App</code> 未定义时返回默认实现。当 <code v-pre>App</code> 被调用时，默认实现中定义的属性会被覆盖合并到 App 中。一般用于独立分包</td>\n<td>2.2.4</td>\n</tr>\n</tbody>\n</table>\n<p>示例代码:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">// other.js</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">const</span><span style=\"--shiki-light:#986801;--shiki-dark:#E5C07B\"> appInstance</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> getApp</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">appInstance</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">globalData</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">); </span><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">// I am global data</span></span></code></pre>\n</div><div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<ul>\n<li>不要在定义于 <code v-pre>App()</code> 内的函数中，或调用 <code v-pre>App</code> 前调用 <code v-pre>getApp()</code> ，使用 <code v-pre>this</code> 就可以拿到 app 实例。</li>\n<li>通过 <code v-pre>getApp()</code> 获取实例之后，不要私自调用生命周期函数。</li>\n</ul>\n</div>\n</template>","contentStripped":"<p>注册小程序。接受一个 Object 参数，其指定小程序的生命周期回调等。 <Badge text=\"重要\" type=\"error\" /></p>\n<div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<p>App() 必须在 app.js 中调用，必须调用且只能调用一次。不然会出现无法预期的后果。</p>\n</div>\n<!-- more -->\n<h2 id=\"参数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参数\"><span>参数</span></a></h2>\n<h3 id=\"object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#object-object\"><span>Object object</span></a></h3>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n<th>最低版本</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>onLaunch</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>生命周期回调——监听小程序初始化。</td>\n<td></td>\n</tr>\n<tr>\n<td>onShow</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>生命周期回调——监听小程序启动或切前台。</td>\n<td></td>\n</tr>\n<tr>\n<td>onHide</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>生命周期回调——监听小程序切后台。</td>\n<td></td>\n</tr>\n<tr>\n<td>onError</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>错误监听函数。</td>\n<td></td>\n</tr>\n<tr>\n<td>onPageNotFound</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>页面不存在监听函数。</td>\n<td>1.9.90</td>\n</tr>\n<tr>\n<td>onUnhandledRejection</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>未处理的 Promise 拒绝事件监听函数。</td>\n<td>2.10.0</td>\n</tr>\n<tr>\n<td>onThemeChange</td>\n<td>function</td>\n<td></td>\n<td>否</td>\n<td>监听系统主题变化</td>\n<td>2.11.0</td>\n</tr>\n</tbody>\n</table>\n<p>| 其他 | any | | 否 | 开发者可以添加任意的函数或数据变量到 <code v-pre>Object</code> 参数中，用 <code v-pre>this</code> 可以访问 |</p>\n<p>关于小程序前后台的定义和小程序的运行机制，请参考 <RouteLink to=\"/code/mini-app/guide/service/run.html\">运行机制</RouteLink>。</p>\n<div class=\"language-js line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">App</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onLaunch</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">options</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">    // Do something initial when launch.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onShow</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">options</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">    // Do something when show.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onHide</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">() {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">    // Do something when hide.</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onError</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">msg</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">    console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E06C75\">msg</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">);</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">  globalData</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"I am global data\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">});</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><h3 id=\"onlaunch-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onlaunch-object-object\"><span>onLaunch(Object object)</span></a></h3>\n<p>小程序初始化完成时触发，全局只触发一次。参数也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/life-cycle/wx.getLaunchOptionsSync.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.getLaunchOptionsSync</code></a> 获取。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/life-cycle/wx.getLaunchOptionsSync.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.getLaunchOptionsSync</code></a> 一致</p>\n<h3 id=\"onshow-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onshow-object-object\"><span>onShow(Object object)</span></a></h3>\n<p>小程序启动，或从后台进入前台显示时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppShow.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onAppShow</code></a> 绑定监听。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppShow.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onAppShow</code></a> 一致</p>\n<h2 id=\"onhide\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onhide\"><span>onHide()</span></a></h2>\n<p>小程序从前台进入后台时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppHide.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onAppHide</code></a> 绑定监听。</p>\n<h2 id=\"onerror-string-error\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onerror-string-error\"><span>onError(String error)</span></a></h2>\n<p>小程序发生脚本错误或 API 调用报错时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onError.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onError</code></a> 绑定监听。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onError.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onError</code></a> 一致</p>\n<h2 id=\"onpagenotfound-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onpagenotfound-object-object\"><span>onPageNotFound(Object object)</span></a></h2>\n<p>小程序要打开的页面不存在时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onPageNotFound</code></a> 绑定监听。注意事项请参考 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onPageNotFound</code></a>。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onPageNotFound</code></a> 一致</p>\n<p>示例代码:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">App</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">  onPageNotFound</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\">res</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">    wx</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">redirectTo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">({</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">      url</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#ABB2BF\">:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"pages/...\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">    }); </span><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">// 如果是 tabbar 页面，请使用 wx.switchTab</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">  },</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">});</span></span></code></pre>\n</div><h2 id=\"onunhandledrejection-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onunhandledrejection-object-object\"><span>onUnhandledRejection(Object object)</span></a></h2>\n<blockquote>\n<p>基础库 2.10.0 开始支持</p>\n</blockquote>\n<p>小程序有未处理的 Promise 拒绝时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onUnhandledRejection</code></a> 绑定监听。注意事项请参考 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onUnhandledRejection</code></a>。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onUnhandledRejection</code></a> 一致</p>\n<h2 id=\"onthemechange-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#onthemechange-object-object\"><span>onThemeChange(Object object)</span></a></h2>\n<blockquote>\n<p>基础库 2.11.0 开始支持</p>\n</blockquote>\n<p>系统切换主题时触发。也可以使用 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onThemeChange.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onThemeChange</code></a> 绑定监听。</p>\n<p>参数: 与 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onThemeChange.html\" target=\"_blank\" rel=\"noopener noreferrer\"><code v-pre>wx.onThemeChange</code></a> 一致</p>\n<h2 id=\"appobject-getapp-object-object\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#appobject-getapp-object-object\"><span>AppObject getApp(Object object)</span></a></h2>\n<p>获取到小程序全局唯一的 App 实例。</p>\n<h3 id=\"getapp-参数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#getapp-参数\"><span>getApp 参数</span></a></h3>\n<p>Object object</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>默认值</th>\n<th>必填</th>\n<th>说明</th>\n<th>最低版本</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>allowDefault</td>\n<td>boolean</td>\n<td>false</td>\n<td>否</td>\n<td>在 <code v-pre>App</code> 未定义时返回默认实现。当 <code v-pre>App</code> 被调用时，默认实现中定义的属性会被覆盖合并到 App 中。一般用于独立分包</td>\n<td>2.2.4</td>\n</tr>\n</tbody>\n</table>\n<p>示例代码:</p>\n<div class=\"language-js\" data-highlighter=\"shiki\" data-ext=\"js\" data-title=\"js\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">// other.js</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">const</span><span style=\"--shiki-light:#986801;--shiki-dark:#E5C07B\"> appInstance</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> =</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\"> getApp</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">();</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">console</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">log</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">(</span><span style=\"--shiki-light:#383A42;--shiki-dark:#E5C07B\">appInstance</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">.</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">globalData</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">); </span><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">// I am global data</span></span></code></pre>\n</div><div class=\"hint-container warning\">\n<p class=\"hint-container-title\">注意</p>\n<ul>\n<li>不要在定义于 <code v-pre>App()</code> 内的函数中，或调用 <code v-pre>App</code> 前调用 <code v-pre>getApp()</code> ，使用 <code v-pre>this</code> 就可以拿到 app 实例。</li>\n<li>通过 <code v-pre>getApp()</code> 获取实例之后，不要私自调用生命周期函数。</li>\n</ul>\n</div>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n注册小程序。接受一个 Object 参数，其指定小程序的生命周期回调等。 <Badge text=\"重要\" type=\"error\" />\n\n::: warning\n\nApp() 必须在 app.js 中调用，必须调用且只能调用一次。不然会出现无法预期的后果。\n\n:::\n\n<!-- more -->\n\n## 参数\n\n### Object object\n\n| 属性                 | 类型     | 默认值 | 必填 | 说明                                   | 最低版本 |\n| -------------------- | -------- | ------ | ---- | -------------------------------------- | -------- |\n| onLaunch             | function |        | 否   | 生命周期回调——监听小程序初始化。       |          |\n| onShow               | function |        | 否   | 生命周期回调——监听小程序启动或切前台。 |          |\n| onHide               | function |        | 否   | 生命周期回调——监听小程序切后台。       |          |\n| onError              | function |        | 否   | 错误监听函数。                         |          |\n| onPageNotFound       | function |        | 否   | 页面不存在监听函数。                   | 1.9.90   |\n| onUnhandledRejection | function |        | 否   | 未处理的 Promise 拒绝事件监听函数。    | 2.10.0   |\n| onThemeChange        | function |        | 否   | 监听系统主题变化                       | 2.11.0   |\n\n| 其他 | any | | 否 | 开发者可以添加任意的函数或数据变量到 `Object` 参数中，用 `this` 可以访问 |\n\n关于小程序前后台的定义和小程序的运行机制，请参考 [运行机制](run.md)。\n\n```js\nApp({\n  onLaunch(options) {\n    // Do something initial when launch.\n  },\n  onShow(options) {\n    // Do something when show.\n  },\n  onHide() {\n    // Do something when hide.\n  },\n  onError(msg) {\n    console.log(msg);\n  },\n  globalData: \"I am global data\",\n});\n```\n\n### onLaunch(Object object)\n\n小程序初始化完成时触发，全局只触发一次。参数也可以使用 [`wx.getLaunchOptionsSync`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/life-cycle/wx.getLaunchOptionsSync.html) 获取。\n\n参数: 与 [`wx.getLaunchOptionsSync`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/life-cycle/wx.getLaunchOptionsSync.html) 一致\n\n### onShow(Object object)\n\n小程序启动，或从后台进入前台显示时触发。也可以使用 [`wx.onAppShow`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppShow.html) 绑定监听。\n\n参数: 与 [`wx.onAppShow`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppShow.html) 一致\n\n## onHide()\n\n小程序从前台进入后台时触发。也可以使用 [`wx.onAppHide`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppHide.html) 绑定监听。\n\n## onError(String error)\n\n小程序发生脚本错误或 API 调用报错时触发。也可以使用 [`wx.onError`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onError.html) 绑定监听。\n\n参数: 与 [`wx.onError`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onError.html) 一致\n\n## onPageNotFound(Object object)\n\n小程序要打开的页面不存在时触发。也可以使用 [`wx.onPageNotFound`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html) 绑定监听。注意事项请参考 [`wx.onPageNotFound`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html)。\n\n参数: 与 [`wx.onPageNotFound`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onPageNotFound.html) 一致\n\n示例代码:\n\n```js\nApp({\n  onPageNotFound(res) {\n    wx.redirectTo({\n      url: \"pages/...\",\n    }); // 如果是 tabbar 页面，请使用 wx.switchTab\n  },\n});\n```\n\n## onUnhandledRejection(Object object)\n\n> 基础库 2.10.0 开始支持\n\n小程序有未处理的 Promise 拒绝时触发。也可以使用 [`wx.onUnhandledRejection`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html) 绑定监听。注意事项请参考 [`wx.onUnhandledRejection`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html)。\n\n参数: 与 [`wx.onUnhandledRejection`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onUnhandledRejection.html) 一致\n\n## onThemeChange(Object object)\n\n> 基础库 2.11.0 开始支持\n\n系统切换主题时触发。也可以使用 [`wx.onThemeChange`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onThemeChange.html) 绑定监听。\n\n参数: 与 [`wx.onThemeChange`](https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onThemeChange.html) 一致\n\n## AppObject getApp(Object object)\n\n获取到小程序全局唯一的 App 实例。\n\n### getApp 参数\n\nObject object\n\n| 属性         | 类型    | 默认值 | 必填 | 说明                                                                                                          | 最低版本 |\n| ------------ | ------- | ------ | ---- | ------------------------------------------------------------------------------------------------------------- | -------- |\n| allowDefault | boolean | false  | 否   | 在 `App` 未定义时返回默认实现。当 `App` 被调用时，默认实现中定义的属性会被覆盖合并到 App 中。一般用于独立分包 | 2.2.4    |\n\n示例代码:\n\n```js\n// other.js\nconst appInstance = getApp();\nconsole.log(appInstance.globalData); // I am global data\n```\n\n::: warning\n\n- 不要在定义于 `App()` 内的函数中，或调用 `App` 前调用 `getApp()` ，使用 `this` 就可以拿到 app 实例。\n- 通过 `getApp()` 获取实例之后，不要私自调用生命周期函数。\n\n:::\n","excerpt":"","title":"","headers":[{"level":2,"title":"参数","slug":"参数","link":"#参数","children":[{"level":3,"title":"Object object","slug":"object-object","link":"#object-object","children":[]},{"level":3,"title":"onLaunch(Object object)","slug":"onlaunch-object-object","link":"#onlaunch-object-object","children":[]},{"level":3,"title":"onShow(Object object)","slug":"onshow-object-object","link":"#onshow-object-object","children":[]}]},{"level":2,"title":"onHide()","slug":"onhide","link":"#onhide","children":[]},{"level":2,"title":"onError(String error)","slug":"onerror-string-error","link":"#onerror-string-error","children":[]},{"level":2,"title":"onPageNotFound(Object object)","slug":"onpagenotfound-object-object","link":"#onpagenotfound-object-object","children":[]},{"level":2,"title":"onUnhandledRejection(Object object)","slug":"onunhandledrejection-object-object","link":"#onunhandledrejection-object-object","children":[]},{"level":2,"title":"onThemeChange(Object object)","slug":"onthemechange-object-object","link":"#onthemechange-object-object","children":[]},{"level":2,"title":"AppObject getApp(Object object)","slug":"appobject-getapp-object-object","link":"#appobject-getapp-object-object","children":[{"level":3,"title":"getApp 参数","slug":"getapp-参数","link":"#getapp-参数","children":[]}]}],"links":[{"raw":"run.md","relative":"code/mini-app/guide/service/run.md","absolute":"/code/mini-app/guide/service/run.md"}]}}
