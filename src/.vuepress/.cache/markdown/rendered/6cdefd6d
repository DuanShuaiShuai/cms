{"content":"<h1 id=\"重定向\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#重定向\"><span>重定向</span></a></h1>\n<p>重定向指的是将命令行输出写入指定位置。</p>\n<ul>\n<li><code v-pre>cmd1 | cmd2</code>: Pipe; take standard output of cmd1 as standard input to cmd2.</li>\n<li><code v-pre>&gt; file</code>: Direct standard output to file.</li>\n<li><code v-pre>&lt; file</code>: Take standard input from file.</li>\n<li><code v-pre>&gt;&gt; file</code>: Direct standard output to file; append to file if it already exists.</li>\n<li><code v-pre>&gt;| file</code>: Force standard output to file even if noclobber is set.</li>\n<li><code v-pre>n&gt;| file</code>: Force output to file from file descriptor n even if noclobber is set.</li>\n<li><code v-pre>&lt;&gt; file</code>: Use file as both standard input and standard output.</li>\n<li><code v-pre>n&lt;&gt; file</code>: Use file as both input and output for file descriptor n.</li>\n<li><code v-pre>&lt;&lt; label</code>: Here-document; see text.</li>\n<li><code v-pre>n &gt; file</code>: Direct file descriptor n to file.</li>\n<li><code v-pre>n &lt; file</code>: Take file descriptor n from file.</li>\n<li><code v-pre>n &gt;&gt; file</code>: Direct file descriptor n to file; append to file if it already exists.</li>\n<li><code v-pre>n&gt;&amp;</code>: Duplicate standard output to file descriptor n.</li>\n<li><code v-pre>n&lt;&amp;</code>: Duplicate standard input from file descriptor n.</li>\n<li><code v-pre>n&gt;&amp;m</code>: File descriptor  n is made to be a copy of the output file descriptor.</li>\n<li><code v-pre>n&lt;&amp;m</code>: File descriptor  n is made to be a copy of the input file descriptor.</li>\n<li><code v-pre>&amp;&gt;file</code>: Directs standard output and standard error to file.</li>\n<li><code v-pre>&lt;&amp;-</code>: Close the standard input.</li>\n<li><code v-pre>&gt;&amp;-</code>: Close the standard output.</li>\n<li><code v-pre>n&gt;&amp;-</code>: Close the output from file descriptor  n.</li>\n<li><code v-pre>n&lt;&amp;-</code>: Close the input from file descriptor  n.</li>\n<li><code v-pre>n&gt;&amp;word</code>: If  n is not specified, the standard output (file descriptor 1) is used. If the digits in word do not specify a file descriptor open for output, a redirection error occurs. As a special case, if n is omitted, and word does not expand to one or more digits, the standard output and standard error are redirected as described previously.</li>\n<li><code v-pre>n&lt;&amp;word</code>: If word expands to one or more digits, the file descriptor denoted by  n is made to be a copy of that file descriptor. If the digits in word do not specify a file descriptor open for input, a redirection error occurs. If word evaluates to -, file descriptor n is closed. If n is not specified, the standard input (file descriptor 0) is used.</li>\n<li><code v-pre>n&gt;&amp;digit-</code>: Moves the file descriptor digit to file descriptor  n, or the standard output (file descriptor 1) if n is not specified.</li>\n<li><code v-pre>n&lt;&amp;digit-</code>: Moves the file descriptor digit to file descriptor  n, or the standard input (file descriptor 0) if n is not specified. digit is closed after being duplicated to n.</li>\n</ul>\n<p><code v-pre>&gt;</code> 用来将标准输出重定向到指定文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-output.txt</span></span></code></pre>\n</div><p>如果重定向后的指定文件已经存在，就会被覆盖，不会有任何提示。</p>\n<p>如果命令没有任何输出，那么重定向之后，得到的是一个长度为 <code v-pre>0</code> 的文件。因此，<code v-pre>&gt;</code> 具有创建新文件或改写现存文件、将其改为长度 <code v-pre>0</code> 的作用。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">> ls-output.txt</span></span></code></pre>\n</div><p><code v-pre>&gt;&gt;</code> 用来将标准输出重定向追加到指定文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >> </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-output.txt</span></span></code></pre>\n</div><p><code v-pre>2&gt;</code> 用来将标准错误重定向到指定文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> 2> </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-error.txt</span></span></code></pre>\n</div><p>标准输出和标准错误，可以重定向到同一个文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-output.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> 2>&#x26;1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 或者</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;> ls-output.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 追加到同一个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;>> ls-output.txt</span></span></code></pre>\n</div><p>如果不希望输出错误信息，可以将它重定向到一个特殊文件<code v-pre>/dev/null</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> 2> </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">/dev/null</span></span></code></pre>\n</div><p><code v-pre>|</code> 用于将一个命令的标准输出，重定向到另一个命令的标准输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><p>不要将<code v-pre>&gt;</code> 与 <code v-pre>|</code> 混淆。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">less</span></span></code></pre>\n</div><p>上面命令会在当前目录，生成一个名为 <code v-pre>less</code> 的文本文件。</p>\n<p>下面是标准错误重定向的一个例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">invalid_input</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Invalid input '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter a single item > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-z</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]] &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">invalid_input</span></span></code></pre>\n</div><h2 id=\"tee\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#tee\"><span>tee</span></a></h2>\n<p><code v-pre>tee</code> 命令用于同时将标准输出重定向到文件，以及另一个命令的标准输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">tee</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zip</span></span></code></pre>\n</div><h2 id=\"命令替换\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#命令替换\"><span>命令替换</span></a></h2>\n<p>命令替换(command substitution)指的是将一个命令的输出，替换进入另一个命令。<code v-pre>$(command)</code> 表示命令替换，另一种写法是使用反引号。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 或者</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> `</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">`</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">which</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cp</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 或者</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> `</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">which</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cp`</span></span></code></pre>\n</div><h2 id=\"basename\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#basename\"><span>basename</span></a></h2>\n<p><code v-pre>basename</code> 命令清除 一个路径名的开头部分，只留下一个文件的基本名称。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># file_info: simple file information program</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">PROGNAME</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">basename</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"\\nFile Type:\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    file</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"\\nFile Status:\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    stat</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$PROGNAME</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">: usage: </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$PROGNAME</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/linux/bash/archives/redirection.md","filePathRelative":"linux/bash/archives/redirection.md","frontmatter":{"date":"2020-06-04T00:00:00.000Z"},"sfcBlocks":{"template":{"type":"template","content":"<template><h1 id=\"重定向\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#重定向\"><span>重定向</span></a></h1>\n<p>重定向指的是将命令行输出写入指定位置。</p>\n<ul>\n<li><code v-pre>cmd1 | cmd2</code>: Pipe; take standard output of cmd1 as standard input to cmd2.</li>\n<li><code v-pre>&gt; file</code>: Direct standard output to file.</li>\n<li><code v-pre>&lt; file</code>: Take standard input from file.</li>\n<li><code v-pre>&gt;&gt; file</code>: Direct standard output to file; append to file if it already exists.</li>\n<li><code v-pre>&gt;| file</code>: Force standard output to file even if noclobber is set.</li>\n<li><code v-pre>n&gt;| file</code>: Force output to file from file descriptor n even if noclobber is set.</li>\n<li><code v-pre>&lt;&gt; file</code>: Use file as both standard input and standard output.</li>\n<li><code v-pre>n&lt;&gt; file</code>: Use file as both input and output for file descriptor n.</li>\n<li><code v-pre>&lt;&lt; label</code>: Here-document; see text.</li>\n<li><code v-pre>n &gt; file</code>: Direct file descriptor n to file.</li>\n<li><code v-pre>n &lt; file</code>: Take file descriptor n from file.</li>\n<li><code v-pre>n &gt;&gt; file</code>: Direct file descriptor n to file; append to file if it already exists.</li>\n<li><code v-pre>n&gt;&amp;</code>: Duplicate standard output to file descriptor n.</li>\n<li><code v-pre>n&lt;&amp;</code>: Duplicate standard input from file descriptor n.</li>\n<li><code v-pre>n&gt;&amp;m</code>: File descriptor  n is made to be a copy of the output file descriptor.</li>\n<li><code v-pre>n&lt;&amp;m</code>: File descriptor  n is made to be a copy of the input file descriptor.</li>\n<li><code v-pre>&amp;&gt;file</code>: Directs standard output and standard error to file.</li>\n<li><code v-pre>&lt;&amp;-</code>: Close the standard input.</li>\n<li><code v-pre>&gt;&amp;-</code>: Close the standard output.</li>\n<li><code v-pre>n&gt;&amp;-</code>: Close the output from file descriptor  n.</li>\n<li><code v-pre>n&lt;&amp;-</code>: Close the input from file descriptor  n.</li>\n<li><code v-pre>n&gt;&amp;word</code>: If  n is not specified, the standard output (file descriptor 1) is used. If the digits in word do not specify a file descriptor open for output, a redirection error occurs. As a special case, if n is omitted, and word does not expand to one or more digits, the standard output and standard error are redirected as described previously.</li>\n<li><code v-pre>n&lt;&amp;word</code>: If word expands to one or more digits, the file descriptor denoted by  n is made to be a copy of that file descriptor. If the digits in word do not specify a file descriptor open for input, a redirection error occurs. If word evaluates to -, file descriptor n is closed. If n is not specified, the standard input (file descriptor 0) is used.</li>\n<li><code v-pre>n&gt;&amp;digit-</code>: Moves the file descriptor digit to file descriptor  n, or the standard output (file descriptor 1) if n is not specified.</li>\n<li><code v-pre>n&lt;&amp;digit-</code>: Moves the file descriptor digit to file descriptor  n, or the standard input (file descriptor 0) if n is not specified. digit is closed after being duplicated to n.</li>\n</ul>\n<p><code v-pre>&gt;</code> 用来将标准输出重定向到指定文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-output.txt</span></span></code></pre>\n</div><p>如果重定向后的指定文件已经存在，就会被覆盖，不会有任何提示。</p>\n<p>如果命令没有任何输出，那么重定向之后，得到的是一个长度为 <code v-pre>0</code> 的文件。因此，<code v-pre>&gt;</code> 具有创建新文件或改写现存文件、将其改为长度 <code v-pre>0</code> 的作用。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">> ls-output.txt</span></span></code></pre>\n</div><p><code v-pre>&gt;&gt;</code> 用来将标准输出重定向追加到指定文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >> </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-output.txt</span></span></code></pre>\n</div><p><code v-pre>2&gt;</code> 用来将标准错误重定向到指定文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> 2> </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-error.txt</span></span></code></pre>\n</div><p>标准输出和标准错误，可以重定向到同一个文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-output.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> 2>&#x26;1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 或者</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;> ls-output.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 追加到同一个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;>> ls-output.txt</span></span></code></pre>\n</div><p>如果不希望输出错误信息，可以将它重定向到一个特殊文件<code v-pre>/dev/null</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> 2> </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">/dev/null</span></span></code></pre>\n</div><p><code v-pre>|</code> 用于将一个命令的标准输出，重定向到另一个命令的标准输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><p>不要将<code v-pre>&gt;</code> 与 <code v-pre>|</code> 混淆。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">less</span></span></code></pre>\n</div><p>上面命令会在当前目录，生成一个名为 <code v-pre>less</code> 的文本文件。</p>\n<p>下面是标准错误重定向的一个例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">invalid_input</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Invalid input '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter a single item > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-z</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]] &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">invalid_input</span></span></code></pre>\n</div><h2 id=\"tee\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#tee\"><span>tee</span></a></h2>\n<p><code v-pre>tee</code> 命令用于同时将标准输出重定向到文件，以及另一个命令的标准输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">tee</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zip</span></span></code></pre>\n</div><h2 id=\"命令替换\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#命令替换\"><span>命令替换</span></a></h2>\n<p>命令替换(command substitution)指的是将一个命令的输出，替换进入另一个命令。<code v-pre>$(command)</code> 表示命令替换，另一种写法是使用反引号。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 或者</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> `</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">`</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">which</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cp</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 或者</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> `</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">which</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cp`</span></span></code></pre>\n</div><h2 id=\"basename\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#basename\"><span>basename</span></a></h2>\n<p><code v-pre>basename</code> 命令清除 一个路径名的开头部分，只留下一个文件的基本名称。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># file_info: simple file information program</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">PROGNAME</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">basename</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"\\nFile Type:\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    file</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"\\nFile Status:\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    stat</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$PROGNAME</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">: usage: </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$PROGNAME</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></template>","contentStripped":"<h1 id=\"重定向\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#重定向\"><span>重定向</span></a></h1>\n<p>重定向指的是将命令行输出写入指定位置。</p>\n<ul>\n<li><code v-pre>cmd1 | cmd2</code>: Pipe; take standard output of cmd1 as standard input to cmd2.</li>\n<li><code v-pre>&gt; file</code>: Direct standard output to file.</li>\n<li><code v-pre>&lt; file</code>: Take standard input from file.</li>\n<li><code v-pre>&gt;&gt; file</code>: Direct standard output to file; append to file if it already exists.</li>\n<li><code v-pre>&gt;| file</code>: Force standard output to file even if noclobber is set.</li>\n<li><code v-pre>n&gt;| file</code>: Force output to file from file descriptor n even if noclobber is set.</li>\n<li><code v-pre>&lt;&gt; file</code>: Use file as both standard input and standard output.</li>\n<li><code v-pre>n&lt;&gt; file</code>: Use file as both input and output for file descriptor n.</li>\n<li><code v-pre>&lt;&lt; label</code>: Here-document; see text.</li>\n<li><code v-pre>n &gt; file</code>: Direct file descriptor n to file.</li>\n<li><code v-pre>n &lt; file</code>: Take file descriptor n from file.</li>\n<li><code v-pre>n &gt;&gt; file</code>: Direct file descriptor n to file; append to file if it already exists.</li>\n<li><code v-pre>n&gt;&amp;</code>: Duplicate standard output to file descriptor n.</li>\n<li><code v-pre>n&lt;&amp;</code>: Duplicate standard input from file descriptor n.</li>\n<li><code v-pre>n&gt;&amp;m</code>: File descriptor  n is made to be a copy of the output file descriptor.</li>\n<li><code v-pre>n&lt;&amp;m</code>: File descriptor  n is made to be a copy of the input file descriptor.</li>\n<li><code v-pre>&amp;&gt;file</code>: Directs standard output and standard error to file.</li>\n<li><code v-pre>&lt;&amp;-</code>: Close the standard input.</li>\n<li><code v-pre>&gt;&amp;-</code>: Close the standard output.</li>\n<li><code v-pre>n&gt;&amp;-</code>: Close the output from file descriptor  n.</li>\n<li><code v-pre>n&lt;&amp;-</code>: Close the input from file descriptor  n.</li>\n<li><code v-pre>n&gt;&amp;word</code>: If  n is not specified, the standard output (file descriptor 1) is used. If the digits in word do not specify a file descriptor open for output, a redirection error occurs. As a special case, if n is omitted, and word does not expand to one or more digits, the standard output and standard error are redirected as described previously.</li>\n<li><code v-pre>n&lt;&amp;word</code>: If word expands to one or more digits, the file descriptor denoted by  n is made to be a copy of that file descriptor. If the digits in word do not specify a file descriptor open for input, a redirection error occurs. If word evaluates to -, file descriptor n is closed. If n is not specified, the standard input (file descriptor 0) is used.</li>\n<li><code v-pre>n&gt;&amp;digit-</code>: Moves the file descriptor digit to file descriptor  n, or the standard output (file descriptor 1) if n is not specified.</li>\n<li><code v-pre>n&lt;&amp;digit-</code>: Moves the file descriptor digit to file descriptor  n, or the standard input (file descriptor 0) if n is not specified. digit is closed after being duplicated to n.</li>\n</ul>\n<p><code v-pre>&gt;</code> 用来将标准输出重定向到指定文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-output.txt</span></span></code></pre>\n</div><p>如果重定向后的指定文件已经存在，就会被覆盖，不会有任何提示。</p>\n<p>如果命令没有任何输出，那么重定向之后，得到的是一个长度为 <code v-pre>0</code> 的文件。因此，<code v-pre>&gt;</code> 具有创建新文件或改写现存文件、将其改为长度 <code v-pre>0</code> 的作用。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">> ls-output.txt</span></span></code></pre>\n</div><p><code v-pre>&gt;&gt;</code> 用来将标准输出重定向追加到指定文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >> </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-output.txt</span></span></code></pre>\n</div><p><code v-pre>2&gt;</code> 用来将标准错误重定向到指定文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> 2> </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-error.txt</span></span></code></pre>\n</div><p>标准输出和标准错误，可以重定向到同一个文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">ls-output.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> 2>&#x26;1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 或者</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;> ls-output.txt</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 追加到同一个文件</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x26;>> ls-output.txt</span></span></code></pre>\n</div><p>如果不希望输出错误信息，可以将它重定向到一个特殊文件<code v-pre>/dev/null</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /bin/usr</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> 2> </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">/dev/null</span></span></code></pre>\n</div><p><code v-pre>|</code> 用于将一个命令的标准输出，重定向到另一个命令的标准输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">less</span></span></code></pre>\n</div><p>不要将<code v-pre>&gt;</code> 与 <code v-pre>|</code> 混淆。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">less</span></span></code></pre>\n</div><p>上面命令会在当前目录，生成一个名为 <code v-pre>less</code> 的文本文件。</p>\n<p>下面是标准错误重定向的一个例子。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">invalid_input</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> () {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Invalid input '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter a single item > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-z</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $REPLY</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]] &#x26;&#x26; </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">invalid_input</span></span></code></pre>\n</div><h2 id=\"tee\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#tee\"><span>tee</span></a></h2>\n<p><code v-pre>tee</code> 命令用于同时将标准输出重定向到文件，以及另一个命令的标准输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> /usr/bin</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">tee</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls.txt</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> | </span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> zip</span></span></code></pre>\n</div><h2 id=\"命令替换\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#命令替换\"><span>命令替换</span></a></h2>\n<p>命令替换(command substitution)指的是将一个命令的输出，替换进入另一个命令。<code v-pre>$(command)</code> 表示命令替换，另一种写法是使用反引号。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 或者</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> `</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">ls</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">`</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> $(</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">which</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cp</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># 或者</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> ls</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -l</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> `</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">which</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> cp`</span></span></code></pre>\n</div><h2 id=\"basename\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#basename\"><span>basename</span></a></h2>\n<p><code v-pre>basename</code> 命令清除 一个路径名的开头部分，只留下一个文件的基本名称。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># file_info: simple file information program</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">PROGNAME</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">basename</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $0</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">)</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [[ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-e</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $1</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"\\nFile Type:\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">    file</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"\\nFile Status:\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    stat</span><span style=\"--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic\"> $1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$PROGNAME</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">: usage: </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$PROGNAME</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">    exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n# 重定向\n\n重定向指的是将命令行输出写入指定位置。\n\n- `cmd1 | cmd2`: Pipe; take standard output of cmd1 as standard input to cmd2.\n- `> file`: Direct standard output to file.\n- `< file`: Take standard input from file.\n- `>> file`: Direct standard output to file; append to file if it already exists.\n- `>| file`: Force standard output to file even if noclobber is set.\n- `n>| file`: Force output to file from file descriptor n even if noclobber is set.\n- `<> file`: Use file as both standard input and standard output.\n- `n<> file`: Use file as both input and output for file descriptor n.\n- `<< label`: Here-document; see text.\n- `n > file`: Direct file descriptor n to file.\n- `n < file`: Take file descriptor n from file.\n- `n >> file`: Direct file descriptor n to file; append to file if it already exists.\n- `n>&`: Duplicate standard output to file descriptor n.\n- `n<&`: Duplicate standard input from file descriptor n.\n- `n>&m`: File descriptor  n is made to be a copy of the output file descriptor.\n- `n<&m`: File descriptor  n is made to be a copy of the input file descriptor.\n- `&>file`: Directs standard output and standard error to file.\n- `<&-`: Close the standard input.\n- `>&-`: Close the standard output.\n- `n>&-`: Close the output from file descriptor  n.\n- `n<&-`: Close the input from file descriptor  n.\n- `n>&word`: If  n is not specified, the standard output (file descriptor 1) is used. If the digits in word do not specify a file descriptor open for output, a redirection error occurs. As a special case, if n is omitted, and word does not expand to one or more digits, the standard output and standard error are redirected as described previously.\n- `n<&word`: If word expands to one or more digits, the file descriptor denoted by  n is made to be a copy of that file descriptor. If the digits in word do not specify a file descriptor open for input, a redirection error occurs. If word evaluates to -, file descriptor n is closed. If n is not specified, the standard input (file descriptor 0) is used.\n- `n>&digit-`: Moves the file descriptor digit to file descriptor  n, or the standard output (file descriptor 1) if n is not specified.\n- `n<&digit-`: Moves the file descriptor digit to file descriptor  n, or the standard input (file descriptor 0) if n is not specified. digit is closed after being duplicated to n.\n\n`>` 用来将标准输出重定向到指定文件。\n\n```bash\nls -l /usr/bin > ls-output.txt\n```\n\n如果重定向后的指定文件已经存在，就会被覆盖，不会有任何提示。\n\n如果命令没有任何输出，那么重定向之后，得到的是一个长度为 `0` 的文件。因此，`>` 具有创建新文件或改写现存文件、将其改为长度 `0` 的作用。\n\n```bash\n> ls-output.txt\n```\n\n`>>` 用来将标准输出重定向追加到指定文件。\n\n```bash\nls -l /usr/bin >> ls-output.txt\n```\n\n`2>` 用来将标准错误重定向到指定文件。\n\n```bash\nls -l /bin/usr 2> ls-error.txt\n```\n\n标准输出和标准错误，可以重定向到同一个文件。\n\n```bash\n$ ls -l /bin/usr > ls-output.txt 2>&1\n# 或者\n$ ls -l /bin/usr &> ls-output.txt\n\n# 追加到同一个文件\n$ ls -l /bin/usr &>> ls-output.txt\n```\n\n如果不希望输出错误信息，可以将它重定向到一个特殊文件`/dev/null`。\n\n```bash\nls -l /bin/usr 2> /dev/null\n```\n\n`|` 用于将一个命令的标准输出，重定向到另一个命令的标准输入。\n\n```bash\nls -l /usr/bin | less\n```\n\n不要将`>` 与 `|` 混淆。\n\n```bash\nls > less\n```\n\n上面命令会在当前目录，生成一个名为 `less` 的文本文件。\n\n下面是标准错误重定向的一个例子。\n\n```bash\ninvalid_input () {\n    echo \"Invalid input '$REPLY'\" >&2\n    exit 1\n}\nread -p \"Enter a single item > \"\n[[ -z $REPLY ]] && invalid_input\n```\n\n## tee\n\n`tee` 命令用于同时将标准输出重定向到文件，以及另一个命令的标准输入。\n\n```bash\nls /usr/bin | tee ls.txt | grep zip\n```\n\n## 命令替换\n\n命令替换(command substitution)指的是将一个命令的输出，替换进入另一个命令。`$(command)` 表示命令替换，另一种写法是使用反引号。\n\n```bash\n$ echo $(ls)\n# 或者\n$ echo `ls`\n\n$ ls -l $(which cp)\n# 或者\n$ ls -l `which cp`\n```\n\n## basename\n\n`basename` 命令清除 一个路径名的开头部分，只留下一个文件的基本名称。\n\n```bash\n#!/bin/bash\n# file_info: simple file information program\nPROGNAME=$(basename $0)\nif [[ -e $1 ]]; then\n    echo -e \"\\nFile Type:\"\n    file $1\n    echo -e \"\\nFile Status:\"\n    stat $1\nelse\n    echo \"$PROGNAME: usage: $PROGNAME file\" >&2\n    exit 1\nfi\n```\n","excerpt":"","title":"重定向","headers":[{"level":2,"title":"tee","slug":"tee","link":"#tee","children":[]},{"level":2,"title":"命令替换","slug":"命令替换","link":"#命令替换","children":[]},{"level":2,"title":"basename","slug":"basename","link":"#basename","children":[]}]}}
