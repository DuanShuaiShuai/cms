{"content":"<h2 id=\"用法\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#用法\"><span>用法</span></a></h2>\n<p>有时，脚本需要在执行过程中，由用户提供一部分数据，这时可以使用 <code v-pre>read</code> 命令。它将用户的输入存入一个变量，方便后面的代码使用。用户按下回车键，就表示输入结束。</p>\n<p><code v-pre>read</code> 命令的格式如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [-options] [variable...]</span></span></code></pre>\n</div><p>上面语法中，<code v-pre>options</code> 是参数选项，<code v-pre>variable</code> 是用来保存输入数值的一个或多个变量名。如果没有提供变量名，环境变量 <code v-pre>REPLY</code> 会包含用户输入的一整行数据。</p>\n<p>下面是一个例子 <code v-pre>demo.sh</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一些文本 > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> text</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"您的输入: </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$text</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span></code></pre>\n</div><p>上面例子中，先显示一行提示文本，然后会等待用户输入文本。用户输入的文本，存入变量 <code v-pre>text</code>，在下一行显示出来。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> bash</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> demo.sh</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">输入一些文本</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">您好，世界</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">您的输入:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 您好，世界</span></span></code></pre>\n</div><p><code v-pre>read</code> 可以接受用户输入的多个值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> Please,</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> your</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> firstname</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> and</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> lastname</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> FN</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> LN</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Hi! </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$LN</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FN</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> !\"</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>read</code> 根据用户的输入，同时为两个变量赋值。</p>\n<p>如果用户的输入项少于 <code v-pre>read</code> 命令给出的变量数目，那么额外的变量值为空。如果用户的输入项多于定义的变量，那么多余的输入项会包含到最后一个变量中。</p>\n<p>如果 <code v-pre>read</code> 命令之后没有定义变量名，那么环境变量 <code v-pre>REPLY</code> 会包含所有的输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-single: read multiple values into default variable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面脚本的运行结果如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-single</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a b c d'</span></span></code></pre>\n</div><p><code v-pre>read</code> 命令除了读取键盘输入，可以用来读取文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">while</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> myline</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">do</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$myline</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">done</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C; </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$filename</span></span></code></pre>\n</div><p>上面的例子通过 <code v-pre>read</code> 命令，读取一个文件的内容。<code v-pre>done</code> 命令后面的定向符 <code v-pre>&lt;</code>，将文件导向 <code v-pre>read</code> 命令，每次读取一行，存入变量 <code v-pre>myline</code>，直到文件读取完毕。</p>\n<h2 id=\"参数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参数\"><span>参数</span></a></h2>\n<p><code v-pre>read</code> 命令的参数如下。</p>\n<ol>\n<li>\n<p><strong><code v-pre>-t</code> 参数</strong></p>\n<p><code v-pre>read</code> 命令的 <code v-pre>-t</code> 参数，设置了超时的秒数。如果超过了指定时间，用户仍然没有输入，脚本将放弃等待，继续向下执行。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一些文本 > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -t</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> response</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"用户已经输入了\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"用户没有输入\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面例子中，输入命令会等待 3 秒，如果用户超过这个时间没有输入，这个命令就会执行失败。<code v-pre>if</code> 根据命令的返回值，转入 <code v-pre>else</code> 代码块，继续往下执行。</p>\n<p>环境变量 <code v-pre>TMOUT</code> 也可以起到同样作用，指定 <code v-pre>read</code> 命令等待用户输入的时间(单位为秒)。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">TMOUT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> response</span></span></code></pre>\n</div><p>上面例子也是等待 3 秒，如果用户还没有输入，就会超时。</p>\n</li>\n<li>\n<p><strong><code v-pre>-p</code> 参数</strong></p>\n<p><code v-pre>-p</code> 参数指定用户输入的提示信息。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面例子中，先显示 <code v-pre>Enter one or more values &gt;</code>，再接受用户的输入。</p>\n</li>\n<li>\n<p><strong><code v-pre>-a</code> 参数</strong></p>\n<p><code v-pre>-a</code> 参数把用户的输入赋值给一个数组，从零号位置开始。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> people</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">alice</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> duchess</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dodo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#ABB2BF\"> ${</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">people</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[2]</span><span style=\"--shiki-light:#E45649;--shiki-dark:#ABB2BF\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dodo</span></span></code></pre>\n</div><p>上面例子中，用户输入被赋值给一个数组 <code v-pre>people</code>，这个数组的 2 号成员就是 <code v-pre>dodo</code>。</p>\n</li>\n<li>\n<p><strong><code v-pre>-n</code> 参数</strong></p>\n<p><code v-pre>-n</code> 参数指定只读取若干个字符作为变量值，而不是整行读取。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> letter</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">abcdefghij</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $letter</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">abc</span></span></code></pre>\n</div><p>上面例子中，变量 <code v-pre>letter</code> 只包含 3 个字母。</p>\n</li>\n<li>\n<p><strong>-e 参数</strong></p>\n<p><code v-pre>-e</code> 参数允许用户输入的时候，使用 <code v-pre>readline</code> 库提供的快捷键，比如自动补全。具体的快捷键可以参阅《行操作》一章。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> Please</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> input</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> the</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> path</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> the</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> fileName</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $fileName</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>read</code> 命令接受用户输入的文件名。这时，用户可能想使用 Tab 键的文件名“自动补全”功能，但是 <code v-pre>read</code> 命令的输入默认不支持 <code v-pre>readline</code> 库的功能。<code v-pre>-e</code> 参数就可以允许用户使用自动补全。</p>\n</li>\n<li>\n<p><strong>其他参数</strong></p>\n<ul>\n<li><code v-pre>-d delimiter</code>: 定义字符串 <code v-pre>delimiter</code> 的第一个字符作为用户输入的结束，而不是一个换行符。</li>\n<li><code v-pre>-r</code>: raw 模式，表示不把用户输入的反斜杠字符解释为转义字符。</li>\n<li><code v-pre>-s</code>: 使得用户的输入不显示在屏幕上，这常常用于输入密码或保密信息。</li>\n<li><code v-pre>-u fd</code>: 使用文件描述符 <code v-pre>fd</code> 作为输入。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"ifs-变量\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ifs-变量\"><span>IFS 变量</span></a></h2>\n<p><code v-pre>read</code> 命令读取的值，默认是以空格分隔。可以通过自定义环境变量 <code v-pre>IFS</code>(内部字段分隔符，Internal Field Separator 的缩写)，修改分隔标志。</p>\n<p><code v-pre>IFS</code> 的默认值是空格、Tab 符号、换行符号，通常取第一个(即空格)。</p>\n<p>如果把 <code v-pre>IFS</code> 定义成冒号(<code v-pre>:</code>)或分号(<code v-pre>;</code>)，就可以分隔以这两个符号分隔的值，这对读取文件很有用。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-ifs: read fields from a file</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">/etc/passwd</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter a username > \"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user_name</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">file_info</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"^</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">:\" </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">)\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">  IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\":\"</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pw</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> shell</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;&#x3C;&#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"User = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"UID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"GID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Full Name = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Dir. = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Shell = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$shell</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"No such user '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，<code v-pre>IFS</code> 设为冒号，然后用来分解 <code v-pre>/etc/passwd</code> 文件的一行。<code v-pre>IFS</code> 的赋值命令和 <code v-pre>read</code> 命令写在一行，这样的话，<code v-pre>IFS</code> 的改变仅对后面的命令生效，该命令执行后 <code v-pre>IFS</code> 会自动恢复原来的值。如果不写在一行，就要采用下面的写法。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">OLD_IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$IFS</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\":\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pw</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> shell</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;&#x3C;&#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$OLD_IFS</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span></code></pre>\n</div><p>另外，上面例子中，<code v-pre>&lt;&lt;&lt;</code> 是 Here 字符串，用于将变量值转为标准输入，因为 <code v-pre>read</code> 命令只能解析标准输入。</p>\n<p>如果 <code v-pre>IFS</code> 设为空字符串，就等同于将整行读入一个变量。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">input</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"/path/to/txt/file\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">while</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -r</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> line</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">do</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$line</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">done</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$input</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span></code></pre>\n</div><p>上面的命令可以逐行读取文件，每一行存入变量 <code v-pre>line</code>，打印出来以后再读取下一行。</p>\n","env":{"base":"/","filePath":"/Users/carson/Desktop/Mister-Hope.github.io-main/src/linux/bash/read.md","filePathRelative":"linux/bash/read.md","frontmatter":{"date":"2020-05-04T00:00:00.000Z","title":"read 命令","icon":"read","author":"阮一峰","category":"Linux","tag":["Bash"],"copyright":"本教程采用<a href=\"https://creativecommons.org/licenses/by-sa/3.0/deed.zh\" rel=\"noopener noreferrer\" target=\"_blank\">知识共享 署名-相同方式共享 3.0协议</a>"},"sfcBlocks":{"template":{"type":"template","content":"<template><h2 id=\"用法\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#用法\"><span>用法</span></a></h2>\n<p>有时，脚本需要在执行过程中，由用户提供一部分数据，这时可以使用 <code v-pre>read</code> 命令。它将用户的输入存入一个变量，方便后面的代码使用。用户按下回车键，就表示输入结束。</p>\n<p><code v-pre>read</code> 命令的格式如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [-options] [variable...]</span></span></code></pre>\n</div><p>上面语法中，<code v-pre>options</code> 是参数选项，<code v-pre>variable</code> 是用来保存输入数值的一个或多个变量名。如果没有提供变量名，环境变量 <code v-pre>REPLY</code> 会包含用户输入的一整行数据。</p>\n<p>下面是一个例子 <code v-pre>demo.sh</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一些文本 > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> text</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"您的输入: </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$text</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span></code></pre>\n</div><p>上面例子中，先显示一行提示文本，然后会等待用户输入文本。用户输入的文本，存入变量 <code v-pre>text</code>，在下一行显示出来。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> bash</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> demo.sh</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">输入一些文本</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">您好，世界</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">您的输入:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 您好，世界</span></span></code></pre>\n</div><p><code v-pre>read</code> 可以接受用户输入的多个值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> Please,</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> your</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> firstname</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> and</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> lastname</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> FN</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> LN</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Hi! </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$LN</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FN</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> !\"</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>read</code> 根据用户的输入，同时为两个变量赋值。</p>\n<p>如果用户的输入项少于 <code v-pre>read</code> 命令给出的变量数目，那么额外的变量值为空。如果用户的输入项多于定义的变量，那么多余的输入项会包含到最后一个变量中。</p>\n<p>如果 <code v-pre>read</code> 命令之后没有定义变量名，那么环境变量 <code v-pre>REPLY</code> 会包含所有的输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-single: read multiple values into default variable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面脚本的运行结果如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-single</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a b c d'</span></span></code></pre>\n</div><p><code v-pre>read</code> 命令除了读取键盘输入，可以用来读取文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">while</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> myline</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">do</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$myline</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">done</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C; </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$filename</span></span></code></pre>\n</div><p>上面的例子通过 <code v-pre>read</code> 命令，读取一个文件的内容。<code v-pre>done</code> 命令后面的定向符 <code v-pre>&lt;</code>，将文件导向 <code v-pre>read</code> 命令，每次读取一行，存入变量 <code v-pre>myline</code>，直到文件读取完毕。</p>\n<h2 id=\"参数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参数\"><span>参数</span></a></h2>\n<p><code v-pre>read</code> 命令的参数如下。</p>\n<ol>\n<li>\n<p><strong><code v-pre>-t</code> 参数</strong></p>\n<p><code v-pre>read</code> 命令的 <code v-pre>-t</code> 参数，设置了超时的秒数。如果超过了指定时间，用户仍然没有输入，脚本将放弃等待，继续向下执行。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一些文本 > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -t</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> response</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"用户已经输入了\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"用户没有输入\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面例子中，输入命令会等待 3 秒，如果用户超过这个时间没有输入，这个命令就会执行失败。<code v-pre>if</code> 根据命令的返回值，转入 <code v-pre>else</code> 代码块，继续往下执行。</p>\n<p>环境变量 <code v-pre>TMOUT</code> 也可以起到同样作用，指定 <code v-pre>read</code> 命令等待用户输入的时间(单位为秒)。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">TMOUT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> response</span></span></code></pre>\n</div><p>上面例子也是等待 3 秒，如果用户还没有输入，就会超时。</p>\n</li>\n<li>\n<p><strong><code v-pre>-p</code> 参数</strong></p>\n<p><code v-pre>-p</code> 参数指定用户输入的提示信息。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面例子中，先显示 <code v-pre>Enter one or more values &gt;</code>，再接受用户的输入。</p>\n</li>\n<li>\n<p><strong><code v-pre>-a</code> 参数</strong></p>\n<p><code v-pre>-a</code> 参数把用户的输入赋值给一个数组，从零号位置开始。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> people</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">alice</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> duchess</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dodo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#ABB2BF\"> ${</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">people</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[2]</span><span style=\"--shiki-light:#E45649;--shiki-dark:#ABB2BF\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dodo</span></span></code></pre>\n</div><p>上面例子中，用户输入被赋值给一个数组 <code v-pre>people</code>，这个数组的 2 号成员就是 <code v-pre>dodo</code>。</p>\n</li>\n<li>\n<p><strong><code v-pre>-n</code> 参数</strong></p>\n<p><code v-pre>-n</code> 参数指定只读取若干个字符作为变量值，而不是整行读取。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> letter</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">abcdefghij</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $letter</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">abc</span></span></code></pre>\n</div><p>上面例子中，变量 <code v-pre>letter</code> 只包含 3 个字母。</p>\n</li>\n<li>\n<p><strong>-e 参数</strong></p>\n<p><code v-pre>-e</code> 参数允许用户输入的时候，使用 <code v-pre>readline</code> 库提供的快捷键，比如自动补全。具体的快捷键可以参阅《行操作》一章。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> Please</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> input</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> the</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> path</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> the</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> fileName</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $fileName</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>read</code> 命令接受用户输入的文件名。这时，用户可能想使用 Tab 键的文件名“自动补全”功能，但是 <code v-pre>read</code> 命令的输入默认不支持 <code v-pre>readline</code> 库的功能。<code v-pre>-e</code> 参数就可以允许用户使用自动补全。</p>\n</li>\n<li>\n<p><strong>其他参数</strong></p>\n<ul>\n<li><code v-pre>-d delimiter</code>: 定义字符串 <code v-pre>delimiter</code> 的第一个字符作为用户输入的结束，而不是一个换行符。</li>\n<li><code v-pre>-r</code>: raw 模式，表示不把用户输入的反斜杠字符解释为转义字符。</li>\n<li><code v-pre>-s</code>: 使得用户的输入不显示在屏幕上，这常常用于输入密码或保密信息。</li>\n<li><code v-pre>-u fd</code>: 使用文件描述符 <code v-pre>fd</code> 作为输入。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"ifs-变量\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ifs-变量\"><span>IFS 变量</span></a></h2>\n<p><code v-pre>read</code> 命令读取的值，默认是以空格分隔。可以通过自定义环境变量 <code v-pre>IFS</code>(内部字段分隔符，Internal Field Separator 的缩写)，修改分隔标志。</p>\n<p><code v-pre>IFS</code> 的默认值是空格、Tab 符号、换行符号，通常取第一个(即空格)。</p>\n<p>如果把 <code v-pre>IFS</code> 定义成冒号(<code v-pre>:</code>)或分号(<code v-pre>;</code>)，就可以分隔以这两个符号分隔的值，这对读取文件很有用。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-ifs: read fields from a file</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">/etc/passwd</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter a username > \"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user_name</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">file_info</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"^</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">:\" </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">)\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">  IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\":\"</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pw</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> shell</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;&#x3C;&#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"User = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"UID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"GID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Full Name = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Dir. = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Shell = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$shell</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"No such user '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，<code v-pre>IFS</code> 设为冒号，然后用来分解 <code v-pre>/etc/passwd</code> 文件的一行。<code v-pre>IFS</code> 的赋值命令和 <code v-pre>read</code> 命令写在一行，这样的话，<code v-pre>IFS</code> 的改变仅对后面的命令生效，该命令执行后 <code v-pre>IFS</code> 会自动恢复原来的值。如果不写在一行，就要采用下面的写法。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">OLD_IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$IFS</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\":\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pw</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> shell</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;&#x3C;&#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$OLD_IFS</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span></code></pre>\n</div><p>另外，上面例子中，<code v-pre>&lt;&lt;&lt;</code> 是 Here 字符串，用于将变量值转为标准输入，因为 <code v-pre>read</code> 命令只能解析标准输入。</p>\n<p>如果 <code v-pre>IFS</code> 设为空字符串，就等同于将整行读入一个变量。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">input</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"/path/to/txt/file\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">while</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -r</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> line</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">do</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$line</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">done</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$input</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span></code></pre>\n</div><p>上面的命令可以逐行读取文件，每一行存入变量 <code v-pre>line</code>，打印出来以后再读取下一行。</p>\n</template>","contentStripped":"<h2 id=\"用法\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#用法\"><span>用法</span></a></h2>\n<p>有时，脚本需要在执行过程中，由用户提供一部分数据，这时可以使用 <code v-pre>read</code> 命令。它将用户的输入存入一个变量，方便后面的代码使用。用户按下回车键，就表示输入结束。</p>\n<p><code v-pre>read</code> 命令的格式如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [-options] [variable...]</span></span></code></pre>\n</div><p>上面语法中，<code v-pre>options</code> 是参数选项，<code v-pre>variable</code> 是用来保存输入数值的一个或多个变量名。如果没有提供变量名，环境变量 <code v-pre>REPLY</code> 会包含用户输入的一整行数据。</p>\n<p>下面是一个例子 <code v-pre>demo.sh</code>。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一些文本 > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> text</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"您的输入: </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$text</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span></code></pre>\n</div><p>上面例子中，先显示一行提示文本，然后会等待用户输入文本。用户输入的文本，存入变量 <code v-pre>text</code>，在下一行显示出来。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> bash</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> demo.sh</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">输入一些文本</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">您好，世界</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">您的输入:</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 您好，世界</span></span></code></pre>\n</div><p><code v-pre>read</code> 可以接受用户输入的多个值。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> Please,</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> your</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> firstname</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> and</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> lastname</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> FN</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> LN</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Hi! </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$LN</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">, </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FN</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> !\"</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>read</code> 根据用户的输入，同时为两个变量赋值。</p>\n<p>如果用户的输入项少于 <code v-pre>read</code> 命令给出的变量数目，那么额外的变量值为空。如果用户的输入项多于定义的变量，那么多余的输入项会包含到最后一个变量中。</p>\n<p>如果 <code v-pre>read</code> 命令之后没有定义变量名，那么环境变量 <code v-pre>REPLY</code> 会包含所有的输入。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-single: read multiple values into default variable</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面脚本的运行结果如下。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read-single</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">Enter</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> one</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> or</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> more</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> values</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> > </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> b</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> c</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> d</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> =</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> 'a b c d'</span></span></code></pre>\n</div><p><code v-pre>read</code> 命令除了读取键盘输入，可以用来读取文件。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">while</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> myline</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">do</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$myline</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">done</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C; </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$filename</span></span></code></pre>\n</div><p>上面的例子通过 <code v-pre>read</code> 命令，读取一个文件的内容。<code v-pre>done</code> 命令后面的定向符 <code v-pre>&lt;</code>，将文件导向 <code v-pre>read</code> 命令，每次读取一行，存入变量 <code v-pre>myline</code>，直到文件读取完毕。</p>\n<h2 id=\"参数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参数\"><span>参数</span></a></h2>\n<p><code v-pre>read</code> 命令的参数如下。</p>\n<ol>\n<li>\n<p><strong><code v-pre>-t</code> 参数</strong></p>\n<p><code v-pre>read</code> 命令的 <code v-pre>-t</code> 参数，设置了超时的秒数。如果超过了指定时间，用户仍然没有输入，脚本将放弃等待，继续向下执行。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"输入一些文本 > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -t</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> response</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"用户已经输入了\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"用户没有输入\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n</div><p>上面例子中，输入命令会等待 3 秒，如果用户超过这个时间没有输入，这个命令就会执行失败。<code v-pre>if</code> 根据命令的返回值，转入 <code v-pre>else</code> 代码块，继续往下执行。</p>\n<p>环境变量 <code v-pre>TMOUT</code> 也可以起到同样作用，指定 <code v-pre>read</code> 命令等待用户输入的时间(单位为秒)。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">TMOUT</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">3</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> response</span></span></code></pre>\n</div><p>上面例子也是等待 3 秒，如果用户还没有输入，就会超时。</p>\n</li>\n<li>\n<p><strong><code v-pre>-p</code> 参数</strong></p>\n<p><code v-pre>-p</code> 参数指定用户输入的提示信息。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter one or more values > \"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"REPLY = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$REPLY</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span></code></pre>\n</div><p>上面例子中，先显示 <code v-pre>Enter one or more values &gt;</code>，再接受用户的输入。</p>\n</li>\n<li>\n<p><strong><code v-pre>-a</code> 参数</strong></p>\n<p><code v-pre>-a</code> 参数把用户的输入赋值给一个数组，从零号位置开始。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -a</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> people</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">alice</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> duchess</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> dodo</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#ABB2BF\"> ${</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">people</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\">[2]</span><span style=\"--shiki-light:#E45649;--shiki-dark:#ABB2BF\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">dodo</span></span></code></pre>\n</div><p>上面例子中，用户输入被赋值给一个数组 <code v-pre>people</code>，这个数组的 2 号成员就是 <code v-pre>dodo</code>。</p>\n</li>\n<li>\n<p><strong><code v-pre>-n</code> 参数</strong></p>\n<p><code v-pre>-n</code> 参数指定只读取若干个字符作为变量值，而不是整行读取。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -n</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 3</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> letter</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">abcdefghij</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">$</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $letter</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">abc</span></span></code></pre>\n</div><p>上面例子中，变量 <code v-pre>letter</code> 只包含 3 个字母。</p>\n</li>\n<li>\n<p><strong>-e 参数</strong></p>\n<p><code v-pre>-e</code> 参数允许用户输入的时候，使用 <code v-pre>readline</code> 库提供的快捷键，比如自动补全。具体的快捷键可以参阅《行操作》一章。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> Please</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> input</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> the</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> path</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> to</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> the</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> file:</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -e</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> fileName</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">echo</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> $fileName</span></span></code></pre>\n</div><p>上面例子中，<code v-pre>read</code> 命令接受用户输入的文件名。这时，用户可能想使用 Tab 键的文件名“自动补全”功能，但是 <code v-pre>read</code> 命令的输入默认不支持 <code v-pre>readline</code> 库的功能。<code v-pre>-e</code> 参数就可以允许用户使用自动补全。</p>\n</li>\n<li>\n<p><strong>其他参数</strong></p>\n<ul>\n<li><code v-pre>-d delimiter</code>: 定义字符串 <code v-pre>delimiter</code> 的第一个字符作为用户输入的结束，而不是一个换行符。</li>\n<li><code v-pre>-r</code>: raw 模式，表示不把用户输入的反斜杠字符解释为转义字符。</li>\n<li><code v-pre>-s</code>: 使得用户的输入不显示在屏幕上，这常常用于输入密码或保密信息。</li>\n<li><code v-pre>-u fd</code>: 使用文件描述符 <code v-pre>fd</code> 作为输入。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"ifs-变量\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#ifs-变量\"><span>IFS 变量</span></a></h2>\n<p><code v-pre>read</code> 命令读取的值，默认是以空格分隔。可以通过自定义环境变量 <code v-pre>IFS</code>(内部字段分隔符，Internal Field Separator 的缩写)，修改分隔标志。</p>\n<p><code v-pre>IFS</code> 的默认值是空格、Tab 符号、换行符号，通常取第一个(即空格)。</p>\n<p>如果把 <code v-pre>IFS</code> 定义成冒号(<code v-pre>:</code>)或分号(<code v-pre>;</code>)，就可以分隔以这两个符号分隔的值，这对读取文件很有用。</p>\n<div class=\"language-bash line-numbers-mode\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\"># read-ifs: read fields from a file</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">FILE</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">/etc/passwd</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -p</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Enter a username > \"</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user_name</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">file_info</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"$(</span><span style=\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\">grep</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"^</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">:\" </span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$FILE</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">)\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">if</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> [ </span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">-n</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> ]; </span><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">then</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">  IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\":\"</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pw</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> shell</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;&#x3C;&#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"User = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"UID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"GID = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Full Name = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Home Dir. = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"Shell = '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$shell</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">else</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"No such user '</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$user_name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">'\"</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> >&#x26;2</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  exit</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> 1</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">fi</span></span></code></pre>\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><p>上面例子中，<code v-pre>IFS</code> 设为冒号，然后用来分解 <code v-pre>/etc/passwd</code> 文件的一行。<code v-pre>IFS</code> 的赋值命令和 <code v-pre>read</code> 命令写在一行，这样的话，<code v-pre>IFS</code> 的改变仅对后面的命令生效，该命令执行后 <code v-pre>IFS</code> 会自动恢复原来的值。如果不写在一行，就要采用下面的写法。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">OLD_IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$IFS</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\":\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">read</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> user</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> pw</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> uid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> gid</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> name</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> home</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> shell</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C;&#x3C;&#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$file_info</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$OLD_IFS</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span></code></pre>\n</div><p>另外，上面例子中，<code v-pre>&lt;&lt;&lt;</code> 是 Here 字符串，用于将变量值转为标准输入，因为 <code v-pre>read</code> 命令只能解析标准输入。</p>\n<p>如果 <code v-pre>IFS</code> 设为空字符串，就等同于将整行读入一个变量。</p>\n<div class=\"language-bash\" data-highlighter=\"shiki\" data-ext=\"bash\" data-title=\"bash\" style=\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\"><pre v-pre class=\"shiki shiki-themes one-light one-dark-pro vp-code\"><code><span class=\"line\"><span style=\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\">#!/bin/bash</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">input</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"/path/to/txt/file\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">while</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\"> IFS</span><span style=\"--shiki-light:#383A42;--shiki-dark:#56B6C2\">=</span><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\"> read</span><span style=\"--shiki-light:#986801;--shiki-dark:#D19A66\"> -r</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> line</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">do</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\">  echo</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\"> \"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$line</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A626A4;--shiki-dark:#C678DD\">done</span><span style=\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\"> &#x3C; </span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span><span style=\"--shiki-light:#E45649;--shiki-dark:#E06C75\">$input</span><span style=\"--shiki-light:#50A14F;--shiki-dark:#98C379\">\"</span></span></code></pre>\n</div><p>上面的命令可以逐行读取文件，每一行存入变量 <code v-pre>line</code>，打印出来以后再读取下一行。</p>\n","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n## 用法\n\n有时，脚本需要在执行过程中，由用户提供一部分数据，这时可以使用 `read` 命令。它将用户的输入存入一个变量，方便后面的代码使用。用户按下回车键，就表示输入结束。\n\n`read` 命令的格式如下。\n\n```bash\nread [-options] [variable...]\n```\n\n上面语法中，`options` 是参数选项，`variable` 是用来保存输入数值的一个或多个变量名。如果没有提供变量名，环境变量 `REPLY` 会包含用户输入的一整行数据。\n\n下面是一个例子 `demo.sh`。\n\n```bash\n#!/bin/bash\n\necho -n \"输入一些文本 > \"\nread text\necho \"您的输入: $text\"\n```\n\n上面例子中，先显示一行提示文本，然后会等待用户输入文本。用户输入的文本，存入变量 `text`，在下一行显示出来。\n\n```bash\n$ bash demo.sh\n输入一些文本 > 您好，世界\n您的输入: 您好，世界\n```\n\n`read` 可以接受用户输入的多个值。\n\n```bash\n#!/bin/bash\necho Please, enter your firstname and lastname\nread FN LN\necho \"Hi! $LN, $FN !\"\n```\n\n上面例子中，`read` 根据用户的输入，同时为两个变量赋值。\n\n如果用户的输入项少于 `read` 命令给出的变量数目，那么额外的变量值为空。如果用户的输入项多于定义的变量，那么多余的输入项会包含到最后一个变量中。\n\n如果 `read` 命令之后没有定义变量名，那么环境变量 `REPLY` 会包含所有的输入。\n\n```bash\n#!/bin/bash\n# read-single: read multiple values into default variable\necho -n \"Enter one or more values > \"\nread\necho \"REPLY = '$REPLY'\"\n```\n\n上面脚本的运行结果如下。\n\n```bash\n$ read-single\nEnter one or more values > a b c d\nREPLY = 'a b c d'\n```\n\n`read` 命令除了读取键盘输入，可以用来读取文件。\n\n```bash\nwhile read myline\ndo\n  echo \"$myline\"\ndone < $filename\n```\n\n上面的例子通过 `read` 命令，读取一个文件的内容。`done` 命令后面的定向符 `<`，将文件导向 `read` 命令，每次读取一行，存入变量 `myline`，直到文件读取完毕。\n\n## 参数\n\n`read` 命令的参数如下。\n\n1. **`-t` 参数**\n\n   `read` 命令的 `-t` 参数，设置了超时的秒数。如果超过了指定时间，用户仍然没有输入，脚本将放弃等待，继续向下执行。\n\n   ```bash\n   #!/bin/bash\n\n   echo -n \"输入一些文本 > \"\n   if read -t 3 response; then\n     echo \"用户已经输入了\"\n   else\n     echo \"用户没有输入\"\n   fi\n   ```\n\n   上面例子中，输入命令会等待 3 秒，如果用户超过这个时间没有输入，这个命令就会执行失败。`if` 根据命令的返回值，转入 `else` 代码块，继续往下执行。\n\n   环境变量 `TMOUT` 也可以起到同样作用，指定 `read` 命令等待用户输入的时间(单位为秒)。\n\n   ```bash\n   TMOUT=3\n   read response\n   ```\n\n   上面例子也是等待 3 秒，如果用户还没有输入，就会超时。\n\n1. **`-p` 参数**\n\n   `-p` 参数指定用户输入的提示信息。\n\n   ```bash\n   read -p \"Enter one or more values > \"\n   echo \"REPLY = '$REPLY'\"\n   ```\n\n   上面例子中，先显示 `Enter one or more values >`，再接受用户的输入。\n\n1. **`-a` 参数**\n\n   `-a` 参数把用户的输入赋值给一个数组，从零号位置开始。\n\n   ```bash\n   $ read -a people\n   alice duchess dodo\n   $ echo ${people[2]}\n   dodo\n   ```\n\n   上面例子中，用户输入被赋值给一个数组 `people`，这个数组的 2 号成员就是 `dodo`。\n\n1. **`-n` 参数**\n\n   `-n` 参数指定只读取若干个字符作为变量值，而不是整行读取。\n\n   ```bash\n   $ read -n 3 letter\n   abcdefghij\n   $ echo $letter\n   abc\n   ```\n\n   上面例子中，变量 `letter` 只包含 3 个字母。\n\n1. **-e 参数**\n\n   `-e` 参数允许用户输入的时候，使用 `readline` 库提供的快捷键，比如自动补全。具体的快捷键可以参阅《行操作》一章。\n\n   ```bash\n   #!/bin/bash\n\n   echo Please input the path to the file:\n\n   read -e fileName\n\n   echo $fileName\n   ```\n\n   上面例子中，`read` 命令接受用户输入的文件名。这时，用户可能想使用 Tab 键的文件名“自动补全”功能，但是 `read` 命令的输入默认不支持 `readline` 库的功能。`-e` 参数就可以允许用户使用自动补全。\n\n1. **其他参数**\n\n   - `-d delimiter`: 定义字符串 `delimiter` 的第一个字符作为用户输入的结束，而不是一个换行符。\n   - `-r`: raw 模式，表示不把用户输入的反斜杠字符解释为转义字符。\n   - `-s`: 使得用户的输入不显示在屏幕上，这常常用于输入密码或保密信息。\n   - `-u fd`: 使用文件描述符 `fd` 作为输入。\n\n## IFS 变量\n\n`read` 命令读取的值，默认是以空格分隔。可以通过自定义环境变量 `IFS`(内部字段分隔符，Internal Field Separator 的缩写)，修改分隔标志。\n\n`IFS` 的默认值是空格、Tab 符号、换行符号，通常取第一个(即空格)。\n\n如果把 `IFS` 定义成冒号(`:`)或分号(`;`)，就可以分隔以这两个符号分隔的值，这对读取文件很有用。\n\n```bash\n#!/bin/bash\n# read-ifs: read fields from a file\n\nFILE=/etc/passwd\n\nread -p \"Enter a username > \" user_name\nfile_info=\"$(grep \"^$user_name:\" $FILE)\"\n\nif [ -n \"$file_info\" ]; then\n  IFS=\":\" read user pw uid gid name home shell <<< \"$file_info\"\n  echo \"User = '$user'\"\n  echo \"UID = '$uid'\"\n  echo \"GID = '$gid'\"\n  echo \"Full Name = '$name'\"\n  echo \"Home Dir. = '$home'\"\n  echo \"Shell = '$shell'\"\nelse\n  echo \"No such user '$user_name'\" >&2\n  exit 1\nfi\n```\n\n上面例子中，`IFS` 设为冒号，然后用来分解 `/etc/passwd` 文件的一行。`IFS` 的赋值命令和 `read` 命令写在一行，这样的话，`IFS` 的改变仅对后面的命令生效，该命令执行后 `IFS` 会自动恢复原来的值。如果不写在一行，就要采用下面的写法。\n\n```bash\nOLD_IFS=\"$IFS\"\nIFS=\":\"\nread user pw uid gid name home shell <<< \"$file_info\"\nIFS=\"$OLD_IFS\"\n```\n\n另外，上面例子中，`<<<` 是 Here 字符串，用于将变量值转为标准输入，因为 `read` 命令只能解析标准输入。\n\n如果 `IFS` 设为空字符串，就等同于将整行读入一个变量。\n\n```bash\n#!/bin/bash\ninput=\"/path/to/txt/file\"\nwhile IFS= read -r line\ndo\n  echo \"$line\"\ndone < \"$input\"\n```\n\n上面的命令可以逐行读取文件，每一行存入变量 `line`，打印出来以后再读取下一行。\n","excerpt":"","title":"","headers":[{"level":2,"title":"用法","slug":"用法","link":"#用法","children":[]},{"level":2,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":2,"title":"IFS 变量","slug":"ifs-变量","link":"#ifs-变量","children":[]}]}}
